!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports.fengari=e():t.fengari=e()}("undefined"!=typeof self?self:this,function(){return function(t){function e(r){if(a[r])return a[r].exports;var n=a[r]={i:r,l:!1,exports:{}};return t[r].call(n.exports,n,n.exports,e),n.l=!0,n.exports}var a={};return e.m=t,e.c=a,e.d=function(t,a,r){e.o(t,a)||Object.defineProperty(t,a,{configurable:!1,enumerable:!0,get:r})},e.n=function(t){var a=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(a,"a",a),a},e.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},e.p="",e(e.s=31)}([function(t,e,a){"use strict";function r(t,e){if(t===e)return 0;for(var a=t.length,r=e.length,n=0,u=Math.min(a,r);n<u;++n)if(t[n]!==e[n]){a=t[n],r=e[n];break}return a<r?-1:r<a?1:0}function n(t){return global.Buffer&&"function"==typeof global.Buffer.isBuffer?global.Buffer.isBuffer(t):!(null==t||!t._isBuffer)}function u(t){return Object.prototype.toString.call(t)}function l(t){return!n(t)&&("function"==typeof global.ArrayBuffer&&("function"==typeof ArrayBuffer.isView?ArrayBuffer.isView(t):!!t&&(t instanceof DataView||!!(t.buffer&&t.buffer instanceof ArrayBuffer))))}function o(t){if(b.isFunction(t)){if(O)return t.name;var e=t.toString(),a=e.match(U);return a&&a[1]}}function s(t,e){return"string"==typeof t?t.length<e?t:t.slice(0,e):t}function i(t){if(O||!b.isFunction(t))return b.inspect(t);var e=o(t);return"[Function"+(e?": "+e:"")+"]"}function c(t){return s(i(t.actual),128)+" "+t.operator+" "+s(i(t.expected),128)}function _(t,e,a,r,n){throw new m.AssertionError({message:a,actual:t,expected:e,operator:r,stackStartFunction:n})}function f(t,e){t||_(t,!0,e,"==",m.ok)}function p(t,e,a,o){if(t===e)return!0;if(n(t)&&n(e))return 0===r(t,e);if(b.isDate(t)&&b.isDate(e))return t.getTime()===e.getTime();if(b.isRegExp(t)&&b.isRegExp(e))return t.source===e.source&&t.global===e.global&&t.multiline===e.multiline&&t.lastIndex===e.lastIndex&&t.ignoreCase===e.ignoreCase;if(null!==t&&"object"===(void 0===t?"undefined":T(t))||null!==e&&"object"===(void 0===e?"undefined":T(e))){if(l(t)&&l(e)&&u(t)===u(e)&&!(t instanceof Float32Array||t instanceof Float64Array))return 0===r(new Uint8Array(t.buffer),new Uint8Array(e.buffer));if(n(t)!==n(e))return!1;o=o||{actual:[],expected:[]};var s=o.actual.indexOf(t);return-1!==s&&s===o.expected.indexOf(e)||(o.actual.push(t),o.expected.push(e),h(t,e,a,o))}return a?t===e:t==e}function v(t){return"[object Arguments]"==Object.prototype.toString.call(t)}function h(t,e,a,r){if(null===t||void 0===t||null===e||void 0===e)return!1;if(b.isPrimitive(t)||b.isPrimitive(e))return t===e;if(a&&Object.getPrototypeOf(t)!==Object.getPrototypeOf(e))return!1;var n=v(t),u=v(e);if(n&&!u||!n&&u)return!1;if(n)return t=k.call(t),e=k.call(e),p(t,e,a);var l,o,s=E(t),i=E(e);if(s.length!==i.length)return!1;for(s.sort(),i.sort(),o=s.length-1;o>=0;o--)if(s[o]!==i[o])return!1;for(o=s.length-1;o>=0;o--)if(l=s[o],!p(t[l],e[l],a,r))return!1;return!0}function g(t,e,a){p(t,e,!0)&&_(t,e,a,"notDeepStrictEqual",g)}function d(t,e){if(!t||!e)return!1;if("[object RegExp]"==Object.prototype.toString.call(e))return e.test(t);try{if(t instanceof e)return!0}catch(t){}return!Error.isPrototypeOf(e)&&!0===e.call({},t)}function L(t){var e;try{t()}catch(t){e=t}return e}function A(t,e,a,r){var n;if("function"!=typeof e)throw new TypeError('"block" argument must be a function');"string"==typeof a&&(r=a,a=null),n=L(e),r=(a&&a.name?" ("+a.name+").":".")+(r?" "+r:"."),t&&!n&&_(n,a,"Missing expected exception"+r);var u="string"==typeof r,l=!t&&b.isError(n),o=!t&&n&&!a;if((l&&u&&d(n,a)||o)&&_(n,a,"Got unwanted exception"+r),t&&n&&a&&!d(n,a)||!t&&n)throw n}/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <feross@feross.org> <http://feross.org>
 * @license  MIT
 */
var T="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},b=a(32),x=Object.prototype.hasOwnProperty,k=Array.prototype.slice,O=function(){return"foo"===function(){}.name}(),m=t.exports=f,U=/\s*function\s+([^\(\s]*)\s*/;m.AssertionError=function(t){this.name="AssertionError",this.actual=t.actual,this.expected=t.expected,this.operator=t.operator,t.message?(this.message=t.message,this.generatedMessage=!1):(this.message=c(this),this.generatedMessage=!0);var e=t.stackStartFunction||_;if(Error.captureStackTrace)Error.captureStackTrace(this,e);else{var a=new Error;if(a.stack){var r=a.stack,n=o(e),u=r.indexOf("\n"+n);if(u>=0){var l=r.indexOf("\n",u+1);r=r.substring(l+1)}this.stack=r}}},b.inherits(m.AssertionError,Error),m.fail=_,m.ok=f,m.equal=function(t,e,a){t!=e&&_(t,e,a,"==",m.equal)},m.notEqual=function(t,e,a){t==e&&_(t,e,a,"!=",m.notEqual)},m.deepEqual=function(t,e,a){p(t,e,!1)||_(t,e,a,"deepEqual",m.deepEqual)},m.deepStrictEqual=function(t,e,a){p(t,e,!0)||_(t,e,a,"deepStrictEqual",m.deepStrictEqual)},m.notDeepEqual=function(t,e,a){p(t,e,!1)&&_(t,e,a,"notDeepEqual",m.notDeepEqual)},m.notDeepStrictEqual=g,m.strictEqual=function(t,e,a){t!==e&&_(t,e,a,"===",m.strictEqual)},m.notStrictEqual=function(t,e,a){t===e&&_(t,e,a,"!==",m.notStrictEqual)},m.throws=function(t,e,a){A(!0,t,e,a)},m.doesNotThrow=function(t,e,a){A(!1,t,e,a)},m.ifError=function(t){if(t)throw t};var E=Object.keys||function(t){var e=[];for(var a in t)x.call(t,a)&&e.push(a);return e}},function(t,e,a){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}for(var n=a(0),u=a(6),l=[],o=0;o<127;o++)l[String.fromCharCode(o)]=o;t.exports.char=l;var s="Lua 5.3.4  Copyright (C) 1994-2017 Lua.org, PUC-Rio",i={LUA_OK:0,LUA_YIELD:1,LUA_ERRRUN:2,LUA_ERRSYNTAX:3,LUA_ERRMEM:4,LUA_ERRGCMM:5,LUA_ERRERR:6},c={LUA_TNONE:-1,LUA_TNIL:0,LUA_TBOOLEAN:1,LUA_TLIGHTUSERDATA:2,LUA_TNUMBER:3,LUA_TSTRING:4,LUA_TTABLE:5,LUA_TFUNCTION:6,LUA_TUSERDATA:7,LUA_TTHREAD:8,LUA_NUMTAGS:9};c.LUA_TSHRSTR=0|c.LUA_TSTRING,c.LUA_TLNGSTR=16|c.LUA_TSTRING,c.LUA_TNUMFLT=0|c.LUA_TNUMBER,c.LUA_TNUMINT=16|c.LUA_TNUMBER,c.LUA_TLCL=0|c.LUA_TFUNCTION,c.LUA_TLCF=16|c.LUA_TFUNCTION,c.LUA_TCCL=32|c.LUA_TFUNCTION;var _=c,f=-u.LUAI_MAXSTACK-1e3,p=function(t){return f-t},v=function t(){r(this,t),this.event=NaN,this.name=null,this.namewhat=null,this.what=null,this.source=null,this.currentline=NaN,this.linedefined=NaN,this.lastlinedefined=NaN,this.nups=NaN,this.nparams=NaN,this.isvararg=NaN,this.istailcall=NaN,this.short_src=null,this.i_ci=null},h=void 0;h="function"==typeof Uint8Array.from?Uint8Array.from.bind(Uint8Array):function(t){for(var e=0,a=t.length,r=new Uint8Array(a);a>e;)r[e]=t[e++];return r};var g=void 0;if("function"==typeof(new Uint8Array).indexOf)g=function(t,e,a){return t.indexOf(e,a)};else{var d=[].indexOf;if(0!==d.call(new Uint8Array(1),0))throw Error("missing .indexOf");g=function(t,e,a){return d.call(t,e,a)}}var L=void 0;L="function"==typeof Uint8Array.of?Uint8Array.of.bind(Uint8Array):function(){return h(arguments)};var A=function(t){return t instanceof Uint8Array},T=function(t,e){if(t!==e){var a=t.length;if(a!==e.length)return!1;for(var r=0;r<a;r++)if(t[r]!==e[r])return!1}return!0},b=function(t,e,a){n(A(t),"jsstring expects a Uint8Array"),a=void 0===a?t.length:Math.min(t.length,a);for(var r="",u=void 0!==e?e:0;u<a;){var l=t[u++];if(l<128)r+=String.fromCharCode(l);else{if(l<194||l>244)throw RangeError("cannot convert invalid utf8 to javascript string");if(l<=223){if(u>=a)throw RangeError("cannot convert invalid utf8 to javascript string");var o=t[u++];if(128!=(192&o))throw RangeError("cannot convert invalid utf8 to javascript string");r+=String.fromCharCode(((31&l)<<6)+(63&o))}else if(l<=239){if(u+1>=a)throw RangeError("cannot convert invalid utf8 to javascript string");var s=t[u++];if(128!=(192&s))throw RangeError("cannot convert invalid utf8 to javascript string");var i=t[u++];if(128!=(192&i))throw RangeError("cannot convert invalid utf8 to javascript string");var c=((15&l)<<12)+((63&s)<<6)+(63&i);if(c<=65535)r+=String.fromCharCode(c);else{c-=65536;var _=55296+(c>>10),f=c%1024+56320;r+=String.fromCharCode(_,f)}}else{if(u+2>=a)throw RangeError("cannot convert invalid utf8 to javascript string");var p=t[u++];if(128!=(192&p))throw RangeError("cannot convert invalid utf8 to javascript string");var v=t[u++];if(128!=(192&v))throw RangeError("cannot convert invalid utf8 to javascript string");var h=t[u++];if(128!=(192&h))throw RangeError("cannot convert invalid utf8 to javascript string");var g=((7&l)<<18)+((63&p)<<12)+((63&v)<<6)+(63&h);g-=65536;var d=55296+(g>>10),L=g%1024+56320;r+=String.fromCharCode(d,L)}}}return r},x=";,/?:@&=+$abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789,-_.!~*'()#".split("").reduce(function(t,e){return t[e.charCodeAt(0)]=!0,t},{}),k=function(t){for(var e="",a=0;a<t.length;a++){var r=t[a];x[r]?e+=String.fromCharCode(r):e+="%"+(r<16?"0":"")+r.toString(16)}return e},O={},m=function(t,e){if(n("string"==typeof t,"to_luastring expects a javascript string"),e){var a=O[t];if(A(a))return a}for(var r=t.length,u=Array(r),l=0,o=0;o<r;++o){var s=t.charCodeAt(o);if(s<=127)u[l++]=s;else if(s<=2047)u[l++]=192|s>>6,u[l++]=128|63&s;else{if(s>=55296&&s<=56319&&o+1<r){var i=t.charCodeAt(o+1);i>=56320&&i<=57343&&(o++,s=1024*(s-55296)+i+9216)}s<=65535?(u[l++]=224|s>>12,u[l++]=128|s>>6&63,u[l++]=128|63&s):(u[l++]=240|s>>18,u[l++]=128|s>>12&63,u[l++]=128|s>>6&63,u[l++]=128|63&s)}}return u=h(u),e&&(O[t]=u),u},U=function(t){return n(A(t),"expects an array of bytes"),t};t.exports.LUA_PATH_SEP=";";t.exports.LUA_PATH_MARK="?";t.exports.LUA_EXEC_DIR="!";t.exports.LUA_VDIR="5.3";t.exports.LUA_DIRSEP="/";t.exports.LUA_LDIR="./lua/5.3/";t.exports.LUA_CDIR="./lua/5.3/";t.exports.LUA_PATH_DEFAULT="./lua/5.3/?.lua;./lua/5.3/?/init.lua;./lua/5.3/?.lua;./lua/5.3/?/init.lua;./?.lua;./?/init.lua";t.exports.LUA_CPATH_DEFAULT="./lua/5.3/?.js;./lua/5.3/loadall.js;./?.js",t.exports.CT=_,t.exports.FENGARI_AUTHORS="B. Giannangeli, Daurnimator",t.exports.FENGARI_COPYRIGHT="Fengari 0.0.1  Copyright (C) 2017-2018 B. Giannangeli, Daurnimator\nBased on: Lua 5.3.4  Copyright (C) 1994-2017 Lua.org, PUC-Rio",t.exports.FENGARI_RELEASE="Fengari 0.0.1",t.exports.FENGARI_VERSION="Fengari 0.0",t.exports.FENGARI_VERSION_MAJOR="0",t.exports.FENGARI_VERSION_MINOR="0",t.exports.FENGARI_VERSION_NUM=1,t.exports.FENGARI_VERSION_RELEASE="1",t.exports.LUA_AUTHORS="R. Ierusalimschy, L. H. de Figueiredo, W. Celes",t.exports.LUA_COPYRIGHT=s,t.exports.LUA_HOOKCALL=0,t.exports.LUA_HOOKCOUNT=3,t.exports.LUA_HOOKLINE=2,t.exports.LUA_HOOKRET=1,t.exports.LUA_HOOKTAILCALL=4,t.exports.LUA_INITVARVERSION="LUA_INIT_5_3",t.exports.LUA_INIT_VAR="LUA_INIT",t.exports.LUA_MASKCALL=1,t.exports.LUA_MASKCOUNT=8,t.exports.LUA_MASKLINE=4,t.exports.LUA_MASKRET=2,t.exports.LUA_MINSTACK=20,t.exports.LUA_MULTRET=-1,t.exports.LUA_OPADD=0,t.exports.LUA_OPBAND=7,t.exports.LUA_OPBNOT=13,t.exports.LUA_OPBOR=8,t.exports.LUA_OPBXOR=9,t.exports.LUA_OPDIV=5,t.exports.LUA_OPEQ=0,t.exports.LUA_OPIDIV=6,t.exports.LUA_OPLE=2,t.exports.LUA_OPLT=1,t.exports.LUA_OPMOD=3,t.exports.LUA_OPMUL=2,t.exports.LUA_OPPOW=4,t.exports.LUA_OPSHL=10,t.exports.LUA_OPSHR=11,t.exports.LUA_OPSUB=1,t.exports.LUA_OPUNM=12,t.exports.LUA_REGISTRYINDEX=f,t.exports.LUA_RELEASE="Lua 5.3.4",t.exports.LUA_RIDX_GLOBALS=2,t.exports.LUA_RIDX_LAST=2,t.exports.LUA_RIDX_MAINTHREAD=1,t.exports.LUA_SIGNATURE="Lua",t.exports.LUA_VERSION="Lua 5.3",t.exports.LUA_VERSION_MAJOR="5",t.exports.LUA_VERSION_MINOR="3",t.exports.LUA_VERSION_NUM=503,t.exports.LUA_VERSION_RELEASE="4",t.exports.LUA_VERSUFFIX="_5_3",t.exports.constant_types=c,t.exports.lua_Debug=v,t.exports.lua_upvalueindex=p,t.exports.thread_status=i,t.exports.is_luastring=A,t.exports.luastring_eq=T,t.exports.luastring_from=h,t.exports.luastring_indexOf=g,t.exports.luastring_of=L,t.exports.to_jsstring=b,t.exports.to_luastring=m,t.exports.to_uristring=k,t.exports.from_userstring=U},function(t,e,a){"use strict";var r=a(1),n=a(18),u=a(9),l=a(5),o=a(11);t.exports.FENGARI_AUTHORS=r.FENGARI_AUTHORS,t.exports.FENGARI_COPYRIGHT=r.FENGARI_COPYRIGHT,t.exports.FENGARI_RELEASE=r.FENGARI_RELEASE,t.exports.FENGARI_VERSION=r.FENGARI_VERSION,t.exports.FENGARI_VERSION_MAJOR=r.FENGARI_VERSION_MAJOR,t.exports.FENGARI_VERSION_MINOR=r.FENGARI_VERSION_MINOR,t.exports.FENGARI_VERSION_NUM=r.FENGARI_VERSION_NUM,t.exports.FENGARI_VERSION_RELEASE=r.FENGARI_VERSION_RELEASE,t.exports.LUA_AUTHORS=r.LUA_AUTHORS,t.exports.LUA_COPYRIGHT=r.LUA_COPYRIGHT,t.exports.LUA_ERRERR=r.thread_status.LUA_ERRERR,t.exports.LUA_ERRGCMM=r.thread_status.LUA_ERRGCMM,t.exports.LUA_ERRMEM=r.thread_status.LUA_ERRMEM,t.exports.LUA_ERRRUN=r.thread_status.LUA_ERRRUN,t.exports.LUA_ERRSYNTAX=r.thread_status.LUA_ERRSYNTAX,t.exports.LUA_HOOKCALL=r.LUA_HOOKCALL,t.exports.LUA_HOOKCOUNT=r.LUA_HOOKCOUNT,t.exports.LUA_HOOKLINE=r.LUA_HOOKLINE,t.exports.LUA_HOOKRET=r.LUA_HOOKRET,t.exports.LUA_HOOKTAILCALL=r.LUA_HOOKTAILCALL,t.exports.LUA_INITVARVERSION=r.LUA_INITVARVERSION,t.exports.LUA_INIT_VAR=r.LUA_INIT_VAR,t.exports.LUA_MASKCALL=r.LUA_MASKCALL,t.exports.LUA_MASKCOUNT=r.LUA_MASKCOUNT,t.exports.LUA_MASKLINE=r.LUA_MASKLINE,t.exports.LUA_MASKRET=r.LUA_MASKRET,t.exports.LUA_MINSTACK=r.LUA_MINSTACK,t.exports.LUA_MULTRET=r.LUA_MULTRET,t.exports.LUA_NUMTAGS=r.LUA_NUMTAGS,t.exports.LUA_OK=r.thread_status.LUA_OK,t.exports.LUA_OPADD=r.LUA_OPADD,t.exports.LUA_OPBAND=r.LUA_OPBAND,t.exports.LUA_OPBNOT=r.LUA_OPBNOT,t.exports.LUA_OPBOR=r.LUA_OPBOR,t.exports.LUA_OPBXOR=r.LUA_OPBXOR,t.exports.LUA_OPDIV=r.LUA_OPDIV,t.exports.LUA_OPEQ=r.LUA_OPEQ,t.exports.LUA_OPIDIV=r.LUA_OPIDIV,t.exports.LUA_OPLE=r.LUA_OPLE,t.exports.LUA_OPLT=r.LUA_OPLT,t.exports.LUA_OPMOD=r.LUA_OPMOD,t.exports.LUA_OPMUL=r.LUA_OPMUL,t.exports.LUA_OPPOW=r.LUA_OPPOW,t.exports.LUA_OPSHL=r.LUA_OPSHL,t.exports.LUA_OPSHR=r.LUA_OPSHR,t.exports.LUA_OPSUB=r.LUA_OPSUB,t.exports.LUA_OPUNM=r.LUA_OPUNM,t.exports.LUA_REGISTRYINDEX=r.LUA_REGISTRYINDEX,t.exports.LUA_RELEASE=r.LUA_RELEASE,t.exports.LUA_RIDX_GLOBALS=r.LUA_RIDX_GLOBALS,t.exports.LUA_RIDX_LAST=r.LUA_RIDX_LAST,t.exports.LUA_RIDX_MAINTHREAD=r.LUA_RIDX_MAINTHREAD,t.exports.LUA_SIGNATURE=r.LUA_SIGNATURE,t.exports.LUA_TNONE=r.CT.LUA_TNONE,t.exports.LUA_TNIL=r.CT.LUA_TNIL,t.exports.LUA_TBOOLEAN=r.CT.LUA_TBOOLEAN,t.exports.LUA_TLIGHTUSERDATA=r.CT.LUA_TLIGHTUSERDATA,t.exports.LUA_TNUMBER=r.CT.LUA_TNUMBER,t.exports.LUA_TSTRING=r.CT.LUA_TSTRING,t.exports.LUA_TTABLE=r.CT.LUA_TTABLE,t.exports.LUA_TFUNCTION=r.CT.LUA_TFUNCTION,t.exports.LUA_TUSERDATA=r.CT.LUA_TUSERDATA,t.exports.LUA_TTHREAD=r.CT.LUA_TTHREAD,t.exports.LUA_VERSION=r.LUA_VERSION,t.exports.LUA_VERSION_MAJOR=r.LUA_VERSION_MAJOR,t.exports.LUA_VERSION_MINOR=r.LUA_VERSION_MINOR,t.exports.LUA_VERSION_NUM=r.LUA_VERSION_NUM,t.exports.LUA_VERSION_RELEASE=r.LUA_VERSION_RELEASE,t.exports.LUA_VERSUFFIX=r.LUA_VERSUFFIX,t.exports.LUA_YIELD=r.thread_status.LUA_YIELD,t.exports.lua_Debug=r.lua_Debug,t.exports.lua_upvalueindex=r.lua_upvalueindex,t.exports.luastring_eq=r.luastring_eq,t.exports.luastring_indexOf=r.luastring_indexOf,t.exports.luastring_of=r.luastring_of,t.exports.to_jsstring=r.to_jsstring,t.exports.to_luastring=r.to_luastring,t.exports.to_uristring=r.to_uristring,t.exports.LUA_CDIR=r.LUA_CDIR,t.exports.LUA_CPATH_DEFAULT=r.LUA_CPATH_DEFAULT,t.exports.LUA_EXEC_DIR=r.LUA_EXEC_DIR,t.exports.LUA_LDIR=r.LUA_LDIR,t.exports.LUA_PATH_DEFAULT=r.LUA_PATH_DEFAULT,t.exports.LUA_PATH_MARK=r.LUA_PATH_MARK,t.exports.LUA_PATH_SEP=r.LUA_PATH_SEP,t.exports.LUA_ROOT=r.LUA_ROOT,t.exports.LUA_SHRDIR=r.LUA_SHRDIR,t.exports.LUA_VDIR=r.LUA_VDIR,t.exports.LUA_DIRSEP=r.LUA_DIRSEP,t.exports.lua_absindex=n.lua_absindex,t.exports.lua_arith=n.lua_arith,t.exports.lua_atpanic=n.lua_atpanic,t.exports.lua_atnativeerror=n.lua_atnativeerror,t.exports.lua_call=n.lua_call,t.exports.lua_callk=n.lua_callk,t.exports.lua_checkstack=n.lua_checkstack,t.exports.lua_close=o.lua_close,t.exports.lua_compare=n.lua_compare,t.exports.lua_concat=n.lua_concat,t.exports.lua_copy=n.lua_copy,t.exports.lua_createtable=n.lua_createtable,t.exports.lua_dump=n.lua_dump,t.exports.lua_error=n.lua_error,t.exports.lua_gc=n.lua_gc,t.exports.lua_getallocf=n.lua_getallocf,t.exports.lua_getextraspace=n.lua_getextraspace,t.exports.lua_getfield=n.lua_getfield,t.exports.lua_getglobal=n.lua_getglobal,t.exports.lua_gethook=u.lua_gethook,t.exports.lua_gethookcount=u.lua_gethookcount,t.exports.lua_gethookmask=u.lua_gethookmask,t.exports.lua_geti=n.lua_geti,t.exports.lua_getinfo=u.lua_getinfo,t.exports.lua_getlocal=u.lua_getlocal,t.exports.lua_getmetatable=n.lua_getmetatable,t.exports.lua_getstack=u.lua_getstack,t.exports.lua_gettable=n.lua_gettable,t.exports.lua_gettop=n.lua_gettop,t.exports.lua_getupvalue=n.lua_getupvalue,t.exports.lua_getuservalue=n.lua_getuservalue,t.exports.lua_insert=n.lua_insert,t.exports.lua_isboolean=n.lua_isboolean,t.exports.lua_iscfunction=n.lua_iscfunction,t.exports.lua_isfunction=n.lua_isfunction,t.exports.lua_isinteger=n.lua_isinteger,t.exports.lua_islightuserdata=n.lua_islightuserdata,t.exports.lua_isnil=n.lua_isnil,t.exports.lua_isnone=n.lua_isnone,t.exports.lua_isnoneornil=n.lua_isnoneornil,t.exports.lua_isnumber=n.lua_isnumber,t.exports.lua_isproxy=n.lua_isproxy,t.exports.lua_isstring=n.lua_isstring,t.exports.lua_istable=n.lua_istable,t.exports.lua_isthread=n.lua_isthread,t.exports.lua_isuserdata=n.lua_isuserdata,t.exports.lua_isyieldable=l.lua_isyieldable,t.exports.lua_len=n.lua_len,t.exports.lua_load=n.lua_load,t.exports.lua_newstate=o.lua_newstate,t.exports.lua_newtable=n.lua_newtable,t.exports.lua_newthread=o.lua_newthread,t.exports.lua_newuserdata=n.lua_newuserdata,t.exports.lua_next=n.lua_next,t.exports.lua_pcall=n.lua_pcall,t.exports.lua_pcallk=n.lua_pcallk,t.exports.lua_pop=n.lua_pop,t.exports.lua_pushboolean=n.lua_pushboolean,t.exports.lua_pushcclosure=n.lua_pushcclosure,t.exports.lua_pushcfunction=n.lua_pushcfunction,t.exports.lua_pushfstring=n.lua_pushfstring,t.exports.lua_pushglobaltable=n.lua_pushglobaltable,t.exports.lua_pushinteger=n.lua_pushinteger,t.exports.lua_pushjsclosure=n.lua_pushjsclosure,t.exports.lua_pushjsfunction=n.lua_pushjsfunction,t.exports.lua_pushlightuserdata=n.lua_pushlightuserdata,t.exports.lua_pushliteral=n.lua_pushliteral,t.exports.lua_pushlstring=n.lua_pushlstring,t.exports.lua_pushnil=n.lua_pushnil,t.exports.lua_pushnumber=n.lua_pushnumber,t.exports.lua_pushstring=n.lua_pushstring,t.exports.lua_pushthread=n.lua_pushthread,t.exports.lua_pushvalue=n.lua_pushvalue,t.exports.lua_pushvfstring=n.lua_pushvfstring,t.exports.lua_rawequal=n.lua_rawequal,t.exports.lua_rawget=n.lua_rawget,t.exports.lua_rawgeti=n.lua_rawgeti,t.exports.lua_rawgetp=n.lua_rawgetp,t.exports.lua_rawlen=n.lua_rawlen,t.exports.lua_rawset=n.lua_rawset,t.exports.lua_rawseti=n.lua_rawseti,t.exports.lua_rawsetp=n.lua_rawsetp,t.exports.lua_register=n.lua_register,t.exports.lua_remove=n.lua_remove,t.exports.lua_replace=n.lua_replace,t.exports.lua_resume=l.lua_resume,t.exports.lua_rotate=n.lua_rotate,t.exports.lua_setallof=l.lua_setallof,t.exports.lua_setfield=n.lua_setfield,t.exports.lua_setglobal=n.lua_setglobal,t.exports.lua_sethook=u.lua_sethook,t.exports.lua_seti=n.lua_seti,t.exports.lua_setlocal=u.lua_setlocal,t.exports.lua_setmetatable=n.lua_setmetatable,t.exports.lua_settable=n.lua_settable,t.exports.lua_settop=n.lua_settop,t.exports.lua_setupvalue=n.lua_setupvalue,t.exports.lua_setuservalue=n.lua_setuservalue,t.exports.lua_status=n.lua_status,t.exports.lua_stringtonumber=n.lua_stringtonumber,t.exports.lua_toboolean=n.lua_toboolean,t.exports.lua_todataview=n.lua_todataview,t.exports.lua_tointeger=n.lua_tointeger,t.exports.lua_tointegerx=n.lua_tointegerx,t.exports.lua_tojsstring=n.lua_tojsstring,t.exports.lua_toljsstring=n.lua_toljsstring,t.exports.lua_tolstring=n.lua_tolstring,t.exports.lua_tonumber=n.lua_tonumber,t.exports.lua_tonumberx=n.lua_tonumberx,t.exports.lua_topointer=n.lua_topointer,t.exports.lua_toproxy=n.lua_toproxy;t.exports.lua_tostring=n.lua_tostring,t.exports.lua_tothread=n.lua_tothread,t.exports.lua_touserdata=n.lua_touserdata,t.exports.lua_type=n.lua_type,t.exports.lua_typename=n.lua_typename,t.exports.lua_upvalueid=n.lua_upvalueid,t.exports.lua_upvaluejoin=n.lua_upvaluejoin,t.exports.lua_version=n.lua_version,t.exports.lua_xmove=n.lua_xmove,t.exports.lua_yield=l.lua_yield,t.exports.lua_yieldk=l.lua_yieldk,t.exports.lua_tocfunction=n.lua_tocfunction},function(t,e,a){"use strict";function r(t,e,a){return e in t?Object.defineProperty(t,e,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[e]=a,t}function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var u,l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},o=function(){function t(t,e){for(var a=0;a<e.length;a++){var r=e[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,a,r){return a&&t(e.prototype,a),r&&t(e,r),e}}(),s=a(0),i=a(1),c=a(20),_=a(9),f=a(5),p=a(10),v=a(11),h=a(8),g=a(7),d=a(6),L=a(13),A=a(15),T=a(12),b=i.constant_types,x=i.char,k=b.LUA_NUMTAGS,O=b.LUA_NUMTAGS+1,m=function(){function t(e,a){n(this,t),this.type=e,this.value=a}return o(t,[{key:"ttype",value:function(){return 63&this.type}},{key:"ttnov",value:function(){return 15&this.type}},{key:"checktag",value:function(t){return this.type===t}},{key:"checktype",value:function(t){return this.ttnov()===t}},{key:"ttisnumber",value:function(){return this.checktype(b.LUA_TNUMBER)}},{key:"ttisfloat",value:function(){return this.checktag(b.LUA_TNUMFLT)}},{key:"ttisinteger",value:function(){return this.checktag(b.LUA_TNUMINT)}},{key:"ttisnil",value:function(){return this.checktag(b.LUA_TNIL)}},{key:"ttisboolean",value:function(){return this.checktag(b.LUA_TBOOLEAN)}},{key:"ttislightuserdata",value:function(){return this.checktag(b.LUA_TLIGHTUSERDATA)}},{key:"ttisstring",value:function(){return this.checktype(b.LUA_TSTRING)}},{key:"ttisshrstring",value:function(){return this.checktag(b.LUA_TSHRSTR)}},{key:"ttislngstring",value:function(){return this.checktag(b.LUA_TLNGSTR)}},{key:"ttistable",value:function(){return this.checktag(b.LUA_TTABLE)}},{key:"ttisfunction",value:function(){return this.checktype(b.LUA_TFUNCTION)}},{key:"ttisclosure",value:function(){return(31&this.type)===b.LUA_TFUNCTION}},{key:"ttisCclosure",value:function(){return this.checktag(b.LUA_TCCL)}},{key:"ttisLclosure",value:function(){return this.checktag(b.LUA_TLCL)}},{key:"ttislcf",value:function(){return this.checktag(b.LUA_TLCF)}},{key:"ttisfulluserdata",value:function(){return this.checktag(b.LUA_TUSERDATA)}},{key:"ttisthread",value:function(){return this.checktag(b.LUA_TTHREAD)}},{key:"ttisdeadkey",value:function(){return this.checktag(O)}},{key:"l_isfalse",value:function(){return this.ttisnil()||this.ttisboolean()&&!1===this.value}},{key:"setfltvalue",value:function(t){this.type=b.LUA_TNUMFLT,this.value=t}},{key:"chgfltvalue",value:function(t){s(this.type==b.LUA_TNUMFLT),this.value=t}},{key:"setivalue",value:function(t){this.type=b.LUA_TNUMINT,this.value=t}},{key:"chgivalue",value:function(t){s(this.type==b.LUA_TNUMINT),this.value=t}},{key:"setnilvalue",value:function(){this.type=b.LUA_TNIL,this.value=void 0}},{key:"setfvalue",value:function(t){this.type=b.LUA_TLCF,this.value=t}},{key:"setpvalue",value:function(t){this.type=b.LUA_TLIGHTUSERDATA,this.value=t}},{key:"setbvalue",value:function(t){this.type=b.LUA_TBOOLEAN,this.value=t}},{key:"setsvalue",value:function(t){this.type=b.LUA_TLNGSTR,this.value=t}},{key:"setuvalue",value:function(t){this.type=b.LUA_TUSERDATA,this.value=t}},{key:"setthvalue",value:function(t){this.type=b.LUA_TTHREAD,this.value=t}},{key:"setclLvalue",value:function(t){this.type=b.LUA_TLCL,this.value=t}},{key:"setclCvalue",value:function(t){this.type=b.LUA_TCCL,this.value=t}},{key:"sethvalue",value:function(t){this.type=b.LUA_TTABLE,this.value=t}},{key:"setdeadvalue",value:function(){this.type=O,this.value=null}},{key:"setfrom",value:function(t){this.type=t.type,this.value=t.value}},{key:"tsvalue",value:function(){return s(this.ttisstring()),this.value}},{key:"svalue",value:function(){return this.tsvalue().getstr()}},{key:"vslen",value:function(){return this.tsvalue().tsslen()}},{key:"jsstring",value:function(t,e){return i.to_jsstring(this.svalue(),t,e)}}]),t}(),U=function(t,e){t.stack[t.top++]=new m(e.type,e.value)},E=function(t,e){t.stack[t.top++]=new m(b.LUA_TLNGSTR,e)},y=function(t,e,a){t.stack[e].setfrom(t.stack[a])},S=function(t,e,a){t.stack[e].setfrom(a)},N=function(t,e,a){t.stack[e].setsvalue(a)},R=new m(b.LUA_TNIL,null);Object.freeze(R),t.exports.luaO_nilobject=R;var w=function t(e,a){n(this,t),this.id=e.l_G.id_counter++,this.p=null,this.nupvalues=a,this.upvals=new Array(a)},I=function t(e,a,r){for(n(this,t),this.id=e.l_G.id_counter++,this.f=a,this.nupvalues=r,this.upvalue=new Array(r);r--;)this.upvalue[r]=new m(b.LUA_TNIL,null)},M=function t(e,a){n(this,t),this.id=e.l_G.id_counter++,this.metatable=null,this.uservalue=new m(b.LUA_TNIL,null),this.len=a,this.data=Object.create(null)},C=function t(){n(this,t),this.varname=null,this.startpc=NaN,this.endpc=NaN},P=i.to_luastring("..."),D=i.to_luastring('[string "'),K=i.to_luastring('"]'),B=function(t,e){var a=t.length,r=void 0;if(t[0]===x["="])a<e?(r=new Uint8Array(a-1),r.set(t.subarray(1))):(r=new Uint8Array(e),r.set(t.subarray(1,e+1)));else if(t[0]===x["@"])a<=e?(r=new Uint8Array(a-1),r.set(t.subarray(1))):(r=new Uint8Array(e),r.set(P),e-=P.length,r.set(t.subarray(a-e),P.length));else{r=new Uint8Array(e);var n=i.luastring_indexOf(t,x["\n"]);r.set(D);var u=D.length;e-=D.length+P.length+K.length,a<e&&-1===n?(r.set(t,u),u+=t.length):(-1!==n&&(a=n),a>e&&(a=e),r.set(t.subarray(0,a),u),u+=a,r.set(P,u),u+=P.length),r.set(K,u),u+=K.length,r=r.subarray(0,u)}return r},G=function(t){return c.lisdigit(t)?t-x[0]:String.fromCharCode(t).toLowerCase().charCodeAt(0)-x.a+10},V=function(t,e){var a=1;if(s(e<=1114111),e<128)t[7]=e;else{var r=63;do{t[8-a++]=128|63&e,e>>=6,r>>=1}while(e>r);t[8-a]=~r<<1|e}return a},j=function(t){for(var e=0,a=x[d.lua_getlocaledecpoint()],r=0,n=0,u=0,l=0,o=void 0,s=!1;c.lisspace(t[e]);)e++;if((o=t[e]===x["-"])?e++:t[e]===x["+"]&&e++,t[e]!==x[0]||t[e+1]!==x.x&&t[e+1]!==x.X)return null;for(e+=2;;e++)if(t[e]===a){if(s)break;s=!0}else{if(!c.lisxdigit(t[e]))break;0===n&&t[e]===x[0]?u++:++n<=30?r=16*r+G(t[e]):l++,s&&l--}if(u+n===0)return null;if(l*=4,t[e]===x.p||t[e]===x.P){var i=0,_=void 0;if(e++,(_=t[e]===x["-"])?e++:t[e]===x["+"]&&e++,!c.lisdigit(t[e]))return null;for(;c.lisdigit(t[e]);)i=10*i+t[e++]-x[0];_&&(i=-i),l+=i}return o&&(r=-r),{n:d.ldexp(r,l),i:e}},F=function(t){try{t=i.to_jsstring(t)}catch(t){return null}var e=/^[\t\v\f \n\r]*[+-]?(?:[0-9]+\.?[0-9]*|\.[0-9]*)(?:[eE][+-]?[0-9]+)?/.exec(t);if(!e)return null;var a=parseFloat(e[0]);return isNaN(a)?null:{n:a,i:e[0].length}},X=function(t,e){var a="x"===e?j(t):F(t);if(null===a)return null;for(;c.lisspace(t[a.i]);)a.i++;return a.i===t.length||0===t[a.i]?a:null},H=[x["."],x.x,x.X,x.n,x.N],z=(u={},r(u,x["."],"."),r(u,x.x,"x"),r(u,x.X,"x"),r(u,x.n,"n"),r(u,x.N,"n"),u),Y=function(t){for(var e=t.length,a=0,r=0;r<e;r++){var n=t[r];if(-1!==H.indexOf(n)){a=n;break}}var u=z[a];return"n"===u?null:X(t,u)},Z=Math.floor(A.MAX_INT/10),J=A.MAX_INT%10,q=function(t){for(var e=0,a=0,r=!0,n=void 0;c.lisspace(t[e]);)e++;if((n=t[e]===x["-"])?e++:t[e]===x["+"]&&e++,t[e]!==x[0]||t[e+1]!==x.x&&t[e+1]!==x.X)for(;c.lisdigit(t[e]);e++){var u=t[e]-x[0];if(a>=Z&&(a>Z||u>J+n))return null;a=10*a+u|0,r=!1}else for(e+=2;c.lisxdigit(t[e]);e++)a=16*a+G(t[e])|0,r=!1;for(;c.lisspace(t[e]);)e++;return r||e!==t.length&&0!==t[e]?null:{n:0|(n?-a:a),i:e}},W=function(t,e){var a=q(t);return null!==a?(e.setivalue(a.n),a.i+1):(a=Y(t),null!==a?(e.setfltvalue(a.n),a.i+1):0)},Q=function(t,e){var a=void 0;if(e.ttisinteger())a=i.to_luastring(d.lua_integer2str(e.value));else{var r=d.lua_number2str(e.value);/^[-0123456789]+$/.test(r)&&(r+=d.lua_getlocaledecpoint()+"0"),a=i.to_luastring(r)}e.setsvalue(h.luaS_bless(t,a))},$=function(t,e){f.luaD_inctop(t),N(t,t.top-1,h.luaS_new(t,e))},tt=function(t,e,a){for(var r=0,n=0,u=0,o=void 0;-1!=(o=i.luastring_indexOf(e,x["%"],n));){switch($(t,e.subarray(n,o)),e[o+1]){case x.s:var s=a[u++];if(null===s)s=i.to_luastring("(null)",!0);else{s=i.from_userstring(s);var h=i.luastring_indexOf(s,0);-1!==h&&(s=s.subarray(0,h))}$(t,s);break;case x.c:var d=a[u++];c.lisprint(d)?$(t,i.luastring_of(d)):et(t,i.to_luastring("<\\%d>",!0),d);break;case x.d:case x.I:f.luaD_inctop(t),t.stack[t.top-1].setivalue(a[u++]),Q(t,t.stack[t.top-1]);break;case x.f:f.luaD_inctop(t),t.stack[t.top-1].setfltvalue(a[u++]),Q(t,t.stack[t.top-1]);break;case x.p:var A=a[u++];if(A instanceof v.lua_State||A instanceof g.Table||A instanceof M||A instanceof w||A instanceof I||A instanceof p.UpVal)$(t,i.to_luastring("0x"+A.id.toString(16)));else if(null===A)$(t,i.to_luastring("null"));else if("function"==typeof A||"object"===(void 0===A?"undefined":l(A))){var T=t.l_G.ids.get(A);T||(T=t.l_G.id_counter++,t.l_G.ids.set(A,T)),$(t,i.to_luastring("0x"+T.toString(16)))}else void 0===A?$(t,i.to_luastring("undefined")):"number"==typeof A?$(t,i.to_luastring("Number("+A+")")):"string"==typeof A?$(t,i.to_luastring("String("+JSON.stringify(A)+")")):"boolean"==typeof A?$(t,i.to_luastring(A?"Boolean(true)":"Boolean(false)")):$(t,i.to_luastring("<id NYI>"));break;case x.U:var b=new Uint8Array(8),k=V(b,a[u++]);$(t,b.subarray(8-k));break;case x["%"]:$(t,i.to_luastring("%",!0));break;default:_.luaG_runerror(t,i.to_luastring("invalid option '%%%c' to 'lua_pushfstring'"),e[o+1])}r+=2,n=o+2}return f.luaD_checkstack(t,1),$(t,e.subarray(n)),r>0&&L.luaV_concat(t,r+1),t.stack[t.top-1].svalue()},et=function(t,e){for(var a=arguments.length,r=Array(a>2?a-2:0),n=2;n<a;n++)r[n-2]=arguments[n];return tt(t,e,r)},at=function(t){var e=0;if(t<8)return t;for(;t>=128;)t=t+15>>4,e+=4;for(;t>=16;)t=t+1>>1,e++;return e+1<<3|t-8},rt=function(t,e,a,r){switch(e){case i.LUA_OPADD:return a+r|0;case i.LUA_OPSUB:return a-r|0;case i.LUA_OPMUL:return L.luaV_imul(a,r);case i.LUA_OPMOD:return L.luaV_mod(t,a,r);case i.LUA_OPIDIV:return L.luaV_div(t,a,r);case i.LUA_OPBAND:return a&r;case i.LUA_OPBOR:return a|r;case i.LUA_OPBXOR:return a^r;case i.LUA_OPSHL:return L.luaV_shiftl(a,r);case i.LUA_OPSHR:return L.luaV_shiftl(a,-r);case i.LUA_OPUNM:return 0-a|0;case i.LUA_OPBNOT:return-1^a;default:s(0)}},nt=function(t,e,a,r){switch(e){case i.LUA_OPADD:return a+r;case i.LUA_OPSUB:return a-r;case i.LUA_OPMUL:return a*r;case i.LUA_OPDIV:return a/r;case i.LUA_OPPOW:return Math.pow(a,r);case i.LUA_OPIDIV:return Math.floor(a/r);case i.LUA_OPUNM:return-a;case i.LUA_OPMOD:return A.luai_nummod(t,a,r);default:s(0)}},ut=function(t,e,a,r,n){var u="number"==typeof n?t.stack[n]:n;switch(e){case i.LUA_OPBAND:case i.LUA_OPBOR:case i.LUA_OPBXOR:case i.LUA_OPSHL:case i.LUA_OPSHR:case i.LUA_OPBNOT:var l=void 0,o=void 0;if(!1!==(l=L.tointeger(a))&&!1!==(o=L.tointeger(r)))return void u.setivalue(rt(t,e,l,o));break;case i.LUA_OPDIV:case i.LUA_OPPOW:var c=void 0,_=void 0;if(!1!==(c=L.tonumber(a))&&!1!==(_=L.tonumber(r)))return void u.setfltvalue(nt(t,e,c,_));break;default:var f=void 0,p=void 0;if(a.ttisinteger()&&r.ttisinteger())return void u.setivalue(rt(t,e,a.value,r.value));if(!1!==(f=L.tonumber(a))&&!1!==(p=L.tonumber(r)))return void u.setfltvalue(nt(t,e,f,p))}s(null!==t),T.luaT_trybinTM(t,a,r,n,e-i.LUA_OPADD+T.TMS.TM_ADD)};t.exports.CClosure=I,t.exports.LClosure=w,t.exports.LUA_TDEADKEY=O,t.exports.LUA_TPROTO=k,t.exports.LocVar=C,t.exports.TValue=m,t.exports.Udata=M,t.exports.UTF8BUFFSZ=8,t.exports.luaO_arith=ut,t.exports.luaO_chunkid=B,t.exports.luaO_hexavalue=G,t.exports.luaO_int2fb=at,t.exports.luaO_pushfstring=et,t.exports.luaO_pushvfstring=tt,t.exports.luaO_str2num=W,t.exports.luaO_tostring=Q,t.exports.luaO_utf8esc=V,t.exports.numarith=nt,t.exports.pushobj2s=U,t.exports.pushsvalue2s=E,t.exports.setobjs2s=y,t.exports.setobj2s=S,t.exports.setsvalue2s=N},function(t,e,a){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var n=a(2),u=n.to_luastring("_LOADED"),l=n.to_luastring("_PRELOAD"),o=n.to_luastring("FILE*"),s=n.to_luastring("__name"),i=n.to_luastring("__tostring"),c=new Uint8Array(0),_=function t(){r(this,t),this.L=null,this.b=c,this.n=0},f=function t(e,a,r){if(0===r||!n.lua_istable(e,-1))return 0;for(n.lua_pushnil(e);n.lua_next(e,-2);){if(n.lua_type(e,-2)===n.LUA_TSTRING){if(n.lua_rawequal(e,a,-1))return n.lua_pop(e,1),1;if(t(e,a,r-1))return n.lua_remove(e,-2),n.lua_pushliteral(e,"."),n.lua_insert(e,-2),n.lua_concat(e,3),1}n.lua_pop(e,1)}return 0},p=function(t,e){var a=n.lua_gettop(t);if(n.lua_getinfo(t,n.to_luastring("f"),e),n.lua_getfield(t,n.LUA_REGISTRYINDEX,u),f(t,a+1,2)){var r=n.lua_tostring(t,-1);return r[0]==="_".charCodeAt(0)&&r[1]==="G".charCodeAt(0)&&r[2]===".".charCodeAt(0)&&(n.lua_pushstring(t,r.subarray(3)),n.lua_remove(t,-2)),n.lua_copy(t,-1,a+1),n.lua_pop(t,2),1}return n.lua_settop(t,a),0},v=function(t,e){p(t,e)?(n.lua_pushfstring(t,n.to_luastring("function '%s'"),n.lua_tostring(t,-1)),n.lua_remove(t,-2)):0!==e.namewhat.length?n.lua_pushfstring(t,n.to_luastring("%s '%s'"),e.namewhat,e.name):e.what&&e.what[0]==="m".charCodeAt(0)?n.lua_pushliteral(t,"main chunk"):e.what&&e.what[0]==="L".charCodeAt(0)?n.lua_pushfstring(t,n.to_luastring("function <%s:%d>"),e.short_src,e.linedefined):n.lua_pushliteral(t,"?")},h=function(t){for(var e=new n.lua_Debug,a=1,r=1;n.lua_getstack(t,r,e);)a=r,r*=2;for(;a<r;){var u=Math.floor((a+r)/2);n.lua_getstack(t,u,e)?a=u+1:r=u}return r-1},g=function(t,e,a,r){var u=new n.lua_Debug,l=n.lua_gettop(t),o=h(e),s=o-r>21?10:-1;for(a&&n.lua_pushfstring(t,n.to_luastring("%s\n"),a),At(t,10,null),n.lua_pushliteral(t,"stack traceback:");n.lua_getstack(e,r++,u);)0==s--?(n.lua_pushliteral(t,"\n\t..."),r=o-11+1):(n.lua_getinfo(e,n.to_luastring("Slnt",!0),u),n.lua_pushfstring(t,n.to_luastring("\n\t%s:"),u.short_src),u.currentline>0&&n.lua_pushliteral(t,u.currentline+":"),n.lua_pushliteral(t," in "),v(t,u),u.istailcall&&n.lua_pushliteral(t,"\n\t(...tail calls..)"),n.lua_concat(t,n.lua_gettop(t)-l));n.lua_concat(t,n.lua_gettop(t)-l)},d=function(t){var e="PANIC: unprotected error in call to Lua API";try{e+=" ("+n.lua_tojsstring(t,-1)+")"}catch(t){}throw new Error(e)},L=function(t,e,a){var r=new n.lua_Debug;return n.lua_getstack(t,0,r)?(n.lua_getinfo(t,n.to_luastring("n"),r),n.luastring_eq(r.namewhat,n.to_luastring("method"))&&0===--e?b(t,n.to_luastring("calling '%s' on bad self (%s)"),r.name,a):(null===r.name&&(r.name=p(t,r)?n.lua_tostring(t,-1):n.to_luastring("?")),b(t,n.to_luastring("bad argument #%d to '%s' (%s)"),e,r.name,a))):b(t,n.to_luastring("bad argument #%d (%s)"),e,a)},A=function(t,e,a){var r=void 0;r=st(t,e,s)===n.LUA_TSTRING?n.lua_tostring(t,-1):n.lua_type(t,e)===n.LUA_TLIGHTUSERDATA?n.to_luastring("light userdata",!0):w(t,e);var u=n.lua_pushfstring(t,n.to_luastring("%s expected, got %s"),a,r);return L(t,e,u)},T=function(t,e){var a=new n.lua_Debug;if(n.lua_getstack(t,e,a)&&(n.lua_getinfo(t,n.to_luastring("Sl",!0),a),a.currentline>0))return void n.lua_pushfstring(t,n.to_luastring("%s:%d: "),a.short_src,a.currentline);n.lua_pushstring(t,n.to_luastring(""))},b=function(t,e){T(t,1);for(var a=arguments.length,r=Array(a>2?a-2:0),u=2;u<a;u++)r[u-2]=arguments[u];return n.lua_pushvfstring(t,e,r),n.lua_concat(t,2),n.lua_error(t)},x=function(t,e,a,r){return e?(n.lua_pushboolean(t,1),1):(n.lua_pushnil(t),a?n.lua_pushfstring(t,n.to_luastring("%s: %s"),a,n.to_luastring(r.message)):n.lua_pushstring(t,n.to_luastring(r.message)),n.lua_pushinteger(t,-r.errno),3)},k=function(t,e){var a=void 0,r=void 0;if(null===e)return n.lua_pushboolean(t,1),n.lua_pushliteral(t,"exit"),n.lua_pushinteger(t,0),3;if(e.status)a="exit",r=e.status;else{if(!e.signal)return x(t,0,null,e);a="signal",r=e.signal}return n.lua_pushnil(t),n.lua_pushliteral(t,a),n.lua_pushinteger(t,r),3},O=function(t,e){return n.lua_getfield(t,n.LUA_REGISTRYINDEX,e)},m=function(t,e){return O(t,e)!==n.LUA_TNIL?0:(n.lua_pop(t,1),n.lua_createtable(t,0,2),n.lua_pushstring(t,e),n.lua_setfield(t,-2,s),n.lua_pushvalue(t,-1),n.lua_setfield(t,n.LUA_REGISTRYINDEX,e),1)},U=function(t,e){O(t,e),n.lua_setmetatable(t,-2)},E=function(t,e,a){var r=n.lua_touserdata(t,e);return null!==r&&n.lua_getmetatable(t,e)?(O(t,a),n.lua_rawequal(t,-1,-2)||(r=null),n.lua_pop(t,2),r):null},y=function(t,e,a){var r=E(t,e,a);return null===r&&A(t,e,a),r},S=function(t,e,a,r){for(var u=a?B(t,e,a):P(t,e),l=0;r[l];l++)if(r[l].join("|")===u.join("|"))return l;return L(t,e,n.lua_pushfstring(t,n.to_luastring("invalid option '%s'"),u))},N=function(t,e,a){A(t,e,n.lua_typename(t,a))},R=function(){var t=n.lua_newstate();return t&&n.lua_atpanic(t,d),t},w=function(t,e){return n.lua_typename(t,n.lua_type(t,e))},I=function(t,e,a,r){e||L(t,a,r)},M=function(t,e){n.lua_type(t,e)===n.LUA_TNONE&&L(t,e,n.to_luastring("value expected",!0))},C=function(t,e,a){n.lua_type(t,e)!==a&&N(t,e,a)},P=function(t,e){return D(t,e,null)},D=function(t,e){var a=n.lua_tolstring(t,e);return null!==a&&void 0!==a||N(t,e,n.LUA_TSTRING),a},K=function(t,e,a){return n.lua_type(t,e)<=0?a:D(t,e)},B=K,G=function(t,e){n.lua_isnumber(t,e)?L(t,e,n.to_luastring("number has no integer representation",!0)):N(t,e,n.LUA_TNUMBER)},V=function(t,e){var a=n.lua_tonumberx(t,e);return!1===a&&N(t,e,n.LUA_TNUMBER),a},j=function(t,e,a){return at(t,V,e,a)},F=function(t,e){var a=n.lua_tointegerx(t,e);return!1===a&&G(t,e),a},X=function(t,e,a){return at(t,F,e,a)},H=function(t,e){var a=t.n+e;if(t.b.length<a){var r=Math.max(2*t.b.length,a),n=new Uint8Array(r);n.set(t.b),t.b=n}return t.b.subarray(t.n,a)},z=function(t,e){e.L=t,e.b=c},Y=function(t,e,a){return z(t,e),H(e,a)},Z=function(t){return H(t,8192)},J=function(t,e,a){if(a>0){H(t,a).set(e.subarray(0,a)),$(t,a)}},q=function(t,e){J(t,e,e.length)},W=function(t){n.lua_pushlstring(t.L,t.b,t.n),t.n=0,t.b=c},Q=function(t,e){H(t,1),t.b[t.n++]=e},$=function(t,e){t.n+=e},tt=function(t,e){$(t,e),W(t)},et=function(t){var e=t.L,a=n.lua_tostring(e,-1);J(t,a,a.length),n.lua_pop(e,1)},at=function(t,e,a,r){return n.lua_type(t,a)<=0?r:e(t,a)},rt=function(t,e){var a=e.string;return e.string=null,a},nt=function(t,e,a,r,u){return n.lua_load(t,rt,{string:e},r,u)},ut=function(t,e,a,r){return nt(t,e,0,r,null)},lt=function(t,e){return ut(t,e,e.length,e)},ot=function(t,e){return lt(t,e)||n.lua_pcall(t,0,n.LUA_MULTRET,0)},st=function(t,e,a){if(n.lua_getmetatable(t,e)){n.lua_pushstring(t,a);var r=n.lua_rawget(t,-2);return r===n.LUA_TNIL?n.lua_pop(t,2):n.lua_remove(t,-2),r}return n.LUA_TNIL},it=function(t,e,a){return e=n.lua_absindex(t,e),st(t,e,a)!==n.LUA_TNIL&&(n.lua_pushvalue(t,e),n.lua_call(t,1,1),!0)},ct=function(t,e){n.lua_len(t,e);var a=n.lua_tointegerx(t,-1);return!1===a&&b(t,n.to_luastring("object length is not an integer",!0)),n.lua_pop(t,1),a},_t=n.to_luastring("%I"),ft=n.to_luastring("%f"),pt=function(t,e){if(it(t,e,i))n.lua_isstring(t,-1)||b(t,n.to_luastring("'__tostring' must return a string"));else{switch(n.lua_type(t,e)){case n.LUA_TNUMBER:n.lua_isinteger(t,e)?n.lua_pushfstring(t,_t,n.lua_tointeger(t,e)):n.lua_pushfstring(t,ft,n.lua_tonumber(t,e));break;case n.LUA_TSTRING:n.lua_pushvalue(t,e);break;case n.LUA_TBOOLEAN:n.lua_pushliteral(t,n.lua_toboolean(t,e)?"true":"false");break;case n.LUA_TNIL:n.lua_pushliteral(t,"nil");break;default:var a=st(t,e,s),r=a===n.LUA_TSTRING?n.lua_tostring(t,-1):w(t,e);n.lua_pushfstring(t,n.to_luastring("%s: %p"),r,n.lua_topointer(t,e)),a!==n.LUA_TNIL&&n.lua_remove(t,-2)}}return n.lua_tolstring(t,-1)},vt=function(t,e,a,r){dt(t,n.LUA_REGISTRYINDEX,u),n.lua_getfield(t,-1,e),n.lua_toboolean(t,-1)||(n.lua_pop(t,1),n.lua_pushcfunction(t,a),n.lua_pushstring(t,e),n.lua_call(t,1,1),n.lua_pushvalue(t,-1),n.lua_setfield(t,-3,e)),n.lua_remove(t,-2),r&&(n.lua_pushvalue(t,-1),n.lua_setglobal(t,e))},ht=function(t,e,a){var r=a>>>0,n=e.length,u=t.length+1-n;t:for(;r<u;r++){for(var l=0;l<n;l++)if(t[r+l]!==e[l])continue t;return r}return-1},gt=function(t,e,a,r){var u=void 0,l=new _;for(z(t,l);(u=ht(e,a))>=0;)J(l,e,u),q(l,r),e=e.subarray(u+a.length);return q(l,e),W(l),n.lua_tostring(t,-1)},dt=function(t,e,a){return n.lua_getfield(t,e,a)===n.LUA_TTABLE||(n.lua_pop(t,1),e=n.lua_absindex(t,e),n.lua_newtable(t),n.lua_pushvalue(t,-1),n.lua_setfield(t,e,a),!1)},Lt=function(t,e,a){At(t,a,n.to_luastring("too many upvalues",!0));for(var r in e){for(var u=0;u<a;u++)n.lua_pushvalue(t,-a);n.lua_pushcclosure(t,e[r],a),n.lua_setfield(t,-(a+2),n.to_luastring(r))}n.lua_pop(t,a)},At=function(t,e,a){n.lua_checkstack(t,e)||(a?b(t,n.to_luastring("stack overflow (%s)"),a):b(t,n.to_luastring("stack overflow",!0)))},Tt=function(t){n.lua_createtable(t)},bt=function(t,e){n.lua_createtable(t),Lt(t,e,0)},xt=function(t,e){var a=void 0;return n.lua_isnil(t,-1)?(n.lua_pop(t,1),-1):(e=n.lua_absindex(t,e),n.lua_rawgeti(t,e,0),a=n.lua_tointeger(t,-1),n.lua_pop(t,1),0!==a?(n.lua_rawgeti(t,e,a),n.lua_rawseti(t,e,0)):a=n.lua_rawlen(t,e)+1,n.lua_rawseti(t,e,a),a)},kt=function(t,e,a){a>=0&&(e=n.lua_absindex(t,e),n.lua_rawgeti(t,e,0),n.lua_rawseti(t,e,a),n.lua_pushinteger(t,a),n.lua_rawseti(t,e,0))},Ot=function(t,e,a,r){var u=r.message,l=n.lua_tostring(t,a).subarray(1);return n.lua_pushfstring(t,n.to_luastring("cannot %s %s: %s"),n.to_luastring(e),l,n.to_luastring(u)),n.lua_remove(t,a),n.LUA_ERRFILE},mt=void 0,Ut=[239,187,191],Et=function(t){t.n=0;var e=void 0,a=0;do{if(null===(e=mt(t))||e!==Ut[a])return e;a++,t.buff[t.n++]=e}while(a<Ut.length);return t.n=0,mt(t)},yt=function(t){var e=Et(t);if(e==="#".charCodeAt(0)){do{e=mt(t)}while(e&&e!=="\n".charCodeAt(0));return{skipped:!0,c:mt(t)}}return{skipped:!1,c:e}},St=void 0,Nt=function t(){r(this,t),this.n=NaN,this.f=null,this.buff=new Uint8Array(1024),this.pos=0,this.err=void 0},Rt=function(t,e){var a=e;if(null!==a.f&&a.n>0){var r=a.n;return a.n=0,a.f=a.f.subarray(a.pos),a.buff.subarray(0,r)}var n=a.f;return a.f=null,n};mt=function(t){return t.pos<t.f.length?t.f[t.pos++]:null},St=function(t,e,a){var r=new Nt,u=n.lua_gettop(t)+1;if(null===e)throw new Error("Can't read stdin in the browser");n.lua_pushfstring(t,n.to_luastring("@%s"),e);var l=n.to_uristring(e),o=new XMLHttpRequest;if(o.open("GET",l,!1),"undefined"==typeof window&&(o.responseType="arraybuffer"),o.send(),!(o.status>=200&&o.status<=299))return r.err=o.status,Ot(t,"open",u,{message:o.status+": "+o.statusText});"string"==typeof o.response?r.f=n.to_luastring(o.response):r.f=new Uint8Array(o.response);var s=yt(r);s.c===n.LUA_SIGNATURE.charCodeAt(0)&&e||s.skipped&&(r.buff[r.n++]="\n".charCodeAt(0)),null!==s.c&&(r.buff[r.n++]=s.c);var i=n.lua_load(t,Rt,r,n.lua_tostring(t,-1),a),c=r.err;return c?(n.lua_settop(t,u),Ot(t,"read",u,c)):(n.lua_remove(t,u),i)};var wt=function(t,e){return St(t,e,null)},It=function(t,e){return wt(t,e)||n.lua_pcall(t,0,n.LUA_MULTRET,0)},Mt=function(){for(var t=0;t<arguments.length;t++){var e=arguments[t];do{var a=/([^\n]*)\n?([\d\D]*)/.exec(e);console.error(a[1]),e=a[2]}while(""!==e)}},Ct=function(t){var e=n.LUA_VERSION_NUM,a=n.lua_version(t);a!=n.lua_version(null)?b(t,n.to_luastring("multiple Lua VMs detected")):a!==e&&b(t,n.to_luastring("version mismatch: app. needs %f, Lua core provides %f"),e,a)};t.exports.LUA_FILEHANDLE=o,t.exports.LUA_LOADED_TABLE=u,t.exports.LUA_NOREF=-2,t.exports.LUA_PRELOAD_TABLE=l,t.exports.LUA_REFNIL=-1,t.exports.luaL_Buffer=_,t.exports.luaL_addchar=Q,t.exports.luaL_addlstring=J,t.exports.luaL_addsize=$,t.exports.luaL_addstring=q,t.exports.luaL_addvalue=et,t.exports.luaL_argcheck=I,t.exports.luaL_argerror=L,t.exports.luaL_buffinit=z,t.exports.luaL_buffinitsize=Y,t.exports.luaL_callmeta=it,t.exports.luaL_checkany=M,t.exports.luaL_checkinteger=F,t.exports.luaL_checklstring=D,t.exports.luaL_checknumber=V,t.exports.luaL_checkoption=S,t.exports.luaL_checkstack=At,t.exports.luaL_checkstring=P,t.exports.luaL_checktype=C,t.exports.luaL_checkudata=y,t.exports.luaL_checkversion=Ct,t.exports.luaL_dofile=It,t.exports.luaL_dostring=ot,t.exports.luaL_error=b,t.exports.luaL_execresult=k,t.exports.luaL_fileresult=x,t.exports.luaL_getmetafield=st,t.exports.luaL_getmetatable=O,t.exports.luaL_getsubtable=dt,t.exports.luaL_gsub=gt,t.exports.luaL_len=ct,t.exports.luaL_loadbuffer=ut,t.exports.luaL_loadbufferx=nt,t.exports.luaL_loadfile=wt,t.exports.luaL_loadfilex=St,t.exports.luaL_loadstring=lt,t.exports.luaL_newlib=bt,t.exports.luaL_newlibtable=Tt,t.exports.luaL_newmetatable=m,t.exports.luaL_newstate=R,t.exports.luaL_opt=at,t.exports.luaL_optinteger=X,t.exports.luaL_optlstring=K,t.exports.luaL_optnumber=j,t.exports.luaL_optstring=B,t.exports.luaL_prepbuffer=Z,t.exports.luaL_prepbuffsize=H,t.exports.luaL_pushresult=W,t.exports.luaL_pushresultsize=tt,t.exports.luaL_ref=xt,t.exports.luaL_requiref=vt,t.exports.luaL_setfuncs=Lt,t.exports.luaL_setmetatable=U,t.exports.luaL_testudata=E,t.exports.luaL_tolstring=pt,t.exports.luaL_traceback=g,t.exports.luaL_typename=w,t.exports.luaL_unref=kt,t.exports.luaL_where=T,t.exports.lua_writestringerror=Mt},function(t,e,a){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var n=a(0),u=a(1),l=a(18),o=a(9),s=a(10),i=a(15),c=a(3),_=a(14),f=a(21),p=a(11),v=a(8),h=a(12),g=a(6),d=a(36),L=a(13),A=a(16),T=u.constant_types,b=u.thread_status,x=function(t,e){if(t.top<e)for(;t.top<e;)t.stack[t.top++]=new c.TValue(T.LUA_TNIL,null);else for(;t.top>e;)delete t.stack[--t.top]},k=function(t,e,a){for(var r=t.top;t.top<a+1;)t.stack[t.top++]=new c.TValue(T.LUA_TNIL,null);switch(e){case b.LUA_ERRMEM:c.setsvalue2s(t,a,v.luaS_newliteral(t,"not enough memory"));break;case b.LUA_ERRERR:c.setsvalue2s(t,a,v.luaS_newliteral(t,"error in error handling"));break;default:c.setobjs2s(t,a,r-1)}for(;t.top>a+1;)delete t.stack[--t.top]},O=g.LUAI_MAXSTACK+200,m=function(t,e){n(e<=g.LUAI_MAXSTACK||e==O),n(t.stack_last==t.stack.length-p.EXTRA_STACK),t.stack.length=e,t.stack_last=e-p.EXTRA_STACK},U=function(t,e){var a=t.stack.length;if(a>g.LUAI_MAXSTACK)G(t,b.LUA_ERRERR);else{var r=t.top+e+p.EXTRA_STACK,n=2*a;n>g.LUAI_MAXSTACK&&(n=g.LUAI_MAXSTACK),n<r&&(n=r),n>g.LUAI_MAXSTACK?(m(t,O),o.luaG_runerror(t,u.to_luastring("stack overflow",!0))):m(t,n)}},E=function(t,e){t.stack_last-t.top<=e&&U(t,e)},y=function(t){for(var e=t.top,a=t.ci;null!==a;a=a.previous)e<a.top&&(e=a.top);return n(e<=t.stack_last),e+1},S=function(t){var e=y(t),a=e+Math.floor(e/8)+2*p.EXTRA_STACK;a>g.LUAI_MAXSTACK&&(a=g.LUAI_MAXSTACK),t.stack.length>g.LUAI_MAXSTACK&&p.luaE_freeCI(t),e<=g.LUAI_MAXSTACK-p.EXTRA_STACK&&a<t.stack.length&&m(t,a)},N=function(t){E(t,1),t.stack[t.top++]=new c.TValue(T.LUA_TNIL,null)},R=function t(e,a,r){var l=e.stack[a];switch(l.type){case T.LUA_TCCL:case T.LUA_TLCF:var o=l.type===T.LUA_TCCL?l.value.f:l.value;E(e,u.LUA_MINSTACK);var s=p.luaE_extendCI(e);s.funcOff=a,s.nresults=r,s.func=l,s.top=e.top+u.LUA_MINSTACK,n(s.top<=e.stack_last),s.callstatus=0,e.hookmask&u.LUA_MASKCALL&&M(e,u.LUA_HOOKCALL,-1);var i=o(e);return n("number"==typeof i&&i>=0&&(0|i)===i,"invalid return value from JS function (expected integer)"),n(i<e.top-e.ci.funcOff,"not enough elements in the stack"),w(e,s,e.top-i,i),!0;case T.LUA_TLCL:var _=void 0,f=l.value.p,v=e.top-a-1,h=f.maxstacksize;if(E(e,h),f.is_vararg)_=P(e,f,v);else{for(;v<f.numparams;v++)e.stack[e.top++]=new c.TValue(T.LUA_TNIL,null);_=a+1}var g=p.luaE_extendCI(e);return g.funcOff=a,g.nresults=r,g.func=l,g.l_base=_,g.top=_+h,x(e,g.top),g.l_code=f.code,g.l_savedpc=0,g.callstatus=p.CIST_LUA,e.hookmask&u.LUA_MASKCALL&&C(e,g),!1;default:return E(e,1),D(e,a,l),t(e,a,r)}},w=function(t,e,a,r){var n=e.nresults;t.hookmask&(u.LUA_MASKRET|u.LUA_MASKLINE)&&(t.hookmask&u.LUA_MASKRET&&M(t,u.LUA_HOOKRET,-1),t.oldpc=e.previous.l_savedpc);var l=e.funcOff;return t.ci=e.previous,t.ci.next=null,I(t,a,l,r,n)},I=function(t,e,a,r,n){switch(n){case 0:break;case 1:0===r?t.stack[a].setnilvalue():c.setobjs2s(t,a,e);break;case u.LUA_MULTRET:for(var l=0;l<r;l++)c.setobjs2s(t,a+l,e+l);for(var o=t.top;o>=a+r;o--)delete t.stack[o];return t.top=a+r,!1;default:var s=void 0;if(n<=r)for(s=0;s<n;s++)c.setobjs2s(t,a+s,e+s);else{for(s=0;s<r;s++)c.setobjs2s(t,a+s,e+s);for(;s<n;s++)a+s>=t.top?t.stack[a+s]=new c.TValue(T.LUAT_NIL,null):t.stack[a+s].setnilvalue()}}for(var i=a+n,_=t.top;_>=i;_--)delete t.stack[_];return t.top=i,!0},M=function(t,e,a){var r=t.hook;if(r&&t.allowhook){var l=t.ci,o=t.top,s=l.top,i=new u.lua_Debug;i.event=e,i.currentline=a,i.i_ci=l,E(t,u.LUA_MINSTACK),l.top=t.top+u.LUA_MINSTACK,n(l.top<=t.stack_last),t.allowhook=0,l.callstatus|=p.CIST_HOOKED,r(t,i),n(!t.allowhook),t.allowhook=1,l.top=s,x(t,o),l.callstatus&=~p.CIST_HOOKED}},C=function(t,e){var a=u.LUA_HOOKCALL;e.l_savedpc++,e.previous.callstatus&p.CIST_LUA&&e.previous.l_code[e.previous.l_savedpc-1].opcode==_.OpCodesI.OP_TAILCALL&&(e.callstatus|=p.CIST_TAIL,a=u.LUA_HOOKTAILCALL),M(t,a,-1),e.l_savedpc--},P=function(t,e,a){var r=e.numparams,n=t.top-a,u=t.top,l=void 0;for(l=0;l<r&&l<a;l++)c.pushobj2s(t,t.stack[n+l]),t.stack[n+l].setnilvalue();for(;l<r;l++)t.stack[t.top++]=new c.TValue(T.LUA_TNIL,null);return u},D=function(t,e,a){var r=h.luaT_gettmbyobj(t,a,h.TMS.TM_CALL);r.ttisfunction(r)||o.luaG_typeerror(t,a,u.to_luastring("call",!0)),c.pushobj2s(t,t.stack[t.top-1]);for(var n=t.top-2;n>e;n--)c.setobjs2s(t,n,n-1);c.setobj2s(t,e,r)},K=function(t){t.nCcalls===i.LUAI_MAXCCALLS?o.luaG_runerror(t,u.to_luastring("JS stack overflow",!0)):t.nCcalls>=i.LUAI_MAXCCALLS+(i.LUAI_MAXCCALLS>>3)&&G(t,b.LUA_ERRERR)},B=function(t,e,a){++t.nCcalls>=i.LUAI_MAXCCALLS&&K(t),R(t,e,a)||L.luaV_execute(t),t.nCcalls--},G=function t(e,a){if(e.errorJmp)throw e.errorJmp.status=a,e.errorJmp;var r=e.l_G;if(e.status=a,!r.mainthread.errorJmp){var n=r.panic;throw n&&(k(e,a,e.top),e.ci.top<e.top&&(e.ci.top=e.top),n(e)),new Error("Aborted "+a)}r.mainthread.stack[r.mainthread.top++]=e.stack[e.top-1],t(r.mainthread,a)},V=function(t,e,a){var r=t.nCcalls,n={status:b.LUA_OK,previous:t.errorJmp};t.errorJmp=n;try{e(t,a)}catch(e){if(n.status===b.LUA_OK){var u=t.l_G.atnativeerror;if(u)try{if(n.status=b.LUA_OK,l.lua_pushcfunction(t,u),l.lua_pushlightuserdata(t,e),$(t,t.top-2,1),0!==t.errfunc){var o=t.errfunc;c.pushobj2s(t,t.stack[t.top-1]),c.setobjs2s(t,t.top-2,o),$(t,t.top-2,1)}n.status=b.LUA_ERRRUN}catch(t){n.status===b.LUA_OK&&(n.status=-1)}else n.status=-1}}return t.errorJmp=n.previous,t.nCcalls=r,n.status},j=function(t,e){var a=t.ci;n(null!==a.c_k&&0===t.nny),n(a.callstatus&p.CIST_YPCALL||e===b.LUA_YIELD),a.callstatus&b.CIST_YPCALL&&(a.callstatus&=~b.CIST_YPCALL,t.errfunc=a.c_old_errfunc),a.nresults===u.LUA_MULTRET&&t.ci.top<t.top&&(t.ci.top=t.top);var r=a.c_k,l=r(t,e,a.c_ctx);n(l<t.top-t.ci.funcOff,"not enough elements in the stack"),w(t,a,t.top-l,l)},F=function(t,e){for(null!==e&&j(t,e);t.ci!==t.base_ci;)t.ci.callstatus&p.CIST_LUA?(L.luaV_finishOp(t),L.luaV_execute(t)):j(t,b.LUA_YIELD)},X=function(t){for(var e=t.ci;null!==e;e=e.previous)if(e.callstatus&p.CIST_YPCALL)return e;return null},H=function(t,e){var a=X(t);if(null===a)return 0;var r=a.extra;return s.luaF_close(t,r),k(t,e,r),t.ci=a,t.allowhook=a.callstatus&p.CIST_OAH,t.nny=0,S(t),t.errfunc=a.c_old_errfunc,1},z=function(t,e,a){var r=v.luaS_newliteral(t,e);if(0===a)c.pushsvalue2s(t,r),n(t.top<=t.ci.top,"stack overflow");else{for(var u=1;u<a;u++)delete t.stack[--t.top];c.setsvalue2s(t,t.top-1,r)}return b.LUA_ERRRUN},Y=function(t,e){var a=t.top-e,r=t.ci;t.status===b.LUA_OK?R(t,a-1,u.LUA_MULTRET)||L.luaV_execute(t):(n(t.status===b.LUA_YIELD),t.status=b.LUA_OK,r.funcOff=r.extra,r.func=t.stack[r.funcOff],r.callstatus&p.CIST_LUA?L.luaV_execute(t):(null!==r.c_k&&(e=r.c_k(t,b.LUA_YIELD,r.c_ctx),n(e<t.top-t.ci.funcOff,"not enough elements in the stack"),a=t.top-e),w(t,r,a,e)),F(t,null))},Z=function(t,e,a){var r=t.nny;if(t.status===b.LUA_OK){if(t.ci!==t.base_ci)return z(t,"cannot resume non-suspended coroutine",a)}else if(t.status!==b.LUA_YIELD)return z(t,"cannot resume dead coroutine",a);if(t.nCcalls=e?e.nCcalls+1:1,t.nCcalls>=i.LUAI_MAXCCALLS)return z(t,"JS stack overflow",a);t.nny=0,n((t.status===b.LUA_OK?a+1:a)<t.top-t.ci.funcOff,"not enough elements in the stack");var u=V(t,Y,a);if(-1===u)u=b.LUA_ERRRUN;else{for(;u>b.LUA_YIELD&&H(t,u);)u=V(t,F,u);u>b.LUA_YIELD?(t.status=u,k(t,u,t.top),t.ci.top=t.top):n(u===t.status)}return t.nny=r,t.nCcalls--,n(t.nCcalls===(e?e.nCcalls:0)),u},J=function(t){return 0===t.nny},q=function(t,e,a,r){var l=t.ci;return n(e<t.top-t.ci.funcOff,"not enough elements in the stack"),t.nny>0&&(t!==t.l_G.mainthread?o.luaG_runerror(t,u.to_luastring("attempt to yield across a JS-call boundary",!0)):o.luaG_runerror(t,u.to_luastring("attempt to yield from outside a coroutine",!0))),t.status=b.LUA_YIELD,l.extra=l.funcOff,l.callstatus&p.CIST_LUA?n(null===r,"hooks cannot continue after yielding"):(l.c_k=r,null!==r&&(l.c_ctx=a),l.funcOff=t.top-e-1,l.func=t.stack[l.funcOff],G(t,b.LUA_YIELD)),n(l.callstatus&p.CIST_HOOKED),0},W=function(t,e){q(t,e,0,null)},Q=function(t,e,a,r,n){var u=t.ci,l=t.allowhook,o=t.nny,i=t.errfunc;t.errfunc=n;var c=V(t,e,a);return c!==b.LUA_OK&&(s.luaF_close(t,r),k(t,c,r),t.ci=u,t.allowhook=l,t.nny=o,S(t)),t.errfunc=i,c},$=function(t,e,a){t.nny++,B(t,e,a),t.nny--},tt=function t(e,a,n){r(this,t),this.z=e,this.buff=new A.MBuffer,this.dyd=new f.Dyndata,this.mode=n,this.name=a},et=function(t,e,a){e&&-1===u.luastring_indexOf(e,a[0])&&(c.luaO_pushfstring(t,u.to_luastring("attempt to load a %s chunk (mode is '%s')"),a,e),G(t,b.LUA_ERRSYNTAX))},at=function(t,e){var a=void 0,r=e.z.zgetc();r===u.LUA_SIGNATURE.charCodeAt(0)?(et(t,e.mode,u.to_luastring("binary",!0)),a=d.luaU_undump(t,e.z,e.name)):(et(t,e.mode,u.to_luastring("text",!0)),a=f.luaY_parser(t,e.z,e.buff,e.dyd,e.name,r)),n(a.nupvalues===a.p.upvalues.length),s.luaF_initupvals(t,a)},rt=function(t,e,a,r){var n=new tt(e,a,r);t.nny++;var u=Q(t,at,n,t.top,t.errfunc);return t.nny--,u};t.exports.adjust_top=x,t.exports.luaD_call=B,t.exports.luaD_callnoyield=$,t.exports.luaD_checkstack=E,t.exports.luaD_growstack=U,t.exports.luaD_hook=M,t.exports.luaD_inctop=N,t.exports.luaD_pcall=Q,t.exports.luaD_poscall=w,t.exports.luaD_precall=R,t.exports.luaD_protectedparser=rt,t.exports.luaD_rawrunprotected=V,t.exports.luaD_reallocstack=m,t.exports.luaD_throw=G,t.exports.lua_isyieldable=J,t.exports.lua_resume=Z,t.exports.lua_yield=W,t.exports.lua_yieldk=q},function(t,e,a){"use strict";var r=function(t){return String(t)},n=function(t){return String(Number(t.toPrecision(14)))},u=function(t){return t>=-2147483648&&t<2147483648&&t},l=function(){return 1.1.toLocaleString().substring(1,2)},o=function(t){if(0===t)return[t,0];var e=new DataView(new ArrayBuffer(8));e.setFloat64(0,t);var a=e.getUint32(0)>>>20&2047;0===a&&(e.setFloat64(0,t*Math.pow(2,64)),a=(e.getUint32(0)>>>20&2047)-64);var r=a-1022;return[s(t,-r),r]},s=function(t,e){for(var a=Math.min(3,Math.ceil(Math.abs(e)/1023)),r=t,n=0;n<a;n++)r*=Math.pow(2,Math.floor((e+n)/a));return r};t.exports.LUAI_MAXSTACK=1e5,t.exports.LUA_IDSIZE=59,t.exports.LUA_INTEGER_FMT="%d",t.exports.LUA_INTEGER_FRMLEN="",t.exports.LUA_MAXINTEGER=2147483647,t.exports.LUA_MININTEGER=-2147483648,t.exports.LUA_NUMBER_FMT="%.14g",t.exports.LUA_NUMBER_FRMLEN="",t.exports.frexp=o,t.exports.ldexp=s,t.exports.lua_getlocaledecpoint=l,t.exports.lua_integer2str=r,t.exports.lua_number2str=n,t.exports.lua_numbertointeger=u},function(t,e,a){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},u=a(0),l=a(1),o=a(9),s=a(3),i=a(8),c=a(11),_=l.constant_types,f=new WeakMap,p=function(t){var e=f.get(t);return e||(e={},f.set(t,e)),e},v=function(t,e){switch(e.type){case _.LUA_TNIL:return o.luaG_runerror(t,l.to_luastring("table index is nil",!0));case _.LUA_TNUMFLT:if(isNaN(e.value))return o.luaG_runerror(t,l.to_luastring("table index is NaN",!0));case _.LUA_TNUMINT:case _.LUA_TBOOLEAN:case _.LUA_TTABLE:case _.LUA_TLCL:case _.LUA_TLCF:case _.LUA_TCCL:case _.LUA_TUSERDATA:case _.LUA_TTHREAD:return e.value;case _.LUA_TSHRSTR:case _.LUA_TLNGSTR:return i.luaS_hashlongstr(e.tsvalue());case _.LUA_TLIGHTUSERDATA:var a=e.value;switch(void 0===a?"undefined":n(a)){case"string":return"*"+a;case"number":return"#"+a;case"boolean":return a?"?true":"?false";case"function":return p(a);case"object":if(a instanceof c.lua_State&&a.l_G===t.l_G||a instanceof h||a instanceof s.Udata||a instanceof s.LClosure||a instanceof s.CClosure)return p(a);default:return a}default:throw new Error("unknown key type: "+e.type)}},h=function t(e){r(this,t),this.id=e.l_G.id_counter++,this.strong=new Map,this.dead_strong=new Map,this.dead_weak=void 0,this.f=void 0,this.l=void 0,this.metatable=null,this.flags=-1},g=function(t){t.flags=0},d=function(t,e,a,r){t.dead_strong.clear(),t.dead_weak=void 0;var n=null,u={key:a,value:r,p:n=t.l,n:void 0};t.f||(t.f=u),n&&(n.n=u),t.strong.set(e,u),t.l=u},L=function(t){return"object"===(void 0===t?"undefined":n(t))?null!==t:"function"==typeof t},A=function(t,e){var a=t.strong.get(e);if(a){a.key.setdeadvalue(),a.value=void 0;var r=a.n,n=a.p;a.p=void 0,n&&(n.n=r),r&&(r.p=n),t.f===a&&(t.f=r),t.l===a&&(t.l=n),t.strong.delete(e),L(e)?(t.dead_weak||(t.dead_weak=new WeakMap),t.dead_weak.set(e,a)):t.dead_strong.set(e,a)}},T=function(t){return new h(t)},b=function(t,e){var a=t.strong.get(e);return a?a.value:s.luaO_nilobject},x=function(t,e){return u("number"==typeof e&&(0|e)===e),b(t,e)},k=function(t,e){return u(e instanceof i.TString),b(t,i.luaS_hashlongstr(e))},O=function(t,e,a){return u(a instanceof s.TValue),a.ttisnil()||a.ttisfloat()&&isNaN(a.value)?s.luaO_nilobject:b(e,v(t,a))},m=function(t,e,a){var r=t.strong.get(e);if(r)return r.value;var n=a.value;a=a.ttisfloat()&&(0|n)===n?new s.TValue(_.LUA_TNUMINT,n):new s.TValue(a.type,n);var u=new s.TValue(_.LUA_TNIL,null);return d(t,e,a,u),u},U=function(t,e,a){u("number"==typeof e&&(0|e)===e&&a instanceof s.TValue);var r=e;if(a.ttisnil())return void A(t,r);var n=t.strong.get(r);if(n){n.value.setfrom(a)}else{var l=new s.TValue(_.LUA_TNUMINT,e),o=new s.TValue(a.type,a.value);d(t,r,l,o)}},E=function(t,e,a){u(a instanceof s.TValue);var r=v(t,a);return m(e,r,a)},y=function(t,e,a){u(a instanceof s.TValue);var r=v(t,a);return A(e,r)},S=function(t){for(var e=0,a=t.strong.size+1;a-e>1;){var r=Math.floor((e+a)/2);x(t,r).ttisnil()?a=r:e=r}return e},N=function(t,e,a){var r=t.stack[a],n=void 0;if(r.type===_.LUA_TNIL){if(!(n=e.f))return!1}else{var u=v(t,r);if(n=e.strong.get(u)){if(!(n=n.n))return!1}else{if(!(n=e.dead_weak&&e.dead_weak.get(u)||e.dead_strong.get(u)))return o.luaG_runerror(t,l.to_luastring("invalid key to 'next'"));do{if(!(n=n.n))return!1}while(n.key.ttisdeadkey())}}return s.setobj2s(t,a,n.key),s.setobj2s(t,a+1,n.value),!0};t.exports.invalidateTMcache=g,t.exports.luaH_delete=y,t.exports.luaH_get=O,t.exports.luaH_getint=x,t.exports.luaH_getn=S,t.exports.luaH_getstr=k,t.exports.luaH_set=E,t.exports.luaH_setint=U,t.exports.luaH_new=T,t.exports.luaH_next=N,t.exports.Table=h},function(t,e,a){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var n=function(){function t(t,e){for(var a=0;a<e.length;a++){var r=e[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,a,r){return a&&t(e.prototype,a),r&&t(e,r),e}}(),u=a(0),l=a(1),o=function(){function t(e,a){r(this,t),this.hash=null,this.realstring=a}return n(t,[{key:"getstr",value:function(){return this.realstring}},{key:"tsslen",value:function(){return this.realstring.length}}]),t}(),s=function(t,e){return u(t instanceof o),u(e instanceof o),t==e||l.luastring_eq(t.realstring,e.realstring)},i=function(t){u(l.is_luastring(t));for(var e=t.length,a="|",r=0;r<e;r++)a+=t[r].toString(16);return a},c=function(t){return u(t instanceof o),null===t.hash&&(t.hash=i(t.getstr())),t.hash},_=function(t,e){return u(e instanceof Uint8Array),new o(t,e)},f=function(t,e){return _(t,l.luastring_from(e))},p=function(t,e){return _(t,l.to_luastring(e))};t.exports.luaS_eqlngstr=s,t.exports.luaS_hash=i,t.exports.luaS_hashlongstr=c,t.exports.luaS_bless=_,t.exports.luaS_new=f,t.exports.luaS_newliteral=p,t.exports.TString=o},function(t,e,a){"use strict";var r=a(0),n=a(1),u=a(5),l=a(10),o=a(19),s=a(3),i=a(14),c=a(11),_=a(7),f=a(12),p=a(6),v=a(13),h=n.char,g=n.constant_types,d=n.thread_status,L=function(t){return r(t.callstatus&c.CIST_LUA),t.l_savedpc-1},A=function(t){return 0!==t.func.value.p.lineinfo.length?t.func.value.p.lineinfo[L(t)]:-1},T=function(t){if(t.status===d.LUA_YIELD){var e=t.ci,a=e.funcOff;e.func=t.stack[e.extra],e.funcOff=e.extra,e.extra=a}},b=function(t,e,a,r){null!==e&&0!==a||(a=0,e=null),t.ci.callstatus&c.CIST_LUA&&(t.oldpc=t.ci.l_savedpc),t.hook=e,t.basehookcount=r,t.hookcount=t.basehookcount,t.hookmask=a},x=function(t){return t.hook},k=function(t){return t.hookmask},O=function(t){return t.basehookcount},m=function(t,e,a){var r=void 0,n=void 0;if(e<0)return 0;for(r=t.ci;e>0&&r!==t.base_ci;r=r.previous)e--;return 0===e&&r!==t.base_ci?(n=1,a.i_ci=r):n=0,n},U=function(t,e){r(e<t.upvalues.length);var a=t.upvalues[e].name;return null===a?n.to_luastring("?",!0):a.getstr()},E=function(t,e){var a=t.func.value.p.numparams;return e>=t.l_base-t.funcOff-a?null:{pos:t.funcOff+a+e,name:n.to_luastring("(*vararg)",!0)}},y=function(t,e,a){var r=void 0,u=null;if(e.callstatus&c.CIST_LUA){if(a<0)return E(e,-a);r=e.l_base,u=l.luaF_getlocalname(e.func.value.p,a,L(e))}else r=e.funcOff+1;if(null===u){if(!((e===t.ci?t.top:e.next.funcOff)-r>=a&&a>0))return null;u=n.to_luastring("(*temporary)",!0)}return{pos:r+(a-1),name:u}},S=function(t,e,a){var n=void 0;if(T(t),null===e)n=t.stack[t.top-1].ttisLclosure()?l.luaF_getlocalname(t.stack[t.top-1].value.p,a,0):null;else{var u=y(t,e.i_ci,a);u?(n=u.name,s.pushobj2s(t,t.stack[u.pos]),r(t.top<=t.ci.top,"stack overflow")):n=null}return T(t),n},N=function(t,e,a){var r=void 0;T(t);var n=y(t,e.i_ci,a);return n?(r=n.name,s.setobjs2s(t,n.pos,t.top-1),delete t.stack[--t.top]):r=null,T(t),r},R=function(t,e){if(null===e||e instanceof s.CClosure)t.source=n.to_luastring("=[JS]",!0),t.linedefined=-1,t.lastlinedefined=-1,t.what=n.to_luastring("J",!0);else{var a=e.p;t.source=a.source?a.source.getstr():n.to_luastring("=?",!0),t.linedefined=a.linedefined,t.lastlinedefined=a.lastlinedefined,t.what=0===t.linedefined?n.to_luastring("main",!0):n.to_luastring("Lua",!0)}t.short_src=s.luaO_chunkid(t.source,p.LUA_IDSIZE)},w=function(t,e){if(null===e||e instanceof s.CClosure)t.stack[t.top]=new s.TValue(g.LUA_TNIL,null),t.top++,r(t.top<=t.ci.top,"stack overflow");else{var a=e.p.lineinfo,n=_.luaH_new(t);t.stack[t.top]=new s.TValue(g.LUA_TTABLE,n),t.top++,r(t.top<=t.ci.top,"stack overflow");for(var u=new s.TValue(g.LUA_TBOOLEAN,!0),l=0;l<a.length;l++)_.luaH_setint(n,a[l],u)}},I=function(t,e){var a={name:null,funcname:null};return null===e?null:e.callstatus&c.CIST_FIN?(a.name=n.to_luastring("__gc",!0),a.funcname=n.to_luastring("metamethod",!0),a):!(e.callstatus&c.CIST_TAIL)&&e.previous.callstatus&c.CIST_LUA?G(t,e.previous):null},M=function(t,e,a,r,u){for(var l=1;e.length>0;e=e.subarray(1))switch(e[0]){case h.S:R(a,r);break;case h.l:a.currentline=u&&u.callstatus&c.CIST_LUA?A(u):-1;break;case h.u:a.nups=null===r?0:r.nupvalues,null===r||r instanceof s.CClosure?(a.isvararg=!0,a.nparams=0):(a.isvararg=r.p.is_vararg,a.nparams=r.p.numparams);break;case h.t:a.istailcall=u?u.callstatus&c.CIST_TAIL:0;break;case h.n:var o=I(t,u);null===o?(a.namewhat=n.to_luastring("",!0),a.name=null):(a.namewhat=o.funcname,a.name=o.name);break;case h.L:case h.f:break;default:l=0}return l},C=function(t,e,a){e=n.from_userstring(e);var u=void 0,l=void 0,o=void 0,i=void 0;return T(t),e[0]===h[">"]?(o=null,i=t.stack[t.top-1],r(t,i.ttisfunction(),"function expected"),e=e.subarray(1),t.top--):(o=a.i_ci,i=o.func,r(o.func.ttisfunction())),l=i.ttisclosure()?i.value:null,u=M(t,e,a,l,o),n.luastring_indexOf(e,h.f)>=0&&(s.pushobj2s(t,i),r(t.top<=t.ci.top,"stack overflow")),T(t),n.luastring_indexOf(e,h.L)>=0&&w(t,l),u},P=function(t,e,a){var r={name:null,funcname:null};if(i.ISK(a)){var u=t.k[i.INDEXK(a)];if(u.ttisstring())return r.name=u.svalue(),r}else{var l=B(t,e,a);if(l&&l.funcname[0]===h.c)return l}return r.name=n.to_luastring("?",!0),r},D=function(t,e){return t<e?-1:t},K=function(t,e,a){for(var r=-1,n=0,u=i.OpCodesI,l=0;l<e;l++){var o=t.code[l],s=o.A;switch(o.opcode){case u.OP_LOADNIL:var c=o.B;s<=a&&a<=s+c&&(r=D(l,n));break;case u.OP_TFORCALL:a>=s+2&&(r=D(l,n));break;case u.OP_CALL:case u.OP_TAILCALL:a>=s&&(r=D(l,n));break;case u.OP_JMP:var _=o.sBx,f=l+1+_;l<f&&f<=e&&f>n&&(n=f);break;default:i.testAMode(o.opcode)&&a===s&&(r=D(l,n))}}return r},B=function t(e,a,r){var u={name:l.luaF_getlocalname(e,r+1,a),funcname:null};if(u.name)return u.funcname=n.to_luastring("local",!0),u;var s=K(e,a,r),c=i.OpCodesI;if(-1!==s){var _=e.code[s];switch(_.opcode){case c.OP_MOVE:var f=_.B;if(f<_.A)return t(e,s,f);break;case c.OP_GETTABUP:case c.OP_GETTABLE:var p=_.C,v=_.B,h=_.opcode===c.OP_GETTABLE?l.luaF_getlocalname(e,v+1,s):U(e,v);return u.name=P(e,s,p).name,u.funcname=h&&n.luastring_eq(h,o.LUA_ENV)?n.to_luastring("global",!0):n.to_luastring("field",!0),u;case c.OP_GETUPVAL:return u.name=U(e,_.B),u.funcname=n.to_luastring("upvalue",!0),u;case c.OP_LOADK:case c.OP_LOADKX:var g=_.opcode===c.OP_LOADK?_.Bx:e.code[s+1].Ax;if(e.k[g].ttisstring())return u.name=e.k[g].svalue(),u.funcname=n.to_luastring("constant",!0),u;break;case c.OP_SELF:var d=_.C;return u.name=P(e,s,d).name,u.funcname=n.to_luastring("method",!0),u}}return null},G=function(t,e){var a={name:null,funcname:null},r=0,u=e.func.value.p,l=L(e),o=u.code[l],s=i.OpCodesI;if(e.callstatus&c.CIST_HOOKED)return a.name=n.to_luastring("?",!0),a.funcname=n.to_luastring("hook",!0),a;switch(o.opcode){case s.OP_CALL:case s.OP_TAILCALL:return B(u,l,o.A);case s.OP_TFORCALL:return a.name=n.to_luastring("for iterator",!0),a.funcname=n.to_luastring("for iterator",!0),a;case s.OP_SELF:case s.OP_GETTABUP:case s.OP_GETTABLE:r=f.TMS.TM_INDEX;break;case s.OP_SETTABUP:case s.OP_SETTABLE:r=f.TMS.TM_NEWINDEX;break;case s.OP_ADD:r=f.TMS.TM_ADD;break;case s.OP_SUB:r=f.TMS.TM_SUB;break;case s.OP_MUL:r=f.TMS.TM_MUL;break;case s.OP_MOD:r=f.TMS.TM_MOD;break;case s.OP_POW:r=f.TMS.TM_POW;break;case s.OP_DIV:r=f.TMS.TM_DIV;break;case s.OP_IDIV:r=f.TMS.TM_IDIV;break;case s.OP_BAND:r=f.TMS.TM_BAND;break;case s.OP_BOR:r=f.TMS.TM_BOR;break;case s.OP_BXOR:r=f.TMS.TM_BXOR;break;case s.OP_SHL:r=f.TMS.TM_SHL;break;case s.OP_SHR:r=f.TMS.TM_SHR;break;case s.OP_UNM:r=f.TMS.TM_UNM;break;case s.OP_BNOT:r=f.TMS.TM_BNOT;break;case s.OP_LEN:r=f.TMS.TM_LEN;break;case s.OP_CONCAT:r=f.TMS.TM_CONCAT;break;case s.OP_EQ:r=f.TMS.TM_EQ;break;case s.OP_LT:r=f.TMS.TM_LT;break;case s.OP_LE:r=f.TMS.TM_LE;break;default:return null}return a.name=t.l_G.tmname[r].getstr(),a.funcname=n.to_luastring("metamethod",!0),a},V=function(t,e,a){for(var r=e.l_base;r<e.top;r++)if(t.stack[r]===a)return r;return!1},j=function(t,e,a){for(var r=e.func.value,u=0;u<r.nupvalues;u++)if(r.upvals[u].v===a)return{name:U(r.p,u),funcname:n.to_luastring("upvalue",!0)};return null},F=function(t,e){var a=t.ci,r=null;if(a.callstatus&c.CIST_LUA){r=j(0,a,e);var u=V(t,a,e);!r&&u&&(r=B(a.func.value.p,L(a),u-a.l_base))}return r?s.luaO_pushfstring(t,n.to_luastring(" (%s '%s')",!0),r.funcname,r.name):n.to_luastring("",!0)},X=function(t,e,a){var r=f.luaT_objtypename(t,e);J(t,n.to_luastring("attempt to %s a %s value%s",!0),a,r,F(t,e))},H=function(t,e,a){(e.ttisstring()||v.cvt2str(e))&&(e=a),X(t,e,n.to_luastring("concatenate",!0))},z=function(t,e,a,r){!1===v.tonumber(e)&&(a=e),X(t,a,r)},Y=function(t,e,a){var r=f.luaT_objtypename(t,e),u=f.luaT_objtypename(t,a);n.luastring_eq(r,u)?J(t,n.to_luastring("attempt to compare two %s values",!0),r):J(t,n.to_luastring("attempt to compare %s with %s",!0),r,u)},Z=function(t,e,a,r){var u=void 0;return u=a?s.luaO_chunkid(a.getstr(),p.LUA_IDSIZE):n.to_luastring("?",!0),s.luaO_pushfstring(t,n.to_luastring("%s:%d: %s",!0),u,r,e)},J=function(t,e){for(var a=t.ci,r=arguments.length,n=Array(r>2?r-2:0),u=2;u<r;u++)n[u-2]=arguments[u];var l=s.luaO_pushvfstring(t,e,n);a.callstatus&c.CIST_LUA&&Z(t,l,a.func.value.p.source,A(a)),q(t)},q=function(t){if(0!==t.errfunc){var e=t.errfunc;s.pushobj2s(t,t.stack[t.top-1]),s.setobjs2s(t,t.top-2,e),u.luaD_callnoyield(t,t.top-2,1)}u.luaD_throw(t,d.LUA_ERRRUN)},W=function(t,e,a){!1===v.tointeger(e)&&(a=e),J(t,n.to_luastring("number%s has no integer representation",!0),F(t,a))},Q=function(t){var e=t.ci,a=t.hookmask,r=0==--t.hookcount&&a&n.LUA_MASKCOUNT;if(r)t.hookcount=t.basehookcount;else if(!(a&n.LUA_MASKLINE))return;if(e.callstatus&c.CIST_HOOKYIELD)return void(e.callstatus&=~c.CIST_HOOKYIELD);if(r&&u.luaD_hook(t,n.LUA_HOOKCOUNT,-1),a&n.LUA_MASKLINE){var l=e.func.value.p,o=e.l_savedpc-1,s=0!==l.lineinfo.length?l.lineinfo[o]:-1;(0===o||e.l_savedpc<=t.oldpc||s!==(0!==l.lineinfo.length?l.lineinfo[t.oldpc-1]:-1))&&u.luaD_hook(t,n.LUA_HOOKLINE,s)}t.oldpc=e.l_savedpc,t.status===d.LUA_YIELD&&(r&&(t.hookcount=1),e.l_savedpc--,e.callstatus|=c.CIST_HOOKYIELD,e.funcOff=t.top-1,e.func=t.stack[e.funcOff],u.luaD_throw(t,d.LUA_YIELD))};t.exports.luaG_addinfo=Z,t.exports.luaG_concaterror=H,t.exports.luaG_errormsg=q,t.exports.luaG_opinterror=z,t.exports.luaG_ordererror=Y,t.exports.luaG_runerror=J,t.exports.luaG_tointerror=W,t.exports.luaG_traceexec=Q,t.exports.luaG_typeerror=X,t.exports.lua_gethook=x,t.exports.lua_gethookcount=O,t.exports.lua_gethookmask=k,t.exports.lua_getinfo=C,t.exports.lua_getlocal=S,t.exports.lua_getstack=m,t.exports.lua_sethook=b,t.exports.lua_setlocal=N},function(t,e,a){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var n=function(){function t(t,e){for(var a=0;a<e.length;a++){var r=e[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,a,r){return a&&t(e.prototype,a),r&&t(e,r),e}}(),u=a(0),l=a(1),o=a(3),s=l.constant_types,i=function t(e){r(this,t),this.id=e.l_G.id_counter++,this.k=[],this.p=[],this.code=[],this.cache=null,this.lineinfo=[],this.upvalues=[],this.numparams=0,this.is_vararg=!1,this.maxstacksize=0,this.locvars=[],this.linedefined=0,this.lastlinedefined=0,this.source=null},c=function(){function t(e){r(this,t),this.id=e.l_G.id_counter++,this.v=void 0,this.vOff=void 0,this.refcount=0,this.open_next=null}return n(t,[{key:"isopen",value:function(){return void 0!==this.vOff}}]),t}(),_=function(t,e){return new o.LClosure(t,e)},f=function(t,e){for(var a=void 0,r=t.openupval;null!==r&&r.vOff>=e;){if(u(r.isopen()),r.vOff===e)return r;a=r,r=r.open_next}var n=new c(t);return n.open_next=r,a?a.open_next=n:t.openupval=n,n.v=t.stack[e],n.vOff=e,n},p=function(t,e){for(;null!==t.openupval&&t.openupval.vOff>=e;){var a=t.openupval;if(u(a.isopen()),t.openupval=a.open_next,0===a.refcount)a.v=void 0,a.open_next=null;else{var r=a.v;a.v=new o.TValue(r.type,r.value)}a.vOff=void 0}},v=function(t,e){for(var a=0;a<e.nupvalues;a++){var r=new c(t);r.refcount=1,r.v=new o.TValue(s.LUA_TNIL,null),e.upvals[a]=r}},h=function(t,e,a){for(var r=0;r<t.locvars.length&&t.locvars[r].startpc<=a;r++)if(a<t.locvars[r].endpc&&0===--e)return t.locvars[r].varname.getstr();return null};t.exports.MAXUPVAL=255,t.exports.Proto=i,t.exports.UpVal=c,t.exports.luaF_findupval=f,t.exports.luaF_close=p,t.exports.luaF_getlocalname=h,t.exports.luaF_initupvals=v,t.exports.luaF_newLclosure=_},function(t,e,a){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var n=a(0),u=a(1),l=a(3),o=a(5),s=a(18),i=a(7),c=a(10),_=a(12),f=u.constant_types,p=u.thread_status,v=f.LUA_NUMTAGS,h=2*u.LUA_MINSTACK,g=function t(){r(this,t),this.func=null,this.funcOff=NaN,this.top=NaN,this.previous=null,this.next=null,this.l_base=NaN,this.l_code=null,this.l_savedpc=NaN,this.c_k=null,this.c_old_errfunc=null,this.c_ctx=null,this.nresults=NaN,this.callstatus=NaN},d=function t(e){r(this,t),this.id=e.id_counter++,this.base_ci=new g,this.top=NaN,this.stack_last=NaN,this.oldpc=NaN,this.l_G=e,this.stack=null,this.ci=null,this.errorJmp=null,this.nCcalls=0,this.hook=null,this.hookmask=0,this.basehookcount=0,this.allowhook=1,this.hookcount=this.basehookcount,this.openupval=null,this.nny=1,this.status=p.LUA_OK,this.errfunc=0},L=function t(){r(this,t),this.id_counter=0,this.ids=new WeakMap,this.mainthread=null,this.l_registry=new l.TValue(f.LUA_TNIL,null),this.panic=null,this.atnativeerror=null,this.version=null,this.tmname=new Array(_.TMS.TM_N),this.mt=new Array(v)},A=function(t){var e=new g;return t.ci.next=e,e.previous=t.ci,e.next=null,t.ci=e,e},T=function(t){t.ci.next=null},b=function(t,e){t.stack=new Array(h),t.top=0,t.stack_last=h-5;var a=t.base_ci;a.next=a.previous=null,a.callstatus=0,a.funcOff=t.top,a.func=t.stack[t.top],t.stack[t.top++]=new l.TValue(f.LUA_TNIL,null),a.top=t.top+u.LUA_MINSTACK,t.ci=a},x=function(t){t.ci=t.base_ci,T(t),t.stack=null},k=function(t,e){var a=i.luaH_new(t);e.l_registry.sethvalue(a),i.luaH_setint(a,u.LUA_RIDX_MAINTHREAD,new l.TValue(f.LUA_TTHREAD,t)),i.luaH_setint(a,u.LUA_RIDX_GLOBALS,new l.TValue(f.LUA_TTABLE,i.luaH_new(t)))},O=function(t){var e=t.l_G;b(t),k(t,e),_.luaT_init(t),e.version=s.lua_version(null)},m=function(t){var e=t.l_G,a=new d(e);return t.stack[t.top]=new l.TValue(f.LUA_TTHREAD,a),t.top++,n(t.top<=t.ci.top,"stack overflow"),a.hookmask=t.hookmask,a.basehookcount=t.basehookcount,a.hook=t.hook,a.hookcount=a.basehookcount,b(a),a},U=function(t,e){c.luaF_close(e,e.stack),x(e)},E=function(){var t=new L,e=new d(t);return t.mainthread=e,o.luaD_rawrunprotected(e,O,null)!==p.LUA_OK&&(e=null),e},y=function(t){c.luaF_close(t,t.stack),x(t)},S=function(t){t=t.l_G.mainthread,y(t)};t.exports.lua_State=d,t.exports.CallInfo=g,t.exports.CIST_OAH=1,t.exports.CIST_LUA=2,t.exports.CIST_HOOKED=4,t.exports.CIST_FRESH=8,t.exports.CIST_YPCALL=16,t.exports.CIST_TAIL=32,t.exports.CIST_HOOKYIELD=64,t.exports.CIST_LEQ=128,t.exports.CIST_FIN=256,t.exports.EXTRA_STACK=5,t.exports.lua_close=S,t.exports.lua_newstate=E,t.exports.lua_newthread=m,t.exports.luaE_extendCI=A,t.exports.luaE_freeCI=T,t.exports.luaE_freethread=U},function(t,e,a){"use strict";var r=a(0),n=a(1),u=a(3),l=a(5),o=a(11),s=a(8),i=a(7),c=a(9),_=a(13),f=n.constant_types,p=["no value","nil","boolean","userdata","number","string","table","function","userdata","thread","proto"].map(function(t){return n.to_luastring(t)}),v=function(t){return p[t+1]},h={TM_INDEX:0,TM_NEWINDEX:1,TM_GC:2,TM_MODE:3,TM_LEN:4,TM_EQ:5,TM_ADD:6,TM_SUB:7,TM_MUL:8,TM_MOD:9,TM_POW:10,TM_DIV:11,TM_IDIV:12,TM_BAND:13,TM_BOR:14,TM_BXOR:15,TM_SHL:16,TM_SHR:17,TM_UNM:18,TM_BNOT:19,TM_LT:20,TM_LE:21,TM_CONCAT:22,TM_CALL:23,TM_N:24},g=function(t){t.l_G.tmname[h.TM_INDEX]=new s.luaS_new(t,n.to_luastring("__index",!0)),t.l_G.tmname[h.TM_NEWINDEX]=new s.luaS_new(t,n.to_luastring("__newindex",!0)),t.l_G.tmname[h.TM_GC]=new s.luaS_new(t,n.to_luastring("__gc",!0)),t.l_G.tmname[h.TM_MODE]=new s.luaS_new(t,n.to_luastring("__mode",!0)),t.l_G.tmname[h.TM_LEN]=new s.luaS_new(t,n.to_luastring("__len",!0)),t.l_G.tmname[h.TM_EQ]=new s.luaS_new(t,n.to_luastring("__eq",!0)),t.l_G.tmname[h.TM_ADD]=new s.luaS_new(t,n.to_luastring("__add",!0)),t.l_G.tmname[h.TM_SUB]=new s.luaS_new(t,n.to_luastring("__sub",!0)),t.l_G.tmname[h.TM_MUL]=new s.luaS_new(t,n.to_luastring("__mul",!0)),t.l_G.tmname[h.TM_MOD]=new s.luaS_new(t,n.to_luastring("__mod",!0)),t.l_G.tmname[h.TM_POW]=new s.luaS_new(t,n.to_luastring("__pow",!0)),t.l_G.tmname[h.TM_DIV]=new s.luaS_new(t,n.to_luastring("__div",!0)),t.l_G.tmname[h.TM_IDIV]=new s.luaS_new(t,n.to_luastring("__idiv",!0)),t.l_G.tmname[h.TM_BAND]=new s.luaS_new(t,n.to_luastring("__band",!0)),t.l_G.tmname[h.TM_BOR]=new s.luaS_new(t,n.to_luastring("__bor",!0)),t.l_G.tmname[h.TM_BXOR]=new s.luaS_new(t,n.to_luastring("__bxor",!0)),t.l_G.tmname[h.TM_SHL]=new s.luaS_new(t,n.to_luastring("__shl",!0)),t.l_G.tmname[h.TM_SHR]=new s.luaS_new(t,n.to_luastring("__shr",!0)),t.l_G.tmname[h.TM_UNM]=new s.luaS_new(t,n.to_luastring("__unm",!0)),t.l_G.tmname[h.TM_BNOT]=new s.luaS_new(t,n.to_luastring("__bnot",!0)),t.l_G.tmname[h.TM_LT]=new s.luaS_new(t,n.to_luastring("__lt",!0)),t.l_G.tmname[h.TM_LE]=new s.luaS_new(t,n.to_luastring("__le",!0)),t.l_G.tmname[h.TM_CONCAT]=new s.luaS_new(t,n.to_luastring("__concat",!0)),t.l_G.tmname[h.TM_CALL]=new s.luaS_new(t,n.to_luastring("__call",!0))},d=n.to_luastring("__name",!0),L=function(t,e){var a=void 0;if(e.ttistable()&&null!==(a=e.value.metatable)||e.ttisfulluserdata()&&null!==(a=e.value.metatable)){var r=i.luaH_getstr(a,s.luaS_bless(t,d));if(r.ttisstring())return r.svalue()}return v(e.ttnov())},A=function(t,e,a,r,n,s){var i=t.top;if(u.pushobj2s(t,e),u.pushobj2s(t,a),u.pushobj2s(t,r),s||u.pushobj2s(t,n),t.ci.callstatus&o.CIST_LUA?l.luaD_call(t,i,s):l.luaD_callnoyield(t,i,s),s){var c=t.stack[t.top-1];delete t.stack[--t.top],n.setfrom(c)}},T=function(t,e,a,r,n){var u=m(t,e,n);return u.ttisnil()&&(u=m(t,a,n)),!u.ttisnil()&&(A(t,u,e,a,r,1),!0)},b=function(t,e,a,r,u){if(!T(t,e,a,r,u))switch(u){case h.TM_CONCAT:return c.luaG_concaterror(t,e,a);case h.TM_BAND:case h.TM_BOR:case h.TM_BXOR:case h.TM_SHL:case h.TM_SHR:case h.TM_BNOT:var l=_.tonumber(e),o=_.tonumber(a);return!1!==l&&!1!==o?c.luaG_tointerror(t,e,a):c.luaG_opinterror(t,e,a,n.to_luastring("perform bitwise operation on",!0));default:return c.luaG_opinterror(t,e,a,n.to_luastring("perform arithmetic on",!0))}},x=function(t,e,a,r){var n=new u.TValue;return T(t,e,a,n,r)?!n.l_isfalse():null},k=function(t,e,a){return null===e?null:e.flags&1<<a?null:O(e,a,t.l_G.tmname[a])},O=function(t,e,a){var n=i.luaH_getstr(t,a);return r(e<=h.TM_EQ),n.ttisnil()?(t.flags|=1<<e,null):n},m=function(t,e,a){var r=void 0;switch(e.ttnov()){case f.LUA_TTABLE:case f.LUA_TUSERDATA:r=e.value.metatable;break;default:r=t.l_G.mt[e.ttnov()]}return r?i.luaH_getstr(r,t.l_G.tmname[a]):u.luaO_nilobject};t.exports.fasttm=k,t.exports.TMS=h,t.exports.luaT_callTM=A,t.exports.luaT_callbinTM=T,t.exports.luaT_trybinTM=b,t.exports.luaT_callorderTM=x,t.exports.luaT_gettm=O,t.exports.luaT_gettmbyobj=m,t.exports.luaT_init=g,t.exports.luaT_objtypename=L,t.exports.ttypename=v},function(t,e,a){"use strict";var r=a(0),n=a(1),u=a(14),l=a(6),o=a(3),s=a(10),i=a(11),c=a(8),_=a(15),f=a(5),p=a(12),v=a(7),h=a(9),g=n.constant_types,d=n.LUA_MULTRET,L=function(t){var e=t.ci,a=u.OpCodesI,n=e.l_base,l=e.l_code[e.l_savedpc-1],s=l.opcode;switch(s){case a.OP_ADD:case a.OP_SUB:case a.OP_MUL:case a.OP_DIV:case a.OP_IDIV:case a.OP_BAND:case a.OP_BOR:case a.OP_BXOR:case a.OP_SHL:case a.OP_SHR:case a.OP_MOD:case a.OP_POW:case a.OP_UNM:case a.OP_BNOT:case a.OP_LEN:case a.OP_GETTABUP:case a.OP_GETTABLE:case a.OP_SELF:o.setobjs2s(t,n+l.A,t.top-1),delete t.stack[--t.top];break;case a.OP_LE:case a.OP_LT:case a.OP_EQ:var c=!t.stack[t.top-1].l_isfalse();delete t.stack[--t.top],e.callstatus&i.CIST_LEQ&&(r(s===a.OP_LE),e.callstatus^=i.CIST_LEQ,c=!c),r(e.l_code[e.l_savedpc].opcode===a.OP_JMP),c!==!!l.A&&e.l_savedpc++;break;case a.OP_CONCAT:var _=t.top-1,p=l.B,v=_-1-(n+p);o.setobjs2s(t,_-2,_),v>1&&(t.top=_-1,J(t,v)),o.setobjs2s(t,e.l_base+l.A,t.top-1),f.adjust_top(t,e.top);break;case a.OP_TFORCALL:r(e.l_code[e.l_savedpc].opcode===a.OP_TFORLOOP),f.adjust_top(t,e.top);break;case a.OP_CALL:l.C-1>=0&&f.adjust_top(t,e.top)}},A=function(t,e,a){return e+a.A},T=function(t,e,a){return e+a.B},b=function(t,e,a,r){return u.ISK(r.B)?a[u.INDEXK(r.B)]:t.stack[e+r.B]},x=function(t,e,a,r){return u.ISK(r.C)?a[u.INDEXK(r.C)]:t.stack[e+r.C]},k=function(t){var e=u.OpCodesI,a=t.ci;a.callstatus|=i.CIST_FRESH;t:for(;;){r(a===t.ci);var l=a.func.value,c=l.p.k,g=a.l_base,L=a.l_code[a.l_savedpc++];t.hookmask&(n.LUA_MASKLINE|n.LUA_MASKCOUNT)&&h.luaG_traceexec(t);var k=A(0,g,L),S=L.opcode;switch(S){case e.OP_MOVE:o.setobjs2s(t,k,T(0,g,L));break;case e.OP_LOADK:var R=c[L.Bx];o.setobj2s(t,k,R);break;case e.OP_LOADKX:r(a.l_code[a.l_savedpc].opcode===e.OP_EXTRAARG);var M=c[a.l_code[a.l_savedpc++].Ax];o.setobj2s(t,k,M);break;case e.OP_LOADBOOL:t.stack[k].setbvalue(0!==L.B),0!==L.C&&a.l_savedpc++;break;case e.OP_LOADNIL:for(var C=0;C<=L.B;C++)t.stack[k+C].setnilvalue();break;case e.OP_GETUPVAL:var P=L.B;o.setobj2s(t,k,l.upvals[P].v);break;case e.OP_GETTABUP:var X=l.upvals[L.B].v,H=x(t,g,c,L);q(t,X,H,k);break;case e.OP_GETTABLE:var z=t.stack[T(0,g,L)],Y=x(t,g,c,L);q(t,z,Y,k);break;case e.OP_SETTABUP:var Z=l.upvals[L.A].v,Q=b(t,g,c,L),$=x(t,g,c,L);W(t,Z,Q,$);break;case e.OP_SETUPVAL:var tt=l.upvals[L.B];tt.v.setfrom(t.stack[k]);break;case e.OP_SETTABLE:var et=t.stack[k],at=b(t,g,c,L),rt=x(t,g,c,L);W(t,et,at,rt);break;case e.OP_NEWTABLE:t.stack[k].sethvalue(v.luaH_new(t));break;case e.OP_SELF:var nt=T(0,g,L),ut=x(t,g,c,L);o.setobjs2s(t,k+1,nt),q(t,t.stack[nt],ut,k);break;case e.OP_ADD:var lt=b(t,g,c,L),ot=x(t,g,c,L),st=void 0,it=void 0;lt.ttisinteger()&&ot.ttisinteger()?t.stack[k].setivalue(lt.value+ot.value|0):!1!==(st=I(lt))&&!1!==(it=I(ot))?t.stack[k].setfltvalue(st+it):p.luaT_trybinTM(t,lt,ot,t.stack[k],p.TMS.TM_ADD);break;case e.OP_SUB:var ct=b(t,g,c,L),_t=x(t,g,c,L),ft=void 0,pt=void 0;ct.ttisinteger()&&_t.ttisinteger()?t.stack[k].setivalue(ct.value-_t.value|0):!1!==(ft=I(ct))&&!1!==(pt=I(_t))?t.stack[k].setfltvalue(ft-pt):p.luaT_trybinTM(t,ct,_t,t.stack[k],p.TMS.TM_SUB);break;case e.OP_MUL:var vt=b(t,g,c,L),ht=x(t,g,c,L),gt=void 0,dt=void 0;vt.ttisinteger()&&ht.ttisinteger()?t.stack[k].setivalue(K(vt.value,ht.value)):!1!==(gt=I(vt))&&!1!==(dt=I(ht))?t.stack[k].setfltvalue(gt*dt):p.luaT_trybinTM(t,vt,ht,t.stack[k],p.TMS.TM_MUL);break;case e.OP_MOD:var Lt=b(t,g,c,L),At=x(t,g,c,L),Tt=void 0,bt=void 0;Lt.ttisinteger()&&At.ttisinteger()?t.stack[k].setivalue(G(t,Lt.value,At.value)):!1!==(Tt=I(Lt))&&!1!==(bt=I(At))?t.stack[k].setfltvalue(_.luai_nummod(t,Tt,bt)):p.luaT_trybinTM(t,Lt,At,t.stack[k],p.TMS.TM_MOD);break;case e.OP_POW:var xt=b(t,g,c,L),kt=x(t,g,c,L),Ot=void 0,mt=void 0;!1!==(Ot=I(xt))&&!1!==(mt=I(kt))?t.stack[k].setfltvalue(Math.pow(Ot,mt)):p.luaT_trybinTM(t,xt,kt,t.stack[k],p.TMS.TM_POW);break;case e.OP_DIV:var Ut=b(t,g,c,L),Et=x(t,g,c,L),yt=void 0,St=void 0;!1!==(yt=I(Ut))&&!1!==(St=I(Et))?t.stack[k].setfltvalue(yt/St):p.luaT_trybinTM(t,Ut,Et,t.stack[k],p.TMS.TM_DIV);break;case e.OP_IDIV:var Nt=b(t,g,c,L),Rt=x(t,g,c,L),wt=void 0,It=void 0;Nt.ttisinteger()&&Rt.ttisinteger()?t.stack[k].setivalue(B(t,Nt.value,Rt.value)):!1!==(wt=I(Nt))&&!1!==(It=I(Rt))?t.stack[k].setfltvalue(Math.floor(wt/It)):p.luaT_trybinTM(t,Nt,Rt,t.stack[k],p.TMS.TM_IDIV);break;case e.OP_BAND:var Mt=b(t,g,c,L),Ct=x(t,g,c,L),Pt=void 0,Dt=void 0;!1!==(Pt=w(Mt))&&!1!==(Dt=w(Ct))?t.stack[k].setivalue(Pt&Dt):p.luaT_trybinTM(t,Mt,Ct,t.stack[k],p.TMS.TM_BAND);break;case e.OP_BOR:var Kt=b(t,g,c,L),Bt=x(t,g,c,L),Gt=void 0,Vt=void 0;!1!==(Gt=w(Kt))&&!1!==(Vt=w(Bt))?t.stack[k].setivalue(Gt|Vt):p.luaT_trybinTM(t,Kt,Bt,t.stack[k],p.TMS.TM_BOR);break;case e.OP_BXOR:var jt=b(t,g,c,L),Ft=x(t,g,c,L),Xt=void 0,Ht=void 0;!1!==(Xt=w(jt))&&!1!==(Ht=w(Ft))?t.stack[k].setivalue(Xt^Ht):p.luaT_trybinTM(t,jt,Ft,t.stack[k],p.TMS.TM_BXOR);break;case e.OP_SHL:var zt=b(t,g,c,L),Yt=x(t,g,c,L),Zt=void 0,Jt=void 0;!1!==(Zt=w(zt))&&!1!==(Jt=w(Yt))?t.stack[k].setivalue(V(Zt,Jt)):p.luaT_trybinTM(t,zt,Yt,t.stack[k],p.TMS.TM_SHL);break;case e.OP_SHR:var qt=b(t,g,c,L),Wt=x(t,g,c,L),Qt=void 0,$t=void 0;!1!==(Qt=w(qt))&&!1!==($t=w(Wt))?t.stack[k].setivalue(V(Qt,-$t)):p.luaT_trybinTM(t,qt,Wt,t.stack[k],p.TMS.TM_SHR);break;case e.OP_UNM:var te=t.stack[T(0,g,L)],ee=void 0;te.ttisinteger()?t.stack[k].setivalue(0|-te.value):!1!==(ee=I(te))?t.stack[k].setfltvalue(-ee):p.luaT_trybinTM(t,te,te,t.stack[k],p.TMS.TM_UNM);break;case e.OP_BNOT:var ae=t.stack[T(0,g,L)];ae.ttisinteger()?t.stack[k].setivalue(~ae.value):p.luaT_trybinTM(t,ae,ae,t.stack[k],p.TMS.TM_BNOT);break;case e.OP_NOT:var re=t.stack[T(0,g,L)];t.stack[k].setbvalue(re.l_isfalse());break;case e.OP_LEN:D(t,t.stack[k],t.stack[T(0,g,L)]);break;case e.OP_CONCAT:var ne=L.B,ue=L.C;t.top=g+ue+1,J(t,ue-ne+1);var le=g+ne;o.setobjs2s(t,k,le),f.adjust_top(t,a.top);break;case e.OP_JMP:O(t,a,L,0);break;case e.OP_EQ:y(t,b(t,g,c,L),x(t,g,c,L))!==L.A?a.l_savedpc++:m(t,a);break;case e.OP_LT:U(t,b(t,g,c,L),x(t,g,c,L))!==L.A?a.l_savedpc++:m(t,a);break;case e.OP_LE:E(t,b(t,g,c,L),x(t,g,c,L))!==L.A?a.l_savedpc++:m(t,a);break;case e.OP_TEST:(L.C?t.stack[k].l_isfalse():!t.stack[k].l_isfalse())?a.l_savedpc++:m(t,a);break;case e.OP_TESTSET:var oe=T(0,g,L),se=t.stack[oe];(L.C?se.l_isfalse():!se.l_isfalse())?a.l_savedpc++:(o.setobjs2s(t,k,oe),m(t,a));break;case e.OP_CALL:var ie=L.B,ce=L.C-1;if(0!==ie&&f.adjust_top(t,k+ie),!f.luaD_precall(t,k,ce)){a=t.ci;continue t}ce>=0&&f.adjust_top(t,a.top);break;case e.OP_TAILCALL:var _e=L.B;if(0!==_e&&f.adjust_top(t,k+_e),!f.luaD_precall(t,k,d)){var fe=t.ci,pe=fe.previous,ve=fe.func,he=fe.funcOff,ge=pe.funcOff,de=fe.l_base+ve.value.p.numparams;l.p.p.length>0&&s.luaF_close(t,pe.l_base);for(var Le=0;he+Le<de;Le++)o.setobjs2s(t,ge+Le,he+Le);pe.l_base=ge+(fe.l_base-he),pe.top=ge+(t.top-he),f.adjust_top(t,pe.top),pe.l_code=fe.l_code,pe.l_savedpc=fe.l_savedpc,pe.callstatus|=i.CIST_TAIL,pe.next=null,a=t.ci=pe,r(t.top===pe.l_base+t.stack[ge].value.p.maxstacksize);continue t}break;case e.OP_RETURN:l.p.p.length>0&&s.luaF_close(t,g);var Ae=f.luaD_poscall(t,a,k,0!==L.B?L.B-1:t.top-k);if(a.callstatus&i.CIST_FRESH)return;a=t.ci,Ae&&f.adjust_top(t,a.top),r(a.callstatus&i.CIST_LUA),r(a.l_code[a.l_savedpc-1].opcode===e.OP_CALL);continue t;case e.OP_FORLOOP:if(t.stack[k].ttisinteger()){var Te=t.stack[k+2].value,be=t.stack[k].value+Te|0,xe=t.stack[k+1].value;(0<Te?be<=xe:xe<=be)&&(a.l_savedpc+=L.sBx,t.stack[k].chgivalue(be),t.stack[k+3].setivalue(be))}else{var ke=t.stack[k+2].value,Oe=t.stack[k].value+ke,me=t.stack[k+1].value;(0<ke?Oe<=me:me<=Oe)&&(a.l_savedpc+=L.sBx,t.stack[k].chgfltvalue(Oe),t.stack[k+3].setfltvalue(Oe))}break;case e.OP_FORPREP:var Ue=t.stack[k],Ee=t.stack[k+1],ye=t.stack[k+2],Se=void 0;if(Ue.ttisinteger()&&ye.ttisinteger()&&(Se=N(Ee,ye.value))){var Ne=Se.stopnow?0:Ue.value;Ee.value=Se.ilimit,Ue.value=Ne-ye.value|0}else{var Re=void 0,we=void 0,Ie=void 0;!1===(Re=I(Ee))&&h.luaG_runerror(t,n.to_luastring("'for' limit must be a number",!0)),t.stack[k+1].setfltvalue(Re),!1===(we=I(ye))&&h.luaG_runerror(t,n.to_luastring("'for' step must be a number",!0)),t.stack[k+2].setfltvalue(we),!1===(Ie=I(Ue))&&h.luaG_runerror(t,n.to_luastring("'for' initial value must be a number",!0)),t.stack[k].setfltvalue(Ie-we)}a.l_savedpc+=L.sBx;break;case e.OP_TFORCALL:var Me=k+3;o.setobjs2s(t,Me+2,k+2),o.setobjs2s(t,Me+1,k+1),o.setobjs2s(t,Me,k),f.adjust_top(t,Me+3),f.luaD_call(t,Me,L.C),f.adjust_top(t,a.top),L=a.l_code[a.l_savedpc++],k=A(0,g,L),r(L.opcode===e.OP_TFORLOOP);case e.OP_TFORLOOP:t.stack[k+1].ttisnil()||(o.setobjs2s(t,k,k+1),a.l_savedpc+=L.sBx);break;case e.OP_SETLIST:var Ce=L.B,Pe=L.C;0===Ce&&(Ce=t.top-k-1),0===Pe&&(r(a.l_code[a.l_savedpc].opcode===e.OP_EXTRAARG),Pe=a.l_code[a.l_savedpc++].Ax);for(var De=t.stack[k].value,Ke=(Pe-1)*u.LFIELDS_PER_FLUSH+Ce;Ce>0;Ce--)v.luaH_setint(De,Ke--,t.stack[k+Ce]);f.adjust_top(t,a.top);break;case e.OP_CLOSURE:var Be=l.p.p[L.Bx],Ge=j(Be,l.upvals,t.stack,g);null===Ge?F(t,Be,l.upvals,g,k):t.stack[k].setclLvalue(Ge);break;case e.OP_VARARG:var Ve=L.B-1,je=g-a.funcOff-l.p.numparams-1,Fe=void 0;for(je<0&&(je=0),Ve<0&&(Ve=je,f.luaD_checkstack(t,je),f.adjust_top(t,k+je)),Fe=0;Fe<Ve&&Fe<je;Fe++)o.setobjs2s(t,k+Fe,g-je+Fe);for(;Fe<Ve;Fe++)t.stack[k+Fe].setnilvalue();break;case e.OP_EXTRAARG:throw Error("invalid opcode")}}},O=function(t,e,a,r){var n=a.A;0!==n&&s.luaF_close(t,e.l_base+n-1),e.l_savedpc+=a.sBx+r},m=function(t,e){O(t,e,e.l_code[e.l_savedpc],1)},U=function(t,e,a){if(e.ttisnumber()&&a.ttisnumber())return M(e,a)?1:0;if(e.ttisstring()&&a.ttisstring())return P(e.tsvalue(),a.tsvalue())<0?1:0;var r=p.luaT_callorderTM(t,e,a,p.TMS.TM_LT);return null===r&&h.luaG_ordererror(t,e,a),r?1:0},E=function(t,e,a){var r=void 0;return e.ttisnumber()&&a.ttisnumber()?C(e,a)?1:0:e.ttisstring()&&a.ttisstring()?P(e.tsvalue(),a.tsvalue())<=0?1:0:null!==(r=p.luaT_callorderTM(t,e,a,p.TMS.TM_LE))?r?1:0:(t.ci.callstatus|=i.CIST_LEQ,r=p.luaT_callorderTM(t,a,e,p.TMS.TM_LT),t.ci.callstatus^=i.CIST_LEQ,null===r&&h.luaG_ordererror(t,e,a),r?0:1)},y=function(t,e,a){if(e.ttype()!==a.ttype())return e.ttnov()!==a.ttnov()||e.ttnov()!==g.LUA_TNUMBER?0:e.value===a.value?1:0;var r=void 0;switch(e.ttype()){case g.LUA_TNIL:return 1;case g.LUA_TBOOLEAN:return e.value==a.value?1:0;case g.LUA_TLIGHTUSERDATA:case g.LUA_TNUMINT:case g.LUA_TNUMFLT:case g.LUA_TLCF:return e.value===a.value?1:0;case g.LUA_TSHRSTR:case g.LUA_TLNGSTR:return c.luaS_eqlngstr(e.tsvalue(),a.tsvalue())?1:0;case g.LUA_TUSERDATA:case g.LUA_TTABLE:if(e.value===a.value)return 1;if(null===t)return 0;r=p.fasttm(t,e.value.metatable,p.TMS.TM_EQ),null===r&&(r=p.fasttm(t,a.value.metatable,p.TMS.TM_EQ));break;default:return e.value===a.value?1:0}if(null===r)return 0;var n=new o.TValue;return p.luaT_callTM(t,r,e,a,n,1),n.l_isfalse()?0:1},S=function(t,e){return y(null,t,e)},N=function(t,e){var a=!1,r=R(t,e<0?2:1);if(!1===r){var n=I(t);if(!1===n)return!1;0<n?(r=l.LUA_MAXINTEGER,e<0&&(a=!0)):(r=l.LUA_MININTEGER,e>=0&&(a=!0))}return{stopnow:a,ilimit:r}},R=function t(e,a){if(e.ttisfloat()){var r=e.value,n=Math.floor(r);if(r!==n){if(0===a)return!1;a>1&&(n+=1)}return l.lua_numbertointeger(n)}if(e.ttisinteger())return e.value;if(H(e)){var u=new o.TValue;if(o.luaO_str2num(e.svalue(),u)===e.vslen()+1)return t(u,a)}return!1},w=function(t){return t.ttisinteger()?t.value:R(t,0)},I=function(t){if(t.ttnov()===g.LUA_TNUMBER)return t.value;if(H(t)){var e=new o.TValue;if(o.luaO_str2num(t.svalue(),e)===t.vslen()+1)return e.value}return!1},M=function(t,e){return t.value<e.value},C=function(t,e){return t.value<=e.value},P=function(t,e){var a=c.luaS_hashlongstr(t),r=c.luaS_hashlongstr(e);return a===r?0:a<r?-1:1},D=function(t,e,a){var r=void 0;switch(a.ttype()){case g.LUA_TTABLE:var u=a.value;if(null!==(r=p.fasttm(t,u.metatable,p.TMS.TM_LEN)))break;return void e.setivalue(v.luaH_getn(u));case g.LUA_TSHRSTR:case g.LUA_TLNGSTR:return void e.setivalue(a.vslen());default:r=p.luaT_gettmbyobj(t,a,p.TMS.TM_LEN),r.ttisnil()&&h.luaG_typeerror(t,a,n.to_luastring("get length of",!0))}p.luaT_callTM(t,r,a,a,e,1)},K=Math.imul||function(t,e){var a=t>>>16&65535,r=65535&t,n=e>>>16&65535,u=65535&e;return r*u+(a*u+r*n<<16>>>0)|0},B=function(t,e,a){return 0===a&&h.luaG_runerror(t,n.to_luastring("attempt to divide by zero")),0|Math.floor(e/a)},G=function(t,e,a){return 0===a&&h.luaG_runerror(t,n.to_luastring("attempt to perform 'n%%0'")),e-Math.floor(e/a)*a|0},V=function(t,e){return e<0?e<=-32?0:t>>>-e:e>=32?0:t<<e},j=function(t,e,a,r){var n=t.cache;if(null!==n)for(var u=t.upvalues,l=u.length,o=0;o<l;o++){var s=u[o].instack?a[r+u[o].idx]:e[u[o].idx].v;if(n.upvals[o].v!==s)return null}return n},F=function(t,e,a,r,n){var u=e.upvalues.length,l=e.upvalues,i=new o.LClosure(t,u);i.p=e,t.stack[n].setclLvalue(i);for(var c=0;c<u;c++)l[c].instack?i.upvals[c]=s.luaF_findupval(t,r+l[c].idx):i.upvals[c]=a[l[c].idx],i.upvals[c].refcount++;e.cache=i},X=function(t){return t.ttisnumber()},H=function(t){return t.ttisstring()},z=function(t,e){var a=t.stack[e];return!!a.ttisstring()||!!X(a)&&(o.luaO_tostring(t,a),!0)},Y=function(t){return t.ttisstring()&&0===t.vslen()},Z=function(t,e,a,r){var n=0;do{var u=t.stack[e-a],l=u.vslen(),o=u.svalue();r.set(o,n),n+=l}while(--a>0)},J=function(t,e){r(e>=2);do{var a=t.top,n=2;if((t.stack[a-2].ttisstring()||X(t.stack[a-2]))&&z(t,a-1))if(Y(t.stack[a-1]))z(t,a-2);else if(Y(t.stack[a-2]))o.setobjs2s(t,a-2,a-1);else{var u=t.stack[a-1].vslen();for(n=1;n<e&&z(t,a-n-1);n++){var l=t.stack[a-n-1].vslen();u+=l}var s=new Uint8Array(u);Z(t,a,n,s);var i=c.luaS_bless(t,s);o.setsvalue2s(t,a-n,i)}else p.luaT_trybinTM(t,t.stack[a-2],t.stack[a-1],t.stack[a-2],p.TMS.TM_CONCAT);for(e-=n-1;t.top>a-(n-1);)delete t.stack[--t.top]}while(e>1)},q=function(t,e,a,r){for(var u=0;u<2e3;u++){var l=void 0;if(e.ttistable()){var s=v.luaH_get(t,e.value,a);if(!s.ttisnil())return void o.setobj2s(t,r,s);if(null===(l=p.fasttm(t,e.value.metatable,p.TMS.TM_INDEX)))return void t.stack[r].setnilvalue()}else l=p.luaT_gettmbyobj(t,e,p.TMS.TM_INDEX),l.ttisnil()&&h.luaG_typeerror(t,e,n.to_luastring("index",!0));if(l.ttisfunction())return void p.luaT_callTM(t,l,e,a,t.stack[r],1);e=l}h.luaG_runerror(t,n.to_luastring("'__index' chain too long; possible loop",!0))},W=function(t,e,a,r){for(var u=0;u<2e3;u++){var l=void 0;if(e.ttistable()){var o=e.value,s=v.luaH_set(t,o,a);if(!s.ttisnil()||null===(l=p.fasttm(t,o.metatable,p.TMS.TM_NEWINDEX)))return r.ttisnil()?v.luaH_delete(t,o,a):s.setfrom(r),void v.invalidateTMcache(o)}else(l=p.luaT_gettmbyobj(t,e,p.TMS.TM_NEWINDEX)).ttisnil()&&h.luaG_typeerror(t,e,n.to_luastring("index",!0));if(l.ttisfunction())return void p.luaT_callTM(t,l,e,a,r,0);e=l}h.luaG_runerror(t,n.to_luastring("'__newindex' chain too long; possible loop",!0))};t.exports.cvt2str=X,t.exports.cvt2num=H,t.exports.luaV_gettable=q,t.exports.luaV_concat=J,t.exports.luaV_div=B,t.exports.luaV_equalobj=y,t.exports.luaV_execute=k,t.exports.luaV_finishOp=L,t.exports.luaV_imul=K,t.exports.luaV_lessequal=E,t.exports.luaV_lessthan=U,t.exports.luaV_mod=G,t.exports.luaV_objlen=D,t.exports.luaV_rawequalobj=S,t.exports.luaV_shiftl=V,t.exports.luaV_tointeger=R,t.exports.settable=W,t.exports.tointeger=w,t.exports.tonumber=I},function(t,e,a){"use strict";var r=["MOVE","LOADK","LOADKX","LOADBOOL","LOADNIL","GETUPVAL","GETTABUP","GETTABLE","SETTABUP","SETUPVAL","SETTABLE","NEWTABLE","SELF","ADD","SUB","MUL","MOD","POW","DIV","IDIV","BAND","BOR","BXOR","SHL","SHR","UNM","BNOT","NOT","LEN","CONCAT","JMP","EQ","LT","LE","TEST","TESTSET","CALL","TAILCALL","RETURN","FORLOOP","FORPREP","TFORCALL","TFORLOOP","SETLIST","CLOSURE","VARARG","EXTRAARG"],n={OP_MOVE:0,OP_LOADK:1,OP_LOADKX:2,OP_LOADBOOL:3,OP_LOADNIL:4,OP_GETUPVAL:5,OP_GETTABUP:6,OP_GETTABLE:7,OP_SETTABUP:8,OP_SETUPVAL:9,OP_SETTABLE:10,OP_NEWTABLE:11,OP_SELF:12,OP_ADD:13,OP_SUB:14,OP_MUL:15,OP_MOD:16,OP_POW:17,OP_DIV:18,OP_IDIV:19,OP_BAND:20,OP_BOR:21,OP_BXOR:22,OP_SHL:23,OP_SHR:24,OP_UNM:25,OP_BNOT:26,OP_NOT:27,OP_LEN:28,OP_CONCAT:29,OP_JMP:30,OP_EQ:31,OP_LT:32,OP_LE:33,OP_TEST:34,OP_TESTSET:35,OP_CALL:36,OP_TAILCALL:37,OP_RETURN:38,OP_FORLOOP:39,OP_FORPREP:40,OP_TFORCALL:41,OP_TFORLOOP:42,OP_SETLIST:43,OP_CLOSURE:44,OP_VARARG:45,OP_EXTRAARG:46},u=[96,113,65,84,80,80,92,108,60,16,60,84,108,124,124,124,124,124,124,124,124,124,124,124,124,96,96,96,96,104,34,188,188,188,132,228,84,84,16,98,98,4,98,20,81,80,23],l=function(t){return 3&u[t]},o=function(t){return u[t]>>4&3},s=function(t){return u[t]>>2&3},i=function(t){return 64&u[t]},c=function(t){return 128&u[t]},_=function(t){return 256&t},f=function(t){return-257&t},p=function(t){return 256|t},v=function(t,e){return~(-1<<t)<<e},h=function(t,e){return~v(t,e)},g=function(t){return t.opcode},d=function(t,e){return t.code=t.code&h(6,0)|e<<0&v(6,0),R(t)},L=function(t,e,a,r){return t.code=t.code&h(r,a)|e<<a&v(r,a),R(t)},A=function(t){return t.A},T=function(t,e){return L(t,e,6,8)},b=function(t){return t.B},x=function(t,e){return L(t,e,23,9)},k=function(t){return t.C},O=function(t,e){return L(t,e,14,9)},m=function(t){return t.Bx},U=function(t,e){return L(t,e,14,18)},E=function(t){return t.Ax},y=function(t,e){return L(t,e,6,26)},S=function(t){return t.sBx},N=function(t,e){return U(t,e+131071)},R=function(t){if("number"==typeof t)return{code:t,opcode:t>>0&v(6,0),A:t>>6&v(8,0),B:t>>23&v(9,0),C:t>>14&v(9,0),Bx:t>>14&v(18,0),Ax:t>>6&v(26,0),sBx:(t>>14&v(18,0))-131071};var e=t.code;return t.opcode=e>>0&v(6,0),t.A=e>>6&v(8,0),t.B=e>>23&v(9,0),t.C=e>>14&v(9,0),t.Bx=e>>14&v(18,0),t.Ax=e>>6&v(26,0),t.sBx=(e>>14&v(18,0))-131071,t},w=function(t,e,a,r){return R(t<<0|e<<6|a<<23|r<<14)},I=function(t,e,a){return R(t<<0|e<<6|a<<14)},M=function(t,e){return R(t<<0|e<<6)};t.exports.BITRK=256,t.exports.CREATE_ABC=w,t.exports.CREATE_ABx=I,t.exports.CREATE_Ax=M,t.exports.GET_OPCODE=g,t.exports.GETARG_A=A,t.exports.GETARG_B=b,t.exports.GETARG_C=k,t.exports.GETARG_Bx=m,t.exports.GETARG_Ax=E,t.exports.GETARG_sBx=S,t.exports.INDEXK=f,t.exports.ISK=_,t.exports.LFIELDS_PER_FLUSH=50,t.exports.MAXARG_A=255,t.exports.MAXARG_Ax=67108863,t.exports.MAXARG_B=511,t.exports.MAXARG_Bx=262143,t.exports.MAXARG_C=511,t.exports.MAXARG_sBx=131071,t.exports.MAXINDEXRK=255,t.exports.NO_REG=255,t.exports.OpArgK=3,t.exports.OpArgN=0,t.exports.OpArgR=2,t.exports.OpArgU=1,t.exports.OpCodes=r,t.exports.OpCodesI=n,t.exports.POS_A=6,t.exports.POS_Ax=6,t.exports.POS_B=23,t.exports.POS_Bx=14,t.exports.POS_C=14,t.exports.POS_OP=0,t.exports.RKASK=p,t.exports.SETARG_A=T,t.exports.SETARG_Ax=y,t.exports.SETARG_B=x,t.exports.SETARG_Bx=U,t.exports.SETARG_C=O,t.exports.SETARG_sBx=N,t.exports.SET_OPCODE=d,t.exports.SIZE_A=8,t.exports.SIZE_Ax=26,t.exports.SIZE_B=9,t.exports.SIZE_Bx=18,t.exports.SIZE_C=9,t.exports.SIZE_OP=6,t.exports.fullins=R,t.exports.getBMode=o,t.exports.getCMode=s,t.exports.getOpMode=l,t.exports.iABC=0,t.exports.iABx=1,t.exports.iAsBx=2,t.exports.iAx=3,t.exports.testAMode=i,t.exports.testTMode=c},function(t,e,a){"use strict";t.exports.LUAI_MAXCCALLS=200;t.exports.LUA_MINBUFFER=32;var r=function(t,e,a){var r=e%a;return r*a<0&&(r+=a),r};t.exports.luai_nummod=r;t.exports.MAX_INT=2147483647;t.exports.MIN_INT=-2147483648},function(t,e,a){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var n=function(){function t(t,e){for(var a=0;a<e.length;a++){var r=e[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,a,r){return a&&t(e.prototype,a),r&&t(e,r),e}}(),u=a(0),l=function t(){r(this,t),this.buffer=null,this.n=0},o=function(t){return t.buffer.subarray(0,t.n)},s=function(t,e){t.n-=e},i=function(t){t.n=0},c=function(t,e,a){var r=new Uint8Array(a);e.buffer&&r.set(e.buffer),e.buffer=r},_=function(){function t(e,a,n){r(this,t),this.L=e,u("function"==typeof a,"ZIO requires a reader"),this.reader=a,this.data=n,this.n=0,this.buffer=null,this.off=0}return n(t,[{key:"zgetc",value:function(){return this.n-- >0?this.buffer[this.off++]:f(this)}}]),t}(),f=function(t){var e=t.reader(t.L,t.data);if(null===e)return-1;u(e instanceof Uint8Array,"Should only load binary of array of bytes");var a=e.length;return 0===a?-1:(t.buffer=e,t.off=0,t.n=a-1,t.buffer[t.off++])},p=function(t,e,a,r){for(;r;){if(0===t.n){if(-1===f(t))return r;t.n++,t.off--}for(var n=r<=t.n?r:t.n,u=0;u<n;u++)e[a++]=t.buffer[t.off++];t.n-=n,0===t.n&&(t.buffer=null),r-=n}return 0};t.exports.EOZ=-1,t.exports.luaZ_buffer=o,t.exports.luaZ_buffremove=s,t.exports.luaZ_fill=f,t.exports.luaZ_read=p,t.exports.luaZ_resetbuffer=i,t.exports.luaZ_resizebuffer=c,t.exports.MBuffer=l,t.exports.ZIO=_},function(t,e,a){"use strict";var r=a(2),n=a(4),u=a(22);t.exports.lua=r,t.exports.lauxlib=n,t.exports.lualib=u},function(t,e,a){"use strict";var r=a(0),n=a(1),u=a(9),l=a(5),o=a(37),s=a(10),i=a(3),c=a(11),_=a(8),f=a(12),p=a(6),v=a(13),h=a(7),g=a(16),d=s.MAXUPVAL,L=n.constant_types,A=n.thread_status,T=i.TValue,b=i.CClosure,x=function(t){return t!==i.luaO_nilobject},k=function(t){return null===t?n.LUA_VERSION_NUM:t.l_G.version},O=function(t,e){var a=t.l_G.panic;return t.l_G.panic=e,a},m=function(t,e){var a=t.l_G.atnativeerror;return t.l_G.atnativeerror=e,a},U=function(t,e){var a=t.ci;if(e>0){var u=a.funcOff+e;return r(e<=a.top-(a.funcOff+1),"unacceptable index"),u>=t.top?i.luaO_nilobject:t.stack[u]}return e>n.LUA_REGISTRYINDEX?(r(0!==e&&-e<=t.top,"invalid index"),t.stack[t.top+e]):e===n.LUA_REGISTRYINDEX?t.l_G.l_registry:(e=n.LUA_REGISTRYINDEX-e,r(e<=d+1,"upvalue index too large"),a.func.ttislcf()?i.luaO_nilobject:e<=a.func.value.nupvalues?a.func.value.upvalue[e-1]:i.luaO_nilobject)},E=function(t,e){var a=t.ci;if(e>0){var u=a.funcOff+e;return r(e<=a.top-(a.funcOff+1),"unacceptable index"),u>=t.top?null:u}if(e>n.LUA_REGISTRYINDEX)return r(0!==e&&-e<=t.top,"invalid index"),t.top+e;throw Error("attempt to use pseudo-index")},y=function(t,e){var a=void 0,n=t.ci;if(r(e>=0,"negative 'n'"),t.stack_last-t.top>e)a=!0;else{t.top+c.EXTRA_STACK>p.LUAI_MAXSTACK-e?a=!1:(l.luaD_growstack(t,e),a=!0)}return a&&n.top<t.top+e&&(n.top=t.top+e),a},S=function(t,e,a){if(t!==e){r(a<t.top-t.ci.funcOff,"not enough elements in the stack"),r(t.l_G===e.l_G,"moving among independent states"),r(e.ci.top-e.top>=a,"stack overflow"),t.top-=a;for(var n=0;n<a;n++)e.stack[e.top]=new i.TValue,i.setobj2s(e,e.top,t.stack[t.top+n]),delete t.stack[t.top+n],e.top++}},N=function(t,e){return e>0||e<=n.LUA_REGISTRYINDEX?e:t.top-t.ci.funcOff+e},R=function(t){return t.top-(t.ci.funcOff+1)},w=function(t,e){i.pushobj2s(t,U(t,e)),r(t.top<=t.ci.top,"stack overflow")},I=function(t,e){var a=t.ci.funcOff,n=void 0;e>=0?(r(e<=t.stack_last-(a+1),"new top too large"),n=a+1+e):(r(-(e+1)<=t.top-(a+1),"invalid new top"),n=t.top+e+1),l.adjust_top(t,n)},M=function(t,e){I(t,-e-1)},C=function(t,e,a){for(;e<a;e++,a--){var r=t.stack[e],n=new T(r.type,r.value);i.setobjs2s(t,e,a),i.setobj2s(t,a,n)}},P=function(t,e,a){var u=t.top-1,l=E(t,e),o=t.stack[l];r(x(o)&&e>n.LUA_REGISTRYINDEX,"index not in the stack"),r((a>=0?a:-a)<=u-l+1,"invalid 'n'");var s=a>=0?u-a:l-a-1;C(t,l,s),C(t,s+1,t.top-1),C(t,l,t.top-1)},D=function(t,e,a){var r=U(t,e);U(t,a).setfrom(r)},K=function(t,e){P(t,e,-1),M(t,1)},B=function(t,e){P(t,e,1)},G=function(t,e){D(t,-1,e),M(t,1)},V=function(t){t.stack[t.top]=new T(L.LUA_TNIL,null),t.top++,r(t.top<=t.ci.top,"stack overflow")},j=function(t,e){r("number"==typeof e),t.stack[t.top]=new T(L.LUA_TNUMFLT,e),t.top++,r(t.top<=t.ci.top,"stack overflow")},F=function(t,e){r("number"==typeof e&&(0|e)===e),t.stack[t.top]=new T(L.LUA_TNUMINT,e),t.top++,r(t.top<=t.ci.top,"stack overflow")},X=function(t,e,a){r("number"==typeof a);var u=void 0;return 0===a?(e=n.to_luastring("",!0),u=_.luaS_bless(t,e)):(e=n.from_userstring(e),r(e.length>=a,"invalid length to lua_pushlstring"),u=_.luaS_new(t,e.subarray(0,a))),i.pushsvalue2s(t,u),r(t.top<=t.ci.top,"stack overflow"),u.value},H=function(t,e){if(void 0===e||null===e)t.stack[t.top]=new T(L.LUA_TNIL,null),t.top++;else{var a=_.luaS_new(t,n.from_userstring(e));i.pushsvalue2s(t,a),e=a.getstr()}return r(t.top<=t.ci.top,"stack overflow"),e},z=function(t,e,a){return e=n.from_userstring(e),i.luaO_pushvfstring(t,e,a)},Y=function(t,e){e=n.from_userstring(e);for(var a=arguments.length,r=Array(a>2?a-2:0),u=2;u<a;u++)r[u-2]=arguments[u];return i.luaO_pushvfstring(t,e,r)},Z=function(t,e){if(void 0===e||null===e)t.stack[t.top]=new T(L.LUA_TNIL,null),t.top++;else{r("string"==typeof e,"lua_pushliteral expects a JS string");var a=_.luaS_newliteral(t,e);i.pushsvalue2s(t,a),e=a.getstr()}return r(t.top<=t.ci.top,"stack overflow"),e},J=function(t,e,a){if(r("function"==typeof e),r("number"==typeof a),0===a)t.stack[t.top]=new T(L.LUA_TLCF,e);else{r(a<t.top-t.ci.funcOff,"not enough elements in the stack"),r(a<=d,"upvalue index too large");for(var n=new b(t,e,a),u=0;u<a;u++)n.upvalue[u].setfrom(t.stack[t.top-a+u]);for(var l=1;l<a;l++)delete t.stack[--t.top];a>0&&--t.top,t.stack[t.top].setclCvalue(n)}t.top++,r(t.top<=t.ci.top,"stack overflow")},q=J,W=function(t,e){J(t,e,0)},Q=W,$=function(t,e){t.stack[t.top]=new T(L.LUA_TBOOLEAN,!!e),t.top++,r(t.top<=t.ci.top,"stack overflow")},tt=function(t,e){t.stack[t.top]=new T(L.LUA_TLIGHTUSERDATA,e),t.top++,r(t.top<=t.ci.top,"stack overflow")},et=function(t){return t.stack[t.top]=new T(L.LUA_TTHREAD,t),t.top++,r(t.top<=t.ci.top,"stack overflow"),t.l_G.mainthread===t},at=function(t){pt(t,n.LUA_REGISTRYINDEX,n.LUA_RIDX_GLOBALS)},rt=function(t,e,a){var u=_.luaS_new(t,n.from_userstring(a));r(1<t.top-t.ci.funcOff,"not enough elements in the stack"),i.pushsvalue2s(t,u),r(t.top<=t.ci.top,"stack overflow"),v.settable(t,e,t.stack[t.top-1],t.stack[t.top-2]),delete t.stack[--t.top],delete t.stack[--t.top]},nt=function(t,e){rt(t,h.luaH_getint(t.l_G.l_registry.value,n.LUA_RIDX_GLOBALS),e)},ut=function(t,e){r(1<t.top-t.ci.funcOff,"not enough elements in the stack");var a=void 0,n=U(t,e);switch(t.stack[t.top-1].ttisnil()?a=null:(r(t.stack[t.top-1].ttistable(),"table expected"),a=t.stack[t.top-1].value),n.ttnov()){case L.LUA_TUSERDATA:case L.LUA_TTABLE:n.value.metatable=a;break;default:t.l_G.mt[n.ttnov()]=a}return delete t.stack[--t.top],!0},lt=function(t,e){r(2<t.top-t.ci.funcOff,"not enough elements in the stack");var a=U(t,e);v.settable(t,a,t.stack[t.top-2],t.stack[t.top-1]),delete t.stack[--t.top],delete t.stack[--t.top]},ot=function(t,e,a){rt(t,U(t,e),a)},st=function(t,e,a){r("number"==typeof a&&(0|a)===a),r(1<t.top-t.ci.funcOff,"not enough elements in the stack");var n=U(t,e);t.stack[t.top]=new T(L.LUA_TNUMINT,a),t.top++,r(t.top<=t.ci.top,"stack overflow"),v.settable(t,n,t.stack[t.top-1],t.stack[t.top-2]),delete t.stack[--t.top],delete t.stack[--t.top]},it=function(t,e){r(2<t.top-t.ci.funcOff,"not enough elements in the stack");var a=U(t,e);r(a.ttistable(),"table expected");var n=t.stack[t.top-2],u=t.stack[t.top-1];if(u.ttisnil())h.luaH_delete(t,a.value,n);else{h.luaH_set(t,a.value,n).setfrom(u)}h.invalidateTMcache(a.value),delete t.stack[--t.top],delete t.stack[--t.top]},ct=function(t,e,a){r(1<t.top-t.ci.funcOff,"not enough elements in the stack");var n=U(t,e);r(n.ttistable(),"table expected"),h.luaH_setint(n.value,a,t.stack[t.top-1]),delete t.stack[--t.top]},_t=function(t,e,a){r(1<t.top-t.ci.funcOff,"not enough elements in the stack");var n=U(t,e);r(t,n.ttistable(),"table expected");var u=new T(L.LUA_TLIGHTUSERDATA,a),l=t.stack[t.top-1];if(l.ttisnil())h.luaH_delete(t,n.value,u);else{h.luaH_set(t,n.value,u).setfrom(l)}delete t.stack[--t.top]},ft=function(t,e,a){var u=_.luaS_new(t,n.from_userstring(a));return i.pushsvalue2s(t,u),r(t.top<=t.ci.top,"stack overflow"),v.luaV_gettable(t,e,t.stack[t.top-1],t.top-1),t.stack[t.top-1].ttnov()},pt=function(t,e,a){var n=U(t,e);return r(n.ttistable(),"table expected"),i.pushobj2s(t,h.luaH_getint(n.value,a)),r(t.top<=t.ci.top,"stack overflow"),t.stack[t.top-1].ttnov()},vt=function(t,e,a){var n=U(t,e);r(n.ttistable(),"table expected");var u=new T(L.LUA_TLIGHTUSERDATA,a);return i.pushobj2s(t,h.luaH_get(t,n.value,u)),r(t.top<=t.ci.top,"stack overflow"),t.stack[t.top-1].ttnov()},ht=function(t,e){var a=U(t,e);return r(a.ttistable(a),"table expected"),i.setobj2s(t,t.top-1,h.luaH_get(t,a.value,t.stack[t.top-1])),t.stack[t.top-1].ttnov()},gt=function(t,e,a){var n=new i.TValue(L.LUA_TTABLE,h.luaH_new(t));t.stack[t.top]=n,t.top++,r(t.top<=t.ci.top,"stack overflow")},dt=function(t,e){return new i.Udata(t,e)},Lt=function(t,e){var a=dt(t,e);return t.stack[t.top]=new i.TValue(L.LUA_TUSERDATA,a),t.top++,r(t.top<=t.ci.top,"stack overflow"),a.data},At=function(t,e,a){switch(e.ttype()){case L.LUA_TCCL:var r=e.value;return 1<=a&&a<=r.nupvalues?{name:n.to_luastring("",!0),val:r.upvalue[a-1]}:null;case L.LUA_TLCL:var u=e.value,l=u.p;if(!(1<=a&&a<=l.upvalues.length))return null;var o=l.upvalues[a-1].name;return{name:o?o.getstr():n.to_luastring("(*no name)",!0),val:u.upvals[a-1].v};default:return null}},Tt=function(t,e,a){var n=At(0,U(t,e),a);if(n){var u=n.name,l=n.val;return i.pushobj2s(t,l),r(t.top<=t.ci.top,"stack overflow"),u}return null},bt=function(t,e,a){var n=U(t,e);r(1<t.top-t.ci.funcOff,"not enough elements in the stack");var u=At(0,n,a);if(u){var l=u.name;return u.val.setfrom(t.stack[t.top-1]),delete t.stack[--t.top],l}return null},xt=function(t){gt(t)},kt=function(t,e,a){W(t,a),nt(t,e)},Ot=function(t,e){var a=U(t,e),n=void 0,u=!1;switch(a.ttnov()){case L.LUA_TTABLE:case L.LUA_TUSERDATA:n=a.value.metatable;break;default:n=t.l_G.mt[a.ttnov()]}return null!==n&&void 0!==n&&(t.stack[t.top]=new T(L.LUA_TTABLE,n),t.top++,r(t.top<=t.ci.top,"stack overflow"),u=!0),u},mt=function(t,e){var a=U(t,e);r(t,a.ttisfulluserdata(),"full userdata expected");var n=a.value.uservalue;return t.stack[t.top]=new T(n.type,n.value),t.top++,r(t.top<=t.ci.top,"stack overflow"),t.stack[t.top-1].ttnov()},Ut=function(t,e){var a=U(t,e);return v.luaV_gettable(t,a,t.stack[t.top-1],t.top-1),t.stack[t.top-1].ttnov()},Et=function(t,e,a){return ft(t,U(t,e),a)},yt=function(t,e,a){r("number"==typeof a&&(0|a)===a);var n=U(t,e);return t.stack[t.top]=new T(L.LUA_TNUMINT,a),t.top++,r(t.top<=t.ci.top,"stack overflow"),v.luaV_gettable(t,n,t.stack[t.top-1],t.top-1),t.stack[t.top-1].ttnov()},St=function(t,e){return ft(t,h.luaH_getint(t.l_G.l_registry.value,n.LUA_RIDX_GLOBALS),e)},Nt=function(t,e){return!U(t,e).l_isfalse()},Rt=function(t,e){var a=U(t,e);if(!a.ttisstring()){if(!v.cvt2str(a))return null;i.luaO_tostring(t,a)}return a.svalue()},wt=Rt,It=function(t,e){var a=U(t,e);if(!a.ttisstring()){if(!v.cvt2str(a))return null;i.luaO_tostring(t,a)}return a.jsstring()},Mt=It,Ct=function(t,e){var a=Rt(t,e);return new DataView(a.buffer,a.byteOffset,a.byteLength)},Pt=function(t,e){var a=U(t,e);switch(a.ttype()){case L.LUA_TSHRSTR:case L.LUA_TLNGSTR:return a.vslen();case L.LUA_TUSERDATA:return a.value.len;case L.LUA_TTABLE:return h.luaH_getn(a.value);default:return 0}},Dt=function(t,e){var a=U(t,e);return a.ttislcf()||a.ttisCclosure()?a.value:null},Kt=function(t,e){var a=Bt(t,e);return!1===a?0:a},Bt=function(t,e){return v.tointeger(U(t,e))},Gt=function(t,e){var a=Vt(t,e);return!1===a?0:a},Vt=function(t,e){return v.tonumber(U(t,e))},jt=function(t,e){var a=U(t,e);switch(a.ttnov()){case L.LUA_TUSERDATA:return a.value.data;case L.LUA_TLIGHTUSERDATA:return a.value;default:return null}},Ft=function(t,e){var a=U(t,e);return a.ttisthread()?a.value:null},Xt=function(t,e){var a=U(t,e);switch(a.ttype()){case L.LUA_TTABLE:case L.LUA_TLCL:case L.LUA_TCCL:case L.LUA_TLCF:case L.LUA_TTHREAD:case L.LUA_TUSERDATA:case L.LUA_TLIGHTUSERDATA:return a.value;default:return null}},Ht=new WeakMap,zt=function(t,e){var a=Ht.get(t);return!!a&&(null===e||e.l_G===a)},Yt=function(t,e,a){var n=function(n){r(n instanceof c.lua_State&&t===n.l_G,"must be from same global state"),n.stack[n.top]=new T(e,a),n.top++,r(n.top<=n.ci.top,"stack overflow")};return Ht.set(n,t),n},Zt=function(t,e){var a=U(t,e);return Yt(t.l_G,a.type,a.value)},Jt=function(t,e,a,u){var l=U(t,e),o=U(t,a),s=0;if(x(l)&&x(o))switch(u){case n.LUA_OPEQ:s=v.luaV_equalobj(t,l,o);break;case n.LUA_OPLT:s=v.luaV_lessthan(t,l,o);break;case n.LUA_OPLE:s=v.luaV_lessequal(t,l,o);break;default:r(!1,"invalid option")}return s},qt=function(t,e){var a=new T,n=i.luaO_str2num(e,a);return 0!==n&&(t.stack[t.top]=a,t.top++,r(t.top<=t.ci.top,"stack overflow")),n},Wt=function(t,e){l.luaD_callnoyield(t,e.funcOff,e.nresults)},Qt=function(t,e){var a=U(t,e);return x(a)?a.ttnov():L.LUA_TNONE},$t=function(t,e){return r(L.LUA_TNONE<=e&&e<L.LUA_NUMTAGS,"invalid tag"),f.ttypename(e)},te=function(t,e){var a=U(t,e);return a.ttislcf(a)||a.ttisCclosure()},ee=function(t,e){return Qt(t,e)===L.LUA_TNIL},ae=function(t,e){return Qt(t,e)===L.LUA_TBOOLEAN},re=function(t,e){return Qt(t,e)===L.LUA_TNONE},ne=function(t,e){return Qt(t,e)<=0},ue=function(t,e){return U(t,e).ttistable()},le=function(t,e){return U(t,e).ttisinteger()},oe=function(t,e){return!1!==v.tonumber(U(t,e))},se=function(t,e){var a=U(t,e);return a.ttisstring()||v.cvt2str(a)},ie=function(t,e){var a=U(t,e);return a.ttisfulluserdata(a)||a.ttislightuserdata()},ce=function(t,e){return Qt(t,e)===L.LUA_TTHREAD},_e=function(t,e){return Qt(t,e)===L.LUA_TFUNCTION},fe=function(t,e){return Qt(t,e)===L.LUA_TLIGHTUSERDATA},pe=function(t,e,a){var r=U(t,e),n=U(t,a);return x(r)&&x(n)?v.luaV_equalobj(null,r,n):0},ve=function(t,e){e!==n.LUA_OPUNM&&e!==n.LUA_OPBNOT?r(2<t.top-t.ci.funcOff,"not enough elements in the stack"):(r(1<t.top-t.ci.funcOff,"not enough elements in the stack"),i.pushobj2s(t,t.stack[t.top-1]),r(t.top<=t.ci.top,"stack overflow")),i.luaO_arith(t,e,t.stack[t.top-2],t.stack[t.top-1],t.stack[t.top-2]),delete t.stack[--t.top]},he=n.to_luastring("?"),ge=function(t,e,a,r,u){r=r?n.from_userstring(r):he,null!==u&&(u=n.from_userstring(u));var o=new g.ZIO(t,e,a),s=l.luaD_protectedparser(t,o,r,u);if(s===A.LUA_OK){var i=t.stack[t.top-1].value;if(i.nupvalues>=1){var c=h.luaH_getint(t.l_G.l_registry.value,n.LUA_RIDX_GLOBALS);i.upvals[0].v.setfrom(c)}}return s},de=function(t,e,a,n){r(1<t.top-t.ci.funcOff,"not enough elements in the stack");var u=t.stack[t.top-1];return u.ttisLclosure()?o.luaU_dump(t,u.value.p,e,a,n):1},Le=function(t){return t.status},Ae=function(t,e){r(1<t.top-t.ci.funcOff,"not enough elements in the stack");var a=U(t,e);r(t,a.ttisfulluserdata(),"full userdata expected"),a.value.uservalue.setfrom(t.stack[t.top-1]),delete t.stack[--t.top]},Te=function(t,e,a,u,o){r(null===o||!(t.ci.callstatus&c.CIST_LUA),"cannot use continuations inside hooks"),r(e+1<t.top-t.ci.funcOff,"not enough elements in the stack"),r(t.status===A.LUA_OK,"cannot do calls on non-normal thread"),r(e===n.LUA_MULTRET||t.ci.top-t.top>=e-a,"results from function overflow current stack size");var s=t.top-(e+1);null!==o&&0===t.nny?(t.ci.c_k=o,t.ci.c_ctx=u,l.luaD_call(t,s,a)):l.luaD_callnoyield(t,s,a),a===n.LUA_MULTRET&&t.ci.top<t.top&&(t.ci.top=t.top)},be=function(t,e,a){Te(t,e,a,0,null)},xe=function(t,e,a,u,o,s){r(e+1<t.top-t.ci.funcOff,"not enough elements in the stack"),r(t.status===A.LUA_OK,"cannot do calls on non-normal thread"),r(e===n.LUA_MULTRET||t.ci.top-t.top>=e-a,"results from function overflow current stack size");var i={func:null,funcOff:NaN,nresults:NaN},_=void 0,f=void 0;if(f=0===u?0:E(t,u),i.funcOff=t.top-(e+1),i.func=t.stack[i.funcOff],null===s||t.nny>0)i.nresults=a,_=l.luaD_pcall(t,Wt,i,i.funcOff,f);else{var p=t.ci;p.c_k=s,p.c_ctx=o,p.extra=i.funcOff,p.c_old_errfunc=t.errfunc,t.errfunc=f,p.callstatus&=~c.CIST_OAH|t.allowhook,p.callstatus|=c.CIST_YPCALL,l.luaD_call(t,i.funcOff,a),p.callstatus&=~c.CIST_YPCALL,t.errfunc=p.c_old_errfunc,_=A.LUA_OK}return a===n.LUA_MULTRET&&t.ci.top<t.top&&(t.ci.top=t.top),_},ke=function(t,e,a,r){return xe(t,e,a,r,0,null)},Oe=function(t){r(1<t.top-t.ci.funcOff,"not enough elements in the stack"),u.luaG_errormsg(t)},me=function(t,e){var a=U(t,e);return r(a.ttistable(),"table expected"),t.stack[t.top]=new T,h.luaH_next(t,a.value,t.top-1)?(t.top++,r(t.top<=t.ci.top,"stack overflow"),1):(delete t.stack[t.top],delete t.stack[--t.top],0)},Ue=function(t,e){r(e<t.top-t.ci.funcOff,"not enough elements in the stack"),e>=2?v.luaV_concat(t,e):0===e&&(i.pushsvalue2s(t,_.luaS_bless(t,n.to_luastring("",!0))),r(t.top<=t.ci.top,"stack overflow"))},Ee=function(t,e){var a=U(t,e),n=new T;v.luaV_objlen(t,n,a),t.stack[t.top]=n,t.top++,r(t.top<=t.ci.top,"stack overflow")},ye=function(t,e,a){var n=U(t,e);r(n.ttisLclosure(),"Lua function expected");var u=n.value;return r(1<=a&&a<=u.p.upvalues.length,"invalid upvalue index"),{closure:u,upval:u.upvals[a-1],upvalOff:a-1}},Se=function(t,e,a){var n=U(t,e);switch(n.ttype()){case L.LUA_TLCL:return ye(t,e,a).upval;case L.LUA_TCCL:var u=n.value;return r(1<=a&&a<=u.nupvalues,"invalid upvalue index"),u.upvalue[a-1];default:return r(!1,"closure expected"),null}},Ne=function(t,e,a,n,u){var l=ye(t,e,a),o=ye(t,n,u),s=l.upval,i=o.upval,c=l.closure;r(s.refcount>0),s.refcount--,c.upvals[l.upvalOff]=i,i.refcount++},Re=function(){},we=function(){return console.warn("lua_getallocf is not available"),0},Ie=function(){return console.warn("lua_setallocf is not available"),0},Me=function(){return console.warn("lua_getextraspace is not available"),0};t.exports.index2addr=U,t.exports.index2addr_=E,t.exports.lua_absindex=N,t.exports.lua_arith=ve,t.exports.lua_atpanic=O,t.exports.lua_atnativeerror=m,t.exports.lua_call=be,t.exports.lua_callk=Te,t.exports.lua_checkstack=y,t.exports.lua_compare=Jt,t.exports.lua_concat=Ue,t.exports.lua_copy=D,t.exports.lua_createtable=gt,t.exports.lua_dump=de,t.exports.lua_error=Oe,t.exports.lua_gc=Re,t.exports.lua_getallocf=we,t.exports.lua_getextraspace=Me,t.exports.lua_getfield=Et,t.exports.lua_getglobal=St,t.exports.lua_geti=yt,t.exports.lua_getmetatable=Ot,t.exports.lua_gettable=Ut,t.exports.lua_gettop=R,t.exports.lua_getupvalue=Tt,t.exports.lua_getuservalue=mt,t.exports.lua_insert=B,t.exports.lua_isboolean=ae,t.exports.lua_iscfunction=te,t.exports.lua_isfunction=_e,t.exports.lua_isinteger=le,t.exports.lua_islightuserdata=fe,t.exports.lua_isnil=ee,t.exports.lua_isnone=re,t.exports.lua_isnoneornil=ne,t.exports.lua_isnumber=oe,t.exports.lua_isproxy=zt,t.exports.lua_isstring=se,t.exports.lua_istable=ue,t.exports.lua_isthread=ce,t.exports.lua_isuserdata=ie,t.exports.lua_len=Ee,t.exports.lua_load=ge,t.exports.lua_newtable=xt,t.exports.lua_newuserdata=Lt,t.exports.lua_next=me,t.exports.lua_pcall=ke,t.exports.lua_pcallk=xe,t.exports.lua_pop=M,t.exports.lua_pushboolean=$,t.exports.lua_pushcclosure=J,t.exports.lua_pushcfunction=W,t.exports.lua_pushfstring=Y,t.exports.lua_pushglobaltable=at,t.exports.lua_pushinteger=F,t.exports.lua_pushjsclosure=q,t.exports.lua_pushjsfunction=Q,t.exports.lua_pushlightuserdata=tt,t.exports.lua_pushliteral=Z,t.exports.lua_pushlstring=X,t.exports.lua_pushnil=V,t.exports.lua_pushnumber=j,t.exports.lua_pushstring=H,t.exports.lua_pushthread=et,t.exports.lua_pushvalue=w,t.exports.lua_pushvfstring=z,t.exports.lua_rawequal=pe,t.exports.lua_rawget=ht,t.exports.lua_rawgeti=pt,t.exports.lua_rawgetp=vt,t.exports.lua_rawlen=Pt,t.exports.lua_rawset=it,t.exports.lua_rawseti=ct,t.exports.lua_rawsetp=_t,t.exports.lua_register=kt,t.exports.lua_remove=K,t.exports.lua_replace=G,t.exports.lua_rotate=P,t.exports.lua_setallocf=Ie,t.exports.lua_setfield=ot,t.exports.lua_setglobal=nt,t.exports.lua_seti=st,t.exports.lua_setmetatable=ut,t.exports.lua_settable=lt,t.exports.lua_settop=I,t.exports.lua_setupvalue=bt,t.exports.lua_setuservalue=Ae,t.exports.lua_status=Le,t.exports.lua_stringtonumber=qt,t.exports.lua_toboolean=Nt,t.exports.lua_tocfunction=Dt,t.exports.lua_todataview=Ct,t.exports.lua_tointeger=Kt,t.exports.lua_tointegerx=Bt,t.exports.lua_tojsstring=Mt,t.exports.lua_toljsstring=It,t.exports.lua_tolstring=Rt,t.exports.lua_tonumber=Gt,t.exports.lua_tonumberx=Vt,t.exports.lua_topointer=Xt,t.exports.lua_toproxy=Zt,t.exports.lua_tostring=wt,t.exports.lua_tothread=Ft,t.exports.lua_touserdata=jt,t.exports.lua_type=Qt,t.exports.lua_typename=$t,t.exports.lua_upvalueid=Se,t.exports.lua_upvaluejoin=Ne,t.exports.lua_version=k,t.exports.lua_xmove=S},function(t,e,a){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var n=a(0),u=a(1),l=a(9),o=a(5),s=a(20),i=a(3),c=a(8),_=a(7),f=a(15),p=a(16),v=u.thread_status,h=u.char,g=u.to_luastring("_ENV",!0),d={TK_AND:257,TK_BREAK:258,TK_DO:259,TK_ELSE:260,TK_ELSEIF:261,TK_END:262,TK_FALSE:263,TK_FOR:264,TK_FUNCTION:265,TK_GOTO:266,TK_IF:267,TK_IN:268,TK_LOCAL:269,TK_NIL:270,TK_NOT:271,TK_OR:272,TK_REPEAT:273,TK_RETURN:274,TK_THEN:275,TK_TRUE:276,TK_UNTIL:277,TK_WHILE:278,TK_IDIV:279,TK_CONCAT:280,TK_DOTS:281,TK_EQ:282,TK_GE:283,TK_LE:284,TK_NE:285,TK_SHL:286,TK_SHR:287,TK_DBCOLON:288,TK_EOS:289,TK_FLT:290,TK_INT:291,TK_NAME:292,TK_STRING:293},L=d,A=["and","break","do","else","elseif","end","false","for","function","goto","if","in","local","nil","not","or","repeat","return","then","true","until","while","//","..","...","==",">=","<=","~=","<<",">>","::","<eof>","<number>","<integer>","<name>","<string>"],T=function t(){r(this,t),this.r=NaN,this.i=NaN,this.ts=null},b=function t(){r(this,t),this.token=NaN,this.seminfo=new T},x=function t(){r(this,t),this.current=NaN,this.linenumber=NaN,this.lastline=NaN,this.t=new b,this.lookahead=new b,this.fs=null,this.L=null,this.z=null,this.buff=null,this.h=null,this.dyd=null,this.source=null,this.envn=null},k=function(t,e){var a=t.buff;if(a.n+1>a.buffer.length){a.buffer.length>=f.MAX_INT/2&&C(t,u.to_luastring("lexical element too long",!0),0);var r=2*a.buffer.length;p.luaZ_resizebuffer(t.L,a,r)}a.buffer[a.n++]=e<0?255+e+1:e},O=function(t,e){if(e<257)return i.luaO_pushfstring(t.L,u.to_luastring("'%c'",!0),e);var a=A[e-257];return e<L.TK_EOS?i.luaO_pushfstring(t.L,u.to_luastring("'%s'",!0),u.to_luastring(a)):u.to_luastring(a)},m=function(t){return t.current===h["\n"]||t.current===h["\r"]},U=function(t){t.current=t.z.zgetc()},E=function(t){k(t,t.current),U(t)},y=function(t,e){var a=t.L,r=c.luaS_new(a,e),l=_.luaH_set(a,t.h,new i.TValue(u.CT.LUA_TLNGSTR,r));if(l.ttisnil())l.setbvalue(!0);else{var o=t.h.strong.get(c.luaS_hashlongstr(r));n(o.value==l),r=o.key.tsvalue()}return r},S=function(t){var e=t.current;n(m(t)),U(t),m(t)&&t.current!==e&&U(t),++t.linenumber>=f.MAX_INT&&C(t,u.to_luastring("chunk has too many lines",!0),0)},N=function(t,e,a,r,n){e.t={token:0,seminfo:new T},e.L=t,e.current=n,e.lookahead={token:L.TK_EOS,seminfo:new T},e.z=a,e.fs=null,e.linenumber=1,e.lastline=1,e.source=r,e.envn=c.luaS_bless(t,g),p.luaZ_resizebuffer(t,e.buff,f.LUA_MINBUFFER)},R=function(t,e){return t.current===e.charCodeAt(0)&&(U(t),!0)},w=function(t,e){return(t.current===e[0].charCodeAt(0)||t.current===e[1].charCodeAt(0))&&(E(t),!0)},I=function(t,e){var a="Ee",r=t.current;for(n(s.lisdigit(t.current)),E(t),r===h[0]&&w(t,"xX")&&(a="Pp");;)if(w(t,a)&&w(t,"-+"),s.lisxdigit(t.current))E(t);else{if(t.current!==h["."])break;E(t)}var l=new i.TValue;return 0===i.luaO_str2num(p.luaZ_buffer(t.buff),l)&&C(t,u.to_luastring("malformed number",!0),L.TK_FLT),l.ttisinteger()?(e.i=l.value,L.TK_INT):(n(l.ttisfloat()),e.r=l.value,L.TK_FLT)},M=function(t,e){switch(e){case L.TK_NAME:case L.TK_STRING:case L.TK_FLT:case L.TK_INT:return i.luaO_pushfstring(t.L,u.to_luastring("'%s'",!0),p.luaZ_buffer(t.buff));default:return O(t,e)}},C=function(t,e,a){e=l.luaG_addinfo(t.L,e,t.source,t.linenumber),a&&i.luaO_pushfstring(t.L,u.to_luastring("%s near %s"),e,M(t,a)),o.luaD_throw(t.L,v.LUA_ERRSYNTAX)},P=function(t,e){C(t,e,t.t.token)},D=function(t){var e=0,a=t.current;for(n(a===h["["]||a===h["]"]),E(t);t.current===h["="];)E(t),e++;return t.current===a?e:-e-1},K=function(t,e,a){var r=t.linenumber;E(t),m(t)&&S(t);for(var n=!1;!n;)switch(t.current){case p.EOZ:var l=e?"string":"comment",o="unfinished long "+l+" (starting at line "+r+")";C(t,u.to_luastring(o),L.TK_EOS);break;case h["]"]:D(t)===a&&(E(t),n=!0);break;case h["\n"]:case h["\r"]:k(t,h["\n"]),S(t),e||p.luaZ_resetbuffer(t.buff);break;default:e?E(t):U(t)}e&&(e.ts=y(t,t.buff.buffer.subarray(2+a,t.buff.n-(2+a))))},B=function(t,e,a){e||(t.current!==p.EOZ&&E(t),C(t,a,L.TK_STRING))},G=function(t){return E(t),B(t,s.lisxdigit(t.current),u.to_luastring("hexadecimal digit expected",!0)),i.luaO_hexavalue(t.current)},V=function(t){var e=G(t);return e=(e<<4)+G(t),p.luaZ_buffremove(t.buff,2),e},j=function(t){var e=4;E(t),B(t,t.current===h["{"],u.to_luastring("missing '{'",!0));var a=G(t);for(E(t);s.lisxdigit(t.current);)e++,a=(a<<4)+i.luaO_hexavalue(t.current),B(t,a<=1114111,u.to_luastring("UTF-8 value too large",!0)),E(t);return B(t,t.current===h["}"],u.to_luastring("missing '}'",!0)),U(t),p.luaZ_buffremove(t.buff,e),a},F=function(t){for(var e=new Uint8Array(i.UTF8BUFFSZ),a=i.luaO_utf8esc(e,j(t));a>0;a--)k(t,e[i.UTF8BUFFSZ-a])},X=function(t){var e=0,a=void 0;for(a=0;a<3&&s.lisdigit(t.current);a++)e=10*e+t.current-h[0],E(t);return B(t,e<=255,u.to_luastring("decimal escape too large",!0)),p.luaZ_buffremove(t.buff,a),e},H=function(t,e,a){for(E(t);t.current!==e;)switch(t.current){case p.EOZ:C(t,u.to_luastring("unfinished string",!0),L.TK_EOS);break;case h["\n"]:case h["\r"]:C(t,u.to_luastring("unfinished string",!0),L.TK_STRING);break;case h["\\"]:E(t);var r=void 0,n=void 0;switch(t.current){case h.a:n=7,r="read_save";break;case h.b:n=h["\b"],r="read_save";break;case h.f:n=h["\f"],r="read_save";break;case h.n:n=h["\n"],r="read_save";break;case h.r:n=h["\r"],r="read_save";break;case h.t:n=h["\t"],r="read_save";break;case h.v:n=h["\v"],r="read_save";break;case h.x:n=V(t),r="read_save";break;case h.u:F(t),r="no_save";break;case h["\n"]:case h["\r"]:S(t),n=h["\n"],r="only_save";break;case h["\\"]:case h['"']:case h["'"]:n=t.current,r="read_save";break;case p.EOZ:r="no_save";break;case h.z:for(p.luaZ_buffremove(t.buff,1),U(t);s.lisspace(t.current);)m(t)?S(t):U(t);r="no_save";break;default:B(t,s.lisdigit(t.current),u.to_luastring("invalid escape sequence",!0)),n=X(t),r="only_save"}"read_save"===r&&U(t),"read_save"!==r&&"only_save"!==r||(p.luaZ_buffremove(t.buff,1),k(t,n));break;default:E(t)}E(t),a.ts=y(t,t.buff.buffer.subarray(1,t.buff.n-1))},z=Object.create(null);A.forEach(function(t,e){return z[c.luaS_hash(u.to_luastring(t))]=e});var Y=function(t){var e=z[c.luaS_hashlongstr(t)];return void 0!==e&&e<=22},Z=function(t,e){for(p.luaZ_resetbuffer(t.buff);;)switch(n("number"==typeof t.current),t.current){case h["\n"]:case h["\r"]:S(t);break;case h[" "]:case h["\f"]:case h["\t"]:case h["\v"]:U(t);break;case h["-"]:if(U(t),t.current!==h["-"])return h["-"];if(U(t),t.current===h["["]){var a=D(t);if(p.luaZ_resetbuffer(t.buff),a>=0){K(t,null,a),p.luaZ_resetbuffer(t.buff);break}}for(;!m(t)&&t.current!==p.EOZ;)U(t);break;case h["["]:var r=D(t);return r>=0?(K(t,e,r),L.TK_STRING):(-1!==r&&C(t,u.to_luastring("invalid long string delimiter",!0),L.TK_STRING),h["["]);case h["="]:return U(t),R(t,"=")?L.TK_EQ:h["="];case h["<"]:return U(t),R(t,"=")?L.TK_LE:R(t,"<")?L.TK_SHL:h["<"];case h[">"]:return U(t),R(t,"=")?L.TK_GE:R(t,">")?L.TK_SHR:h[">"];case h["/"]:return U(t),R(t,"/")?L.TK_IDIV:h["/"];case h["~"]:return U(t),R(t,"=")?L.TK_NE:h["~"];case h[":"]:return U(t),R(t,":")?L.TK_DBCOLON:h[":"];case h['"']:case h["'"]:return H(t,t.current,e),L.TK_STRING;case h["."]:return E(t),R(t,".")?R(t,".")?L.TK_DOTS:L.TK_CONCAT:s.lisdigit(t.current)?I(t,e):h["."];case h[0]:case h[1]:case h[2]:case h[3]:case h[4]:case h[5]:case h[6]:case h[7]:case h[8]:case h[9]:return I(t,e);case p.EOZ:return L.TK_EOS;default:if(s.lislalpha(t.current)){do{E(t)}while(s.lislalnum(t.current));var l=y(t,p.luaZ_buffer(t.buff));e.ts=l;var o=z[c.luaS_hashlongstr(l)];return void 0!==o&&o<=22?o+257:L.TK_NAME}var i=t.current;return U(t),i}},J=function(t){t.lastline=t.linenumber,t.lookahead.token!==L.TK_EOS?(t.t.token=t.lookahead.token,t.t.seminfo.i=t.lookahead.seminfo.i,t.t.seminfo.r=t.lookahead.seminfo.r,t.t.seminfo.ts=t.lookahead.seminfo.ts,t.lookahead.token=L.TK_EOS):t.t.token=Z(t,t.t.seminfo)},q=function(t){return n(t.lookahead.token===L.TK_EOS),t.lookahead.token=Z(t,t.lookahead.seminfo),t.lookahead.token};t.exports.FIRST_RESERVED=257,t.exports.LUA_ENV=g,t.exports.LexState=x,t.exports.RESERVED=d,t.exports.isreserved=Y,t.exports.luaX_lookahead=q,t.exports.luaX_newstring=y,t.exports.luaX_next=J,t.exports.luaX_setinput=N,t.exports.luaX_syntaxerror=P,t.exports.luaX_token2str=O,t.exports.luaX_tokens=A},function(t,e,a){"use strict";var r=function(t){return/^\d$/.test(String.fromCharCode(t))},n=function(t){return/^[0-9a-fA-F]$/.test(String.fromCharCode(t))},u=function(t){return/^[\x20-\x7E]$/.test(String.fromCharCode(t))},l=function(t){return/^\s$/.test(String.fromCharCode(t))},o=function(t){return/^[_a-zA-Z]$/.test(String.fromCharCode(t))},s=function(t){return/^[_a-zA-Z0-9]$/.test(String.fromCharCode(t))};t.exports.lisdigit=r,t.exports.lislalnum=s,t.exports.lislalpha=o,t.exports.lisprint=u,t.exports.lisspace=l,t.exports.lisxdigit=n},function(t,e,a){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var n=function(){function t(t,e){for(var a=0;a<e.length;a++){var r=e[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,a,r){return a&&t(e.prototype,a),r&&t(e,r),e}}(),u=a(0),l=a(1),o=a(35),s=a(5),i=a(10),c=a(19),_=a(15),f=a(3),p=a(14),v=a(8),h=a(7),g=o.BinOpr,d=p.OpCodesI,L=i.Proto,A=c.RESERVED,T=o.UnOpr,b=l.char,x=function(t){return t===m.VCALL||t===m.VVARARG},k=function(t,e){return v.luaS_eqlngstr(t,e)},O=function t(){r(this,t),this.previous=null,this.firstlabel=NaN,this.firstgoto=NaN,this.nactvar=NaN,this.upval=NaN,this.isloop=NaN},m={VVOID:0,VNIL:1,VTRUE:2,VFALSE:3,VK:4,VKFLT:5,VKINT:6,VNONRELOC:7,VLOCAL:8,VUPVAL:9,VINDEXED:10,VJMP:11,VRELOCABLE:12,VCALL:13,VVARARG:14},U=function(t){return m.VLOCAL<=t&&t<=m.VINDEXED},E=function(t){return t===m.VNONRELOC||t===m.VLOCAL},y=function(){function t(){r(this,t),this.k=NaN,this.u={ival:NaN,nval:NaN,info:NaN,ind:{idx:NaN,t:NaN,vt:NaN}},this.t=NaN,this.f=NaN}return n(t,[{key:"to",value:function(t){this.k=t.k,this.u=t.u,this.t=t.t,this.f=t.f}}]),t}(),S=function t(){r(this,t),this.f=null,this.prev=null,this.ls=null,this.bl=null,this.pc=NaN,this.lasttarget=NaN,this.jpc=NaN,this.nk=NaN,this.np=NaN,this.firstlocal=NaN,this.nlocvars=NaN,this.nactvar=NaN,this.nups=NaN,this.freereg=NaN},N=function t(){r(this,t),this.idx=NaN},R=function t(){r(this,t),this.name=null,this.pc=NaN,this.line=NaN,this.nactvar=NaN},w=function t(){r(this,t),this.arr=[],this.n=NaN,this.size=NaN},I=function t(){r(this,t),this.actvar={arr:[],n:NaN,size:NaN},this.gt=new w,this.label=new w},M=function(t,e){t.t.token=0,c.luaX_syntaxerror(t,e)},C=function(t,e){c.luaX_syntaxerror(t,f.luaO_pushfstring(t.L,l.to_luastring("%s expected",!0),c.luaX_token2str(t,e)))},P=function(t,e,a){var r=t.ls.L,n=t.f.linedefined,u=0===n?l.to_luastring("main function",!0):f.luaO_pushfstring(r,l.to_luastring("function at line %d",!0),n),o=f.luaO_pushfstring(r,l.to_luastring("too many %s (limit is %d) in %s",!0),a,e,u);c.luaX_syntaxerror(t.ls,o)},D=function(t,e,a,r){e>a&&P(t,a,r)},K=function(t,e){return t.t.token===e&&(c.luaX_next(t),!0)},B=function(t,e){t.t.token!==e&&C(t,e)},G=function(t,e){B(t,e),c.luaX_next(t)},V=function(t,e,a){e||c.luaX_syntaxerror(t,a)},j=function(t,e,a,r){K(t,e)||(r===t.linenumber?C(t,e):c.luaX_syntaxerror(t,f.luaO_pushfstring(t.L,l.to_luastring("%s expected (to close %s at line %d)"),c.luaX_token2str(t,e),c.luaX_token2str(t,a),r)))},F=function(t){B(t,A.TK_NAME);var e=t.t.seminfo.ts;return c.luaX_next(t),e},X=function(t,e,a){t.f=t.t=o.NO_JUMP,t.k=e,t.u.info=a},H=function(t,e,a){X(e,m.VK,o.luaK_stringK(t.fs,a))},z=function(t,e){H(t,e,F(t))},Y=function(t,e){var a=t.fs,r=a.f;return r.locvars[a.nlocvars]=new f.LocVar,r.locvars[a.nlocvars].varname=e,a.nlocvars++},Z=function(t,e){var a=t.fs,r=t.dyd,n=Y(t,e);D(a,r.actvar.n+1-a.firstlocal,200,l.to_luastring("local variables",!0)),r.actvar.arr[r.actvar.n]=new N,r.actvar.arr[r.actvar.n].idx=n,r.actvar.n++},J=function(t,e){Z(t,c.luaX_newstring(t,l.to_luastring(e,!0)))},q=function(t,e){var a=t.ls.dyd.actvar.arr[t.firstlocal+e].idx;return u(a<t.nlocvars),t.f.locvars[a]},W=function(t,e){var a=t.fs;for(a.nactvar=a.nactvar+e;e;e--)q(a,a.nactvar-e).startpc=a.pc},Q=function(t,e){for(t.ls.dyd.actvar.n-=t.nactvar-e;t.nactvar>e;)q(t,--t.nactvar).endpc=t.pc},$=function(t,e){for(var a=t.f.upvalues,r=0;r<t.nups;r++)if(k(a[r].name,e))return r;return-1},tt=function(t,e,a){var r=t.f;return D(t,t.nups+1,i.MAXUPVAL,l.to_luastring("upvalues",!0)),r.upvalues[t.nups]={instack:a.k===m.VLOCAL,idx:a.u.info,name:e},t.nups++},et=function(t,e){for(var a=t.nactvar-1;a>=0;a--)if(k(e,q(t,a).varname))return a;return-1},at=function(t,e){for(var a=t.bl;a.nactvar>e;)a=a.previous;a.upval=1},rt=function t(e,a,r,n){if(null===e)X(r,m.VVOID,0);else{var u=et(e,a);if(u>=0)X(r,m.VLOCAL,u),n||at(e,u);else{var l=$(e,a);if(l<0){if(t(e.prev,a,r,0),r.k===m.VVOID)return;l=tt(e,a,r)}X(r,m.VUPVAL,l)}}},nt=function(t,e){var a=F(t),r=t.fs;if(rt(r,a,e,1),e.k===m.VVOID){var n=new y;rt(r,t.envn,e,1),u(e.k!==m.VVOID),H(t,n,a),o.luaK_indexed(r,e,n)}},ut=function(t,e,a,r){var n=t.fs,u=e-a;if(x(r.k))u++,u<0&&(u=0),o.luaK_setreturns(n,r,u),u>1&&o.luaK_reserveregs(n,u-1);else if(r.k!==m.VVOID&&o.luaK_exp2nextreg(n,r),u>0){var l=n.freereg;o.luaK_reserveregs(n,u),o.luaK_nil(n,l,u)}a>e&&(t.fs.freereg-=a-e)},lt=function(t){var e=t.L;++e.nCcalls,D(t.fs,e.nCcalls,_.LUAI_MAXCCALLS,l.to_luastring("JS levels",!0))},ot=function(t){return t.L.nCcalls--},st=function(t,e,a){var r=t.fs,n=t.dyd.gt,s=n.arr[e];if(u(k(s.name,a.name)),s.nactvar<a.nactvar){var i=q(r,s.nactvar).varname,c=f.luaO_pushfstring(t.L,l.to_luastring("<goto %s> at line %d jumps into the scope of local '%s'"),s.name.getstr(),s.line,i.getstr());M(t,c)}o.luaK_patchlist(r,s.pc,a.pc);for(var _=e;_<n.n-1;_++)n.arr[_]=n.arr[_+1];n.n--},it=function(t,e){for(var a=t.fs.bl,r=t.dyd,n=r.gt.arr[e],u=a.firstlabel;u<r.label.n;u++){var l=r.label.arr[u];if(k(l.name,n.name))return n.nactvar>l.nactvar&&(a.upval||r.label.n>a.firstlabel)&&o.luaK_patchclose(t.fs,n.pc,l.nactvar),st(t,e,l),!0}return!1},ct=function(t,e,a,r,n){var u=e.n;return e.arr[u]=new R,e.arr[u].name=a,e.arr[u].line=r,e.arr[u].nactvar=t.fs.nactvar,e.arr[u].pc=n,e.n=u+1,u},_t=function(t,e){for(var a=t.dyd.gt,r=t.fs.bl.firstgoto;r<a.n;)k(a.arr[r].name,e.name)?st(t,r,e):r++},ft=function(t,e){for(var a=e.firstgoto,r=t.ls.dyd.gt;a<r.n;){var n=r.arr[a];n.nactvar>e.nactvar&&(e.upval&&o.luaK_patchclose(t,n.pc,e.nactvar),n.nactvar=e.nactvar),it(t.ls,a)||a++}},pt=function(t,e,a){e.isloop=a,e.nactvar=t.nactvar,e.firstlabel=t.ls.dyd.label.n,e.firstgoto=t.ls.dyd.gt.n,e.upval=0,e.previous=t.bl,t.bl=e,u(t.freereg===t.nactvar)},vt=function(t){var e=v.luaS_newliteral(t.L,"break"),a=ct(t,t.dyd.label,e,0,t.fs.pc);_t(t,t.dyd.label.arr[a])},ht=function(t,e){var a=c.isreserved(e.name)?"<%s> at line %d not inside a loop":"no visible label '%s' for <goto> at line %d";a=f.luaO_pushfstring(t.L,l.to_luastring(a),e.name.getstr(),e.line),M(t,a)},gt=function(t){var e=t.L,a=new L(e),r=t.fs;return r.f.p[r.np++]=a,a},dt=function(t,e){var a=t.fs.prev;X(e,m.VRELOCABLE,o.luaK_codeABx(a,d.OP_CLOSURE,0,a.np-1)),o.luaK_exp2nextreg(a,e)},Lt=function(t,e,a){e.prev=t.fs,e.ls=t,t.fs=e,e.pc=0,e.lasttarget=0,e.jpc=o.NO_JUMP,e.freereg=0,e.nk=0,e.np=0,e.nups=0,e.nlocvars=0,e.nactvar=0,e.firstlocal=t.dyd.actvar.n,e.bl=null;var r=new L(t.L);r=e.f,r.source=t.source,r.maxstacksize=2,pt(e,a,!1)},At=function(t){var e=t.bl,a=t.ls;if(e.previous&&e.upval){var r=o.luaK_jump(t);o.luaK_patchclose(t,r,e.nactvar),o.luaK_patchtohere(t,r)}e.isloop&&vt(a),t.bl=e.previous,Q(t,e.nactvar),u(e.nactvar===t.nactvar),t.freereg=t.nactvar,a.dyd.label.n=e.firstlabel,e.previous?ft(t,e):e.firstgoto<a.dyd.gt.n&&ht(a,a.dyd.gt.arr[e.firstgoto])},Tt=function(t){var e=t.fs;o.luaK_ret(e,0,0),At(e),u(null===e.bl),t.fs=e.prev},bt=function(t,e){switch(t.t.token){case A.TK_ELSE:case A.TK_ELSEIF:case A.TK_END:case A.TK_EOS:return!0;case A.TK_UNTIL:return e;default:return!1}},xt=function(t){for(;!bt(t,1);){if(t.t.token===A.TK_RETURN)return void ve(t);ve(t)}},kt=function(t,e){var a=t.fs,r=new y;o.luaK_exp2anyregup(a,e),c.luaX_next(t),z(t,r),o.luaK_indexed(a,e,r)},Ot=function(t,e){c.luaX_next(t),Ft(t,e),o.luaK_exp2val(t.fs,e),G(t,b["]"])},mt=function t(){r(this,t),this.v=new y,this.t=new y,this.nh=NaN,this.na=NaN,this.tostore=NaN},Ut=function(t,e){var a=t.fs,r=t.fs.freereg,n=new y,u=new y;t.t.token===A.TK_NAME?(D(a,e.nh,_.MAX_INT,l.to_luastring("items in a constructor",!0)),z(t,n)):Ot(t,n),e.nh++,G(t,b["="]);var s=o.luaK_exp2RK(a,n);Ft(t,u),o.luaK_codeABC(a,d.OP_SETTABLE,e.t.u.info,s,o.luaK_exp2RK(a,u)),a.freereg=r},Et=function(t,e){e.v.k!==m.VVOID&&(o.luaK_exp2nextreg(t,e.v),e.v.k=m.VVOID,e.tostore===p.LFIELDS_PER_FLUSH&&(o.luaK_setlist(t,e.t.u.info,e.na,e.tostore),e.tostore=0))},yt=function(t,e){0!==e.tostore&&(x(e.v.k)?(o.luaK_setmultret(t,e.v),o.luaK_setlist(t,e.t.u.info,e.na,l.LUA_MULTRET),e.na--):(e.v.k!==m.VVOID&&o.luaK_exp2nextreg(t,e.v),o.luaK_setlist(t,e.t.u.info,e.na,e.tostore)))},St=function(t,e){Ft(t,e.v),D(t.fs,e.na,_.MAX_INT,l.to_luastring("items in a constructor",!0)),e.na++,e.tostore++},Nt=function(t,e){switch(t.t.token){case A.TK_NAME:c.luaX_lookahead(t)!==b["="]?St(t,e):Ut(t,e);break;case b["["]:Ut(t,e);break;default:St(t,e)}},Rt=function(t,e){var a=t.fs,r=t.linenumber,n=o.luaK_codeABC(a,d.OP_NEWTABLE,0,0,0),l=new mt;l.na=l.nh=l.tostore=0,l.t=e,X(e,m.VRELOCABLE,n),X(l.v,m.VVOID,0),o.luaK_exp2nextreg(t.fs,e),G(t,b["{"]);do{if(u(l.v.k===m.VVOID||l.tostore>0),t.t.token===b["}"])break;Et(a,l),Nt(t,l)}while(K(t,b[","])||K(t,b[";"]));j(t,b["}"],b["{"],r),yt(a,l),p.SETARG_B(a.f.code[n],f.luaO_int2fb(l.na)),p.SETARG_C(a.f.code[n],f.luaO_int2fb(l.nh))},wt=function(t){var e=t.fs,a=e.f,r=0;if(a.is_vararg=!1,t.t.token!==b[")"])do{switch(t.t.token){case A.TK_NAME:Z(t,F(t)),r++;break;case A.TK_DOTS:c.luaX_next(t),a.is_vararg=!0;break;default:c.luaX_syntaxerror(t,l.to_luastring("<name> or '...' expected",!0))}}while(!a.is_vararg&&K(t,b[","]));W(t,r),a.numparams=e.nactvar,o.luaK_reserveregs(e,e.nactvar)},It=function(t,e,a,r){var n=new S,u=new O;n.f=gt(t),n.f.linedefined=r,Lt(t,n,u),G(t,b["("]),a&&(J(t,"self"),W(t,1)),wt(t),G(t,b[")"]),xt(t),n.f.lastlinedefined=t.linenumber,j(t,A.TK_END,A.TK_FUNCTION,r),dt(t,e),Tt(t)},Mt=function(t,e){var a=1;for(Ft(t,e);K(t,b[","]);)o.luaK_exp2nextreg(t.fs,e),Ft(t,e),a++;return a},Ct=function(t,e,a){var r=t.fs,n=new y;switch(t.t.token){case b["("]:c.luaX_next(t),t.t.token===b[")"]?n.k=m.VVOID:(Mt(t,n),o.luaK_setmultret(r,n)),j(t,b[")"],b["("],a);break;case b["{"]:Rt(t,n);break;case A.TK_STRING:H(t,n,t.t.seminfo.ts),c.luaX_next(t);break;default:c.luaX_syntaxerror(t,l.to_luastring("function arguments expected",!0))}u(e.k===m.VNONRELOC);var s=void 0,i=e.u.info;x(n.k)?s=l.LUA_MULTRET:(n.k!==m.VVOID&&o.luaK_exp2nextreg(r,n),s=r.freereg-(i+1)),X(e,m.VCALL,o.luaK_codeABC(r,d.OP_CALL,i,s+1,2)),o.luaK_fixline(r,a),r.freereg=i+1},Pt=function(t,e){switch(t.t.token){case b["("]:var a=t.linenumber;return c.luaX_next(t),Ft(t,e),j(t,b[")"],b["("],a),void o.luaK_dischargevars(t.fs,e);case A.TK_NAME:return void nt(t,e);default:c.luaX_syntaxerror(t,l.to_luastring("unexpected symbol",!0))}},Dt=function(t,e){var a=t.fs,r=t.linenumber;for(Pt(t,e);;)switch(t.t.token){case b["."]:kt(t,e);break;case b["["]:var n=new y;o.luaK_exp2anyregup(a,e),Ot(t,n),o.luaK_indexed(a,e,n);break;case b[":"]:var u=new y;c.luaX_next(t),z(t,u),o.luaK_self(a,e,u),Ct(t,e,r);break;case b["("]:case A.TK_STRING:case b["{"]:o.luaK_exp2nextreg(a,e),Ct(t,e,r);break;default:return}},Kt=function(t,e){switch(t.t.token){case A.TK_FLT:X(e,m.VKFLT,0),e.u.nval=t.t.seminfo.r;break;case A.TK_INT:X(e,m.VKINT,0),e.u.ival=t.t.seminfo.i;break;case A.TK_STRING:H(t,e,t.t.seminfo.ts);break;case A.TK_NIL:X(e,m.VNIL,0);break;case A.TK_TRUE:X(e,m.VTRUE,0);break;case A.TK_FALSE:X(e,m.VFALSE,0);break;case A.TK_DOTS:var a=t.fs;V(t,a.f.is_vararg,l.to_luastring("cannot use '...' outside a vararg function",!0)),X(e,m.VVARARG,o.luaK_codeABC(a,d.OP_VARARG,0,1,0));break;case b["{"]:return void Rt(t,e);case A.TK_FUNCTION:return c.luaX_next(t),void It(t,e,0,t.linenumber);default:return void Dt(t,e)}c.luaX_next(t)},Bt=function(t){switch(t){case A.TK_NOT:return T.OPR_NOT;case b["-"]:return T.OPR_MINUS;case b["~"]:return T.OPR_BNOT;case b["#"]:return T.OPR_LEN;default:return T.OPR_NOUNOPR}},Gt=function(t){switch(t){case b["+"]:return g.OPR_ADD;case b["-"]:return g.OPR_SUB;case b["*"]:return g.OPR_MUL;case b["%"]:return g.OPR_MOD;case b["^"]:return g.OPR_POW;case b["/"]:return g.OPR_DIV;case A.TK_IDIV:return g.OPR_IDIV;case b["&"]:return g.OPR_BAND;case b["|"]:return g.OPR_BOR;case b["~"]:return g.OPR_BXOR;case A.TK_SHL:return g.OPR_SHL;case A.TK_SHR:return g.OPR_SHR;case A.TK_CONCAT:return g.OPR_CONCAT;case A.TK_NE:return g.OPR_NE;case A.TK_EQ:return g.OPR_EQ;case b["<"]:return g.OPR_LT;case A.TK_LE:return g.OPR_LE;case b[">"]:return g.OPR_GT;case A.TK_GE:return g.OPR_GE;case A.TK_AND:return g.OPR_AND;case A.TK_OR:return g.OPR_OR;default:return g.OPR_NOBINOPR}},Vt=[{left:10,right:10},{left:10,right:10},{left:11,right:11},{left:11,right:11},{left:14,right:13},{left:11,right:11},{left:11,right:11},{left:6,right:6},{left:4,right:4},{left:5,right:5},{left:7,right:7},{left:7,right:7},{left:9,right:8},{left:3,right:3},{left:3,right:3},{left:3,right:3},{left:3,right:3},{left:3,right:3},{left:3,right:3},{left:2,right:2},{left:1,right:1}],jt=function t(e,a,r){lt(e);var n=Bt(e.t.token);if(n!==T.OPR_NOUNOPR){var u=e.linenumber;c.luaX_next(e),t(e,a,12),o.luaK_prefix(e.fs,n,a,u)}else Kt(e,a);for(var l=Gt(e.t.token);l!==g.OPR_NOBINOPR&&Vt[l].left>r;){var s=new y,i=e.linenumber;c.luaX_next(e),o.luaK_infix(e.fs,l,a);var _=t(e,s,Vt[l].right);o.luaK_posfix(e.fs,l,a,s,i),l=_}return ot(e),l},Ft=function(t,e){jt(t,e,0)},Xt=function(t){var e=t.fs,a=new O;pt(e,a,0),xt(t),At(e)},Ht=function t(){r(this,t),this.prev=null,this.v=new y},zt=function(t,e,a){for(var r=t.fs,n=r.freereg,u=!1;e;e=e.prev)e.v.k===m.VINDEXED&&(e.v.u.ind.vt===a.k&&e.v.u.ind.t===a.u.info&&(u=!0,e.v.u.ind.vt=m.VLOCAL,e.v.u.ind.t=n),a.k===m.VLOCAL&&e.v.u.ind.idx===a.u.info&&(u=!0,e.v.u.ind.idx=n));if(u){var l=a.k===m.VLOCAL?d.OP_MOVE:d.OP_GETUPVAL;o.luaK_codeABC(r,l,n,a.u.info,0),o.luaK_reserveregs(r,1)}},Yt=function t(e,a,r){var n=new y;if(V(e,U(a.v.k),l.to_luastring("syntax error",!0)),K(e,b[","])){var u=new Ht;u.prev=a,Dt(e,u.v),u.v.k!==m.VINDEXED&&zt(e,a,u.v),D(e.fs,r+e.L.nCcalls,_.LUAI_MAXCCALLS,l.to_luastring("JS levels",!0)),t(e,u,r+1)}else{G(e,b["="]);var s=Mt(e,n);if(s===r)return o.luaK_setoneret(e.fs,n),void o.luaK_storevar(e.fs,a.v,n);ut(e,r,s,n)}X(n,m.VNONRELOC,e.fs.freereg-1),o.luaK_storevar(e.fs,a.v,n)},Zt=function(t){var e=new y;return Ft(t,e),e.k===m.VNIL&&(e.k=m.VFALSE),o.luaK_goiftrue(t.fs,e),e.f},Jt=function(t,e){var a=t.linenumber,r=void 0;K(t,A.TK_GOTO)?r=F(t):(c.luaX_next(t),r=v.luaS_newliteral(t.L,"break"));var n=ct(t,t.dyd.gt,r,a,e);it(t,n)},qt=function(t,e,a){for(var r=t.bl.firstlabel;r<e.n;r++)if(k(a,e.arr[r].name)){var n=f.luaO_pushfstring(t.ls.L,l.to_luastring("label '%s' already defined on line %d",!0),a.getstr(),e.arr[r].line);M(t.ls,n)}},Wt=function(t){for(;t.t.token===b[";"]||t.t.token===A.TK_DBCOLON;)ve(t)},Qt=function(t,e,a){var r=t.fs,n=t.dyd.label,u=void 0;qt(r,n,e),G(t,A.TK_DBCOLON),u=ct(t,n,e,a,o.luaK_getlabel(r)),Wt(t),bt(t,0)&&(n.arr[u].nactvar=r.bl.nactvar),_t(t,n.arr[u])},$t=function(t,e){var a=t.fs,r=new O;c.luaX_next(t);var n=o.luaK_getlabel(a),u=Zt(t);pt(a,r,1),G(t,A.TK_DO),Xt(t),o.luaK_jumpto(a,n),j(t,A.TK_END,A.TK_WHILE,e),At(a),o.luaK_patchtohere(a,u)},te=function(t,e){var a=t.fs,r=o.luaK_getlabel(a),n=new O,u=new O;pt(a,n,1),pt(a,u,0),c.luaX_next(t),xt(t),j(t,A.TK_UNTIL,A.TK_REPEAT,e);var l=Zt(t);u.upval&&o.luaK_patchclose(a,l,u.nactvar),At(a),o.luaK_patchlist(a,l,r),At(a)},ee=function(t){var e=new y;return Ft(t,e),o.luaK_exp2nextreg(t.fs,e),u(e.k===m.VNONRELOC),e.u.info},ae=function(t,e,a,r,n){var u=new O,l=t.fs,s=void 0;W(t,3),G(t,A.TK_DO);var i=n?o.luaK_codeAsBx(l,d.OP_FORPREP,e,o.NO_JUMP):o.luaK_jump(l);pt(l,u,0),W(t,r),o.luaK_reserveregs(l,r),Xt(t),At(l),o.luaK_patchtohere(l,i),n?s=o.luaK_codeAsBx(l,d.OP_FORLOOP,e,o.NO_JUMP):(o.luaK_codeABC(l,d.OP_TFORCALL,e,0,r),o.luaK_fixline(l,a),s=o.luaK_codeAsBx(l,d.OP_TFORLOOP,e+2,o.NO_JUMP)),o.luaK_patchlist(l,s,i+1),o.luaK_fixline(l,a)},re=function(t,e,a){var r=t.fs,n=r.freereg;J(t,"(for index)"),J(t,"(for limit)"),J(t,"(for step)"),Z(t,e),G(t,b["="]),ee(t),G(t,b[","]),ee(t),K(t,b[","])?ee(t):(o.luaK_codek(r,r.freereg,o.luaK_intK(r,1)),o.luaK_reserveregs(r,1)),ae(t,n,a,1,1)},ne=function(t,e){var a=t.fs,r=new y,n=4,u=a.freereg;for(J(t,"(for generator)"),J(t,"(for state)"),J(t,"(for control)"),Z(t,e);K(t,b[","]);)Z(t,F(t)),n++;G(t,A.TK_IN);var l=t.linenumber;ut(t,3,Mt(t,r),r),o.luaK_checkstack(a,3),ae(t,u,l,n-3,0)},ue=function(t,e){var a=t.fs,r=new O;pt(a,r,1),c.luaX_next(t);var n=F(t);switch(t.t.token){case b["="]:re(t,n,e);break;case b[","]:case A.TK_IN:ne(t,n);break;default:c.luaX_syntaxerror(t,l.to_luastring("'=' or 'in' expected",!0))}j(t,A.TK_END,A.TK_FOR,e),At(a)},le=function(t,e){var a=new O,r=t.fs,n=new y,u=void 0;if(c.luaX_next(t),Ft(t,n),G(t,A.TK_THEN),t.t.token===A.TK_GOTO||t.t.token===A.TK_BREAK){for(o.luaK_goiffalse(t.fs,n),pt(r,a,!1),Jt(t,n.t);K(t,b[";"]););if(bt(t,0))return At(r),e;u=o.luaK_jump(r)}else o.luaK_goiftrue(t.fs,n),pt(r,a,!1),u=n.f;return xt(t),At(r),t.t.token!==A.TK_ELSE&&t.t.token!==A.TK_ELSEIF||(e=o.luaK_concat(r,e,o.luaK_jump(r))),o.luaK_patchtohere(r,u),e},oe=function(t,e){var a=t.fs,r=o.NO_JUMP;for(r=le(t,r);t.t.token===A.TK_ELSEIF;)r=le(t,r);K(t,A.TK_ELSE)&&Xt(t),j(t,A.TK_END,A.TK_IF,e),o.luaK_patchtohere(a,r)},se=function(t){var e=new y,a=t.fs;Z(t,F(t)),W(t,1),It(t,e,0,t.linenumber),q(a,e.u.info).startpc=a.pc},ie=function(t){var e=0,a=void 0,r=new y;do{Z(t,F(t)),e++}while(K(t,b[","]));K(t,b["="])?a=Mt(t,r):(r.k=m.VVOID,a=0),ut(t,e,a,r),W(t,e)},ce=function(t,e){var a=0;for(nt(t,e);t.t.token===b["."];)kt(t,e);return t.t.token===b[":"]&&(a=1,kt(t,e)),a},_e=function(t,e){var a=new y,r=new y;c.luaX_next(t);var n=ce(t,a);It(t,r,n,e),o.luaK_storevar(t.fs,a,r),o.luaK_fixline(t.fs,e)},fe=function(t){var e=t.fs,a=new Ht;Dt(t,a.v),t.t.token===b["="]||t.t.token===b[","]?(a.prev=null,Yt(t,a,1)):(V(t,a.v.k===m.VCALL,l.to_luastring("syntax error",!0)),p.SETARG_C(o.getinstruction(e,a.v),1))},pe=function(t){var e=t.fs,a=new y,r=void 0,n=void 0;bt(t,1)||t.t.token===b[";"]?r=n=0:(n=Mt(t,a),x(a.k)?(o.luaK_setmultret(e,a),a.k===m.VCALL&&1===n&&(p.SET_OPCODE(o.getinstruction(e,a),d.OP_TAILCALL),u(o.getinstruction(e,a).A===e.nactvar)),r=e.nactvar,n=l.LUA_MULTRET):1===n?r=o.luaK_exp2anyreg(e,a):(o.luaK_exp2nextreg(e,a),r=e.nactvar,u(n===e.freereg-r))),o.luaK_ret(e,r,n),K(t,b[";"])},ve=function(t){var e=t.linenumber;switch(lt(t),t.t.token){case b[";"]:c.luaX_next(t);break;case A.TK_IF:oe(t,e);break;case A.TK_WHILE:$t(t,e);break;case A.TK_DO:c.luaX_next(t),Xt(t),j(t,A.TK_END,A.TK_DO,e);break;case A.TK_FOR:ue(t,e);break;case A.TK_REPEAT:te(t,e);break;case A.TK_FUNCTION:_e(t,e);break;case A.TK_LOCAL:c.luaX_next(t),K(t,A.TK_FUNCTION)?se(t):ie(t);break;case A.TK_DBCOLON:c.luaX_next(t),Qt(t,F(t),e);break;case A.TK_RETURN:c.luaX_next(t),pe(t);break;case A.TK_BREAK:case A.TK_GOTO:Jt(t,o.luaK_jump(t.fs));break;default:fe(t)}u(t.fs.f.maxstacksize>=t.fs.freereg&&t.fs.freereg>=t.fs.nactvar),t.fs.freereg=t.fs.nactvar,ot(t)},he=function(t,e){var a=new O,r=new y;Lt(t,e,a),e.f.is_vararg=!0,X(r,m.VLOCAL,0),tt(e,t.envn,r),c.luaX_next(t),xt(t),B(t,A.TK_EOS),Tt(t)},ge=function(t,e,a,r,n,l){var o=new c.LexState,_=new S,f=i.luaF_newLclosure(t,1);return s.luaD_inctop(t),t.stack[t.top-1].setclLvalue(f),o.h=h.luaH_new(t),s.luaD_inctop(t),t.stack[t.top-1].sethvalue(o.h),_.f=f.p=new L(t),_.f.source=v.luaS_new(t,n),o.buff=a,o.dyd=r,r.actvar.n=r.gt.n=r.label.n=0,c.luaX_setinput(t,o,e,_.f.source,l),he(o,_),u(!_.prev&&1===_.nups&&!o.fs),u(0===r.actvar.n&&0===r.gt.n&&0===r.label.n),delete t.stack[--t.top],f};t.exports.Dyndata=I,t.exports.expkind=m,t.exports.expdesc=y,t.exports.luaY_parser=ge,t.exports.vkisinreg=E},function(t,e,a){"use strict";var r=a(2),n=a(38),u="_"+r.LUA_VERSION_MAJOR+"_"+r.LUA_VERSION_MINOR;t.exports.LUA_VERSUFFIX=u;t.exports.LUA_COLIBNAME="coroutine",t.exports.luaopen_coroutine=a(23).luaopen_coroutine;t.exports.LUA_TABLIBNAME="table",t.exports.luaopen_table=a(26).luaopen_table;t.exports.LUA_OSLIBNAME="os",t.exports.luaopen_os=a(29).luaopen_os;t.exports.LUA_STRLIBNAME="string",t.exports.luaopen_string=a(25).luaopen_string;t.exports.LUA_UTF8LIBNAME="utf8",t.exports.luaopen_utf8=a(27).luaopen_utf8;t.exports.LUA_BITLIBNAME="bit32";t.exports.LUA_MATHLIBNAME="math",t.exports.luaopen_math=a(24).luaopen_math;t.exports.LUA_DBLIBNAME="debug",t.exports.luaopen_debug=a(28).luaopen_debug;t.exports.LUA_LOADLIBNAME="package",t.exports.luaopen_package=a(30).luaopen_package,t.exports.luaL_openlibs=n.luaL_openlibs},function(t,e,a){"use strict";var r=a(2),n=a(4),u=function(t){var e=r.lua_tothread(t,1);return n.luaL_argcheck(t,e,1,r.to_luastring("thread expected",!0)),e},l=function(t,e,a){if(!r.lua_checkstack(e,a))return r.lua_pushliteral(t,"too many arguments to resume"),-1;if(r.lua_status(e)===r.LUA_OK&&0===r.lua_gettop(e))return r.lua_pushliteral(t,"cannot resume dead coroutine"),-1;r.lua_xmove(t,e,a);var n=r.lua_resume(e,t,a);if(n===r.LUA_OK||n===r.LUA_YIELD){var u=r.lua_gettop(e);return r.lua_checkstack(t,u+1)?(r.lua_xmove(e,t,u),u):(r.lua_pop(e,u),r.lua_pushliteral(t,"too many results to resume"),-1)}return r.lua_xmove(e,t,1),-1},o=function(t){var e=u(t),a=l(t,e,r.lua_gettop(t)-1);return a<0?(r.lua_pushboolean(t,0),r.lua_insert(t,-2),2):(r.lua_pushboolean(t,1),r.lua_insert(t,-(a+1)),a+1)},s=function(t){var e=r.lua_tothread(t,r.lua_upvalueindex(1)),a=l(t,e,r.lua_gettop(t));return a<0?(r.lua_type(t,-1)===r.LUA_TSTRING&&(n.luaL_where(t,1),r.lua_insert(t,-2),r.lua_concat(t,2)),r.lua_error(t)):a},i=function(t){n.luaL_checktype(t,1,r.LUA_TFUNCTION);var e=r.lua_newthread(t);return r.lua_pushvalue(t,1),r.lua_xmove(t,e,1),1},c=function(t){return i(t),r.lua_pushcclosure(t,s,1),1},_=function(t){return r.lua_yield(t,r.lua_gettop(t))},f=function(t){var e=u(t);if(t===e)r.lua_pushliteral(t,"running");else switch(r.lua_status(e)){case r.LUA_YIELD:r.lua_pushliteral(t,"suspended");break;case r.LUA_OK:var a=new r.lua_Debug;r.lua_getstack(e,0,a)>0?r.lua_pushliteral(t,"normal"):0===r.lua_gettop(e)?r.lua_pushliteral(t,"dead"):r.lua_pushliteral(t,"suspended");break;default:r.lua_pushliteral(t,"dead")}return 1},p=function(t){return r.lua_pushboolean(t,r.lua_isyieldable(t)),1},v=function(t){return r.lua_pushboolean(t,r.lua_pushthread(t)),2},h={create:i,isyieldable:p,resume:o,running:v,status:f,wrap:c,yield:_},g=function(t){return n.luaL_newlib(t,h),1};t.exports.luaopen_coroutine=g},function(t,e,a){"use strict";var r=a(2),n=a(4),u=a(6),l=function(t){var e=void 0,a=void 0,l=Math.random();switch(r.lua_gettop(t)){case 0:return r.lua_pushnumber(t,l),1;case 1:e=1,a=n.luaL_checkinteger(t,1);break;case 2:e=n.luaL_checkinteger(t,1),a=n.luaL_checkinteger(t,2);break;default:return n.luaL_error(t,r.to_luastring("wrong number of arguments",!0))}return n.luaL_argcheck(t,e<=a,1,r.to_luastring("interval is empty",!0)),n.luaL_argcheck(t,e>=0||a<=u.LUA_MAXINTEGER+e,1,r.to_luastring("interval too large",!0)),l*=a-e+1,r.lua_pushinteger(t,Math.floor(l)+e),1},o=function(t){if(r.lua_isinteger(t,1)){var e=r.lua_tointeger(t,1);e<0&&(e=0|-e),r.lua_pushinteger(t,e)}else r.lua_pushnumber(t,Math.abs(n.luaL_checknumber(t,1)));return 1},s=function(t){return r.lua_pushnumber(t,Math.sin(n.luaL_checknumber(t,1))),1},i=function(t){return r.lua_pushnumber(t,Math.cos(n.luaL_checknumber(t,1))),1},c=function(t){return r.lua_pushnumber(t,Math.tan(n.luaL_checknumber(t,1))),1},_=function(t){return r.lua_pushnumber(t,Math.asin(n.luaL_checknumber(t,1))),1},f=function(t){return r.lua_pushnumber(t,Math.acos(n.luaL_checknumber(t,1))),1},p=function(t){var e=n.luaL_checknumber(t,1),a=n.luaL_optnumber(t,2,1);return r.lua_pushnumber(t,Math.atan2(e,a)),1},v=function(t){var e=r.lua_tointegerx(t,1);return!1!==e?r.lua_pushinteger(t,e):(n.luaL_checkany(t,1),r.lua_pushnil(t)),1},h=function(t,e){var a=u.lua_numbertointeger(e);!1!==a?r.lua_pushinteger(t,a):r.lua_pushnumber(t,e)},g=function(t){return r.lua_isinteger(t,1)?r.lua_settop(t,1):h(t,Math.floor(n.luaL_checknumber(t,1))),1},d=function(t){return r.lua_isinteger(t,1)?r.lua_settop(t,1):h(t,Math.ceil(n.luaL_checknumber(t,1))),1},L=function(t){return r.lua_pushnumber(t,Math.sqrt(n.luaL_checknumber(t,1))),1},A=function(t){var e=n.luaL_checkinteger(t,1),a=n.luaL_checkinteger(t,2);return r.lua_pushboolean(t,e>=0?a<0||e<a:a<0&&e<a),1},T=function(t){var e=n.luaL_checknumber(t,1),a=void 0;if(r.lua_isnoneornil(t,2))a=Math.log(e);else{var u=n.luaL_checknumber(t,2);a=2===u?Math.log2(e):10===u?Math.log10(e):Math.log(e)/Math.log(u)}return r.lua_pushnumber(t,a),1},b=function(t){return r.lua_pushnumber(t,Math.exp(n.luaL_checknumber(t,1))),1},x=function(t){return r.lua_pushnumber(t,n.luaL_checknumber(t,1)*(180/Math.PI)),1},k=function(t){return r.lua_pushnumber(t,n.luaL_checknumber(t,1)*(Math.PI/180)),1},O=function(t){var e=r.lua_gettop(t),a=1;n.luaL_argcheck(t,e>=1,1,r.to_luastring("value expected",!0));for(var u=2;u<=e;u++)r.lua_compare(t,u,a,r.LUA_OPLT)&&(a=u);return r.lua_pushvalue(t,a),1},m=function(t){var e=r.lua_gettop(t),a=1;n.luaL_argcheck(t,e>=1,1,r.to_luastring("value expected",!0));for(var u=2;u<=e;u++)r.lua_compare(t,a,u,r.LUA_OPLT)&&(a=u);return r.lua_pushvalue(t,a),1},U=function(t){return r.lua_type(t,1)===r.LUA_TNUMBER?r.lua_isinteger(t,1)?r.lua_pushliteral(t,"integer"):r.lua_pushliteral(t,"float"):(n.luaL_checkany(t,1),r.lua_pushnil(t)),1},E=function(t){if(r.lua_isinteger(t,1)&&r.lua_isinteger(t,2)){var e=r.lua_tointeger(t,2);0===e?n.luaL_argerror(t,2,r.to_luastring("zero",!0)):r.lua_pushinteger(t,r.lua_tointeger(t,1)%e|0)}else{var a=n.luaL_checknumber(t,1),u=n.luaL_checknumber(t,2);r.lua_pushnumber(t,a%u)}return 1},y=function(t){if(r.lua_isinteger(t,1))r.lua_settop(t,1),r.lua_pushnumber(t,0);else{var e=n.luaL_checknumber(t,1),a=e<0?Math.ceil(e):Math.floor(e);h(t,a),r.lua_pushnumber(t,e===a?0:e-a)}return 2},S={abs:o,acos:f,asin:_,atan:p,ceil:d,cos:i,deg:x,exp:b,floor:g,fmod:E,log:T,max:m,min:O,modf:y,rad:k,random:l,sin:s,sqrt:L,tan:c,tointeger:v,type:U,ult:A},N=function(t){return n.luaL_newlib(t,S),r.lua_pushnumber(t,Math.PI),r.lua_setfield(t,-2,r.to_luastring("pi",!0)),r.lua_pushnumber(t,1/0),r.lua_setfield(t,-2,r.to_luastring("huge",!0)),r.lua_pushinteger(t,u.LUA_MAXINTEGER),r.lua_setfield(t,-2,r.to_luastring("maxinteger",!0)),r.lua_pushinteger(t,u.LUA_MININTEGER),r.lua_setfield(t,-2,r.to_luastring("mininteger",!0)),1};t.exports.luaopen_math=N},function(t,e,a){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var n=a(0),u=a(40).sprintf,l=a(4),o=a(2),s=a(6),i="%",c=i.charCodeAt(0),_=function(t){var e=o.luastring_indexOf(t,0);return e>-1?e:t.length},f=function(t,e){return t>=0?t:0-t>e?0:e+t+1},p=function(t){var e=l.luaL_checkstring(t,1),a=e.length,r=f(l.luaL_checkinteger(t,2),a),n=f(l.luaL_optinteger(t,3,-1),a);return r<1&&(r=1),n>a&&(n=a),r<=n?o.lua_pushstring(t,e.subarray(r-1,r-1+(n-r+1))):o.lua_pushliteral(t,""),1},v=function(t){return o.lua_pushinteger(t,l.luaL_checkstring(t,1).length),1},h=function(t){for(var e=o.lua_gettop(t),a=new l.luaL_Buffer,r=l.luaL_buffinitsize(t,a,e),n=1;n<=e;n++){var u=l.luaL_checkinteger(t,n);l.luaL_argcheck(t,u>=0&&u<=255,"value out of range"),r[n-1]=u}return l.luaL_pushresultsize(a,e),1},g=function(t,e,a,r){return l.luaL_addlstring(r,e,a),0},d=function(t){var e=new l.luaL_Buffer,a=o.lua_toboolean(t,2);return l.luaL_checktype(t,1,o.LUA_TFUNCTION),o.lua_settop(t,1),l.luaL_buffinit(t,e),0!==o.lua_dump(t,g,e,a)?l.luaL_error(t,o.to_luastring("unable to dump given function")):(l.luaL_pushresult(e),1)},L=s.LUA_NUMBER_FRMLEN.length+1,A=function(t){if(Object.is(t,1/0))return o.to_luastring("inf");if(Object.is(t,-1/0))return o.to_luastring("-inf");if(Number.isNaN(t))return o.to_luastring("nan");if(0===t){var e=u(s.LUA_NUMBER_FMT+"x0p+0",t);return Object.is(t,-0)&&(e="-"+e),o.to_luastring(e)}var a="",r=s.frexp(t),n=r[0],l=r[1];return n<0&&(a+="-",n=-n),a+="0x",a+=(2*n).toString(16),l-=1,a+=u("p%+d",l),o.to_luastring(a)},T=function(t,e,a){var r=A(a);if(e[L]==="A".charCodeAt(0))for(var n=0;n<r.length;n++)r[n]=String.fromCharCode(r[n]).toUpperCase().charCodeAt(0);else e[L]!=="a".charCodeAt(0)&&l.luaL_error(t,o.to_luastring("modifiers for format '%%a'/'%%A' not implemented"));return r},b=["-".charCodeAt(0),"+".charCodeAt(0)," ".charCodeAt(0),"#".charCodeAt(0),"0".charCodeAt(0)],x=function(t){return"a".charCodeAt(0)<=t&&t<="z".charCodeAt(0)||t>="A".charCodeAt(0)&&t<="Z".charCodeAt(0)},k=function(t){return"0".charCodeAt(0)<=t&&t<="9".charCodeAt(0)},O=function(t){return 0<=t&&t<=31||127===t},m=function(t){return t>32&&t<127},U=function(t){return/^[a-z]$/.test(String.fromCharCode(t))},E=function(t){return/^[A-Z]$/.test(String.fromCharCode(t))},y=function(t){return/^[a-zA-Z0-9]$/.test(String.fromCharCode(t))},S=function(t){return m(t)&&!y(t)},N=function(t){return/^\s$/.test(String.fromCharCode(t))},R=function(t){return/^[0-9A-Fa-f]$/.test(String.fromCharCode(t))},w=function(t,e,a){l.luaL_addchar(t,'"'.charCodeAt(0));for(var r=0;a--;){if(e[r]==='"'.charCodeAt(0)||e[r]==="\\".charCodeAt(0)||e[r]==="\n".charCodeAt(0))l.luaL_addchar(t,"\\".charCodeAt(0)),l.luaL_addchar(t,e[r]);else if(O(e[r])){var n=void 0;n=k(e[r+1])?o.to_luastring(u("\\%03d",e[r])):o.to_luastring(u("\\%d",e[r])),l.luaL_addstring(t,n)}else l.luaL_addchar(t,e[r]);r++}l.luaL_addchar(t,'"'.charCodeAt(0))},I=function(t){if(o.luastring_indexOf(t,".".charCodeAt(0))<0){var e=s.lua_getlocaledecpoint().charCodeAt(0),a=o.luastring_indexOf(t,e);a&&(t[a]=".")}},M=function(t,e,a){switch(o.lua_type(t,a)){case o.LUA_TSTRING:var r=o.lua_tostring(t,a);w(e,r,r.length);break;case o.LUA_TNUMBER:var n=void 0;if(o.lua_isinteger(t,a)){var i=o.lua_tointeger(t,a),c=i===s.LUA_MININTEGER?"0x%"+s.LUA_INTEGER_FRMLEN+"x":s.LUA_INTEGER_FMT;n=o.to_luastring(u(c,i))}else{var _=o.lua_tonumber(t,a);n=T(t,o.to_luastring("%"+s.LUA_INTEGER_FRMLEN+"a"),_),I(n)}l.luaL_addstring(e,n);break;case o.LUA_TNIL:case o.LUA_TBOOLEAN:l.luaL_tolstring(t,a),l.luaL_addvalue(e);break;default:l.luaL_argerror(t,a,o.to_luastring("value has no literal form",!0))}},C=function(t,e,a,r){for(var n=a;0!==e[n]&&o.luastring_indexOf(b,e[n])>=0;)n++;n-a>=b.length&&l.luaL_error(t,o.to_luastring("invalid format (repeated flags)",!0)),k(e[n])&&n++,k(e[n])&&n++,e[n]===".".charCodeAt(0)&&(n++,k(e[n])&&n++,k(e[n])&&n++),k(e[n])&&l.luaL_error(t,o.to_luastring("invalid format (width or precision too long)",!0)),r[0]="%".charCodeAt(0);for(var u=0;u<n-a+1;u++)r[u+1]=e[a+u];return n},P=function(t,e){for(var a=t.length,r=e.length,n=t[a-1],u=0;u<e.length;u++)t[u+a-1]=e[u];t[a+r-1]=n},D=function(t){var e=o.lua_gettop(t),a=1,r=l.luaL_checkstring(t,a),n=0,i=new l.luaL_Buffer;for(l.luaL_buffinit(t,i);n<r.length;)if(r[n]!==c)l.luaL_addchar(i,r[n++]);else if(r[++n]===c)l.luaL_addchar(i,r[n++]);else{var f=[];switch(++a>e&&l.luaL_argerror(t,a,o.to_luastring("no value",!0)),n=C(t,r,n,f),String.fromCharCode(r[n++])){case"c":l.luaL_addchar(i,l.luaL_checkinteger(t,a));break;case"d":case"i":case"o":case"u":case"x":case"X":var p=l.luaL_checkinteger(t,a);P(f,s.LUA_INTEGER_FRMLEN.split("").map(function(t){return t.charCodeAt(0)})),l.luaL_addstring(i,o.to_luastring(u(String.fromCharCode.apply(String,f),p)));break;case"a":case"A":P(f,s.LUA_INTEGER_FRMLEN.split("").map(function(t){return t.charCodeAt(0)})),l.luaL_addstring(i,T(t,f,l.luaL_checknumber(t,a)));break;case"e":case"E":case"f":case"g":case"G":var v=l.luaL_checknumber(t,a);P(f,s.LUA_INTEGER_FRMLEN.split("").map(function(t){return t.charCodeAt(0)})),l.luaL_addstring(i,o.to_luastring(u(String.fromCharCode.apply(String,f),v)));break;case"q":M(t,i,a);break;case"s":var h=l.luaL_tolstring(t,a);f.length<=2||0===f[2]?l.luaL_addvalue(i):(l.luaL_argcheck(t,h.length===_(h),a,o.to_luastring("string contains zeros",!0)),o.luastring_indexOf(f,".".charCodeAt(0))<0&&h.length>=100?l.luaL_addvalue(i):(l.luaL_addstring(i,o.to_luastring(u(String.fromCharCode.apply(String,f),o.to_jsstring(h)))),o.lua_pop(t,1)));break;default:return l.luaL_error(t,o.to_luastring("invalid option '%%%c' to 'format'"),r[n-1])}}return l.luaL_pushresult(i),1},K=function t(e){r(this,t),this.L=e,this.islittle=!0,this.maxalign=1},B={Kint:0,Kuint:1,Kfloat:2,Kchar:3,Kstring:4,Kzstr:5,Kpadding:6,Kpaddalign:7,Knop:8},G=function(t){return"0".charCodeAt(0)<=t&&t<="9".charCodeAt(0)},V=function(t,e){if(t.off>=t.s.length||!G(t.s[t.off]))return e;var a=0;do{a=10*a+(t.s[t.off++]-"0".charCodeAt(0))}while(t.off<t.s.length&&G(t.s[t.off])&&a<=214748363.8);return a},j=function(t,e,a){var r=V(e,a);return(r>16||r<=0)&&l.luaL_error(t.L,o.to_luastring("integral size (%d) out of limits [1,%d]"),r,16),r},F=function(t,e){var a={opt:NaN,size:NaN};switch(a.opt=e.s[e.off++],a.size=0,a.opt){case"b".charCodeAt(0):return a.size=1,a.opt=B.Kint,a;case"B".charCodeAt(0):return a.size=1,a.opt=B.Kuint,a;case"h".charCodeAt(0):return a.size=2,a.opt=B.Kint,a;case"H".charCodeAt(0):return a.size=2,a.opt=B.Kuint,a;case"l".charCodeAt(0):return a.size=4,a.opt=B.Kint,a;case"L".charCodeAt(0):return a.size=4,a.opt=B.Kuint,a;case"j".charCodeAt(0):return a.size=4,a.opt=B.Kint,a;case"J".charCodeAt(0):case"T".charCodeAt(0):return a.size=4,a.opt=B.Kuint,a;case"f".charCodeAt(0):return a.size=4,a.opt=B.Kfloat,a;case"d".charCodeAt(0):case"n".charCodeAt(0):return a.size=8,a.opt=B.Kfloat,a;case"i".charCodeAt(0):return a.size=j(t,e,4),a.opt=B.Kint,a;case"I".charCodeAt(0):return a.size=j(t,e,4),a.opt=B.Kuint,a;case"s".charCodeAt(0):return a.size=j(t,e,4),a.opt=B.Kstring,a;case"c".charCodeAt(0):return a.size=V(e,-1),-1===a.size&&l.luaL_error(t.L,o.to_luastring("missing size for format option 'c'")),a.opt=B.Kchar,a;case"z".charCodeAt(0):return a.opt=B.Kzstr,a;case"x".charCodeAt(0):return a.size=1,a.opt=B.Kpadding,a;case"X".charCodeAt(0):return a.opt=B.Kpaddalign,a;case" ".charCodeAt(0):break;case"<".charCodeAt(0):t.islittle=!0;break;case">".charCodeAt(0):t.islittle=!1;break;case"=".charCodeAt(0):t.islittle=!0;break;case"!".charCodeAt(0):t.maxalign=j(t,e,8);break;default:l.luaL_error(t.L,o.to_luastring("invalid format option '%c'"),a.opt)}return a.opt=B.Knop,a},X=function(t,e,a){var r={opt:NaN,size:NaN,ntoalign:NaN},n=F(t,a);r.size=n.size,r.opt=n.opt;var u=r.size;if(r.opt===B.Kpaddalign)if(a.off>=a.s.length||0===a.s[a.off])l.luaL_argerror(t.L,1,o.to_luastring("invalid next option for option 'X'",!0));else{var s=F(t,a);u=s.size,s=s.opt,s!==B.Kchar&&0!==u||l.luaL_argerror(t.L,1,o.to_luastring("invalid next option for option 'X'",!0))}return u<=1||r.opt===B.Kchar?r.ntoalign=0:(u>t.maxalign&&(u=t.maxalign),0!=(u&u-1)&&l.luaL_argerror(t.L,1,o.to_luastring("format asks for alignment not power of 2",!0)),r.ntoalign=u-(e&u-1)&u-1),r},H=function(t,e,a,r,n){var u=l.luaL_prepbuffsize(t,r);u[a?0:r-1]=255&e;for(var o=1;o<r;o++)e>>=8,u[a?o:r-1-o]=255&e;if(n&&r>4)for(var s=4;s<r;s++)u[a?s:r-1-s]=255;l.luaL_addsize(t,r)},z=function(t){var e=new l.luaL_Buffer,a=new K(t),r={s:l.luaL_checkstring(t,1),off:0},n=1,u=0;for(o.lua_pushnil(t),l.luaL_buffinit(t,e);r.off<r.s.length;){var s=X(a,u,r),i=s.opt,c=s.size,_=s.ntoalign;for(u+=_+c;_-- >0;)l.luaL_addchar(e,0);switch(n++,i){case B.Kint:var f=l.luaL_checkinteger(t,n);if(c<4){var p=1<<8*c-1;l.luaL_argcheck(t,-p<=f&&f<p,n,o.to_luastring("integer overflow",!0))}H(e,f,a.islittle,c,f<0);break;case B.Kuint:var v=l.luaL_checkinteger(t,n);c<4&&l.luaL_argcheck(t,v>>>0<1<<8*c,n,o.to_luastring("unsigned overflow",!0)),H(e,v>>>0,a.islittle,c,!1);break;case B.Kfloat:var h=l.luaL_prepbuffsize(e,c),g=l.luaL_checknumber(t,n),d=new DataView(h.buffer,h.byteOffset,h.byteLength);4===c?d.setFloat32(0,g,a.islittle):d.setFloat64(0,g,a.islittle),l.luaL_addsize(e,c);break;case B.Kchar:var L=l.luaL_checkstring(t,n),A=L.length;for(l.luaL_argcheck(t,A<=c,n,o.to_luastring("string longer than given size",!0)),l.luaL_addlstring(e,L,A);A++<c;)l.luaL_addchar(e,0);break;case B.Kstring:var T=l.luaL_checkstring(t,n),b=T.length;l.luaL_argcheck(t,c>=4||b<1<<8*c,n,o.to_luastring("string length does not fit in given size",!0)),H(e,b,a.islittle,c,0),l.luaL_addlstring(e,T,b),u+=b;break;case B.Kzstr:var x=l.luaL_checkstring(t,n),k=x.length;l.luaL_argcheck(t,o.luastring_indexOf(x,0)<0,n,o.to_luastring("strings contains zeros",!0)),l.luaL_addlstring(e,x,k),l.luaL_addchar(e,0),u+=k+1;break;case B.Kpadding:l.luaL_addchar(e,0);case B.Kpaddalign:case B.Knop:n--}}return l.luaL_pushresult(e),1},Y=function(t){for(var e=l.luaL_checkstring(t,1),a=e.length,r=new Uint8Array(a),n=0;n<a;n++)r[n]=e[a-1-n];return o.lua_pushstring(t,r),1},Z=function(t){var e=l.luaL_checkstring(t,1);return o.lua_pushstring(t,o.to_luastring(o.to_jsstring(e).toLowerCase())),1},J=function(t){var e=l.luaL_checkstring(t,1);return o.lua_pushstring(t,o.to_luastring(o.to_jsstring(e).toUpperCase())),1},q=function(t){var e=l.luaL_checkstring(t,1),a=e.length,r=l.luaL_checkinteger(t,2),n=l.luaL_optstring(t,3,o.to_luastring("")),u=n.length;if(r<=0)o.lua_pushliteral(t,"");else{if(a+u<a||a+u>2147483647/r)return l.luaL_error(t,o.to_luastring("resulting string too large"));for(var s=r*a+(r-1)*u,i=new l.luaL_Buffer,c=l.luaL_buffinitsize(t,i,s),_=0;r-- >1;)c.set(e,_),_+=a,u>0&&(c.set(n,_),_+=u);c.set(e,_),l.luaL_pushresultsize(i,s)}return 1},W=function(t){var e=l.luaL_checkstring(t,1),a=e.length,r=f(l.luaL_optinteger(t,2,1),a),n=f(l.luaL_optinteger(t,3,r),a);if(r<1&&(r=1),n>a&&(n=a),r>n)return 0;if(n-r>=Number.MAX_SAFE_INTEGER)return l.luaL_error(t,o.to_luastring("string slice too long",!0));var u=n-r+1;l.luaL_checkstack(t,u,o.to_luastring("string slice too long",!0));for(var s=0;s<u;s++)o.lua_pushinteger(t,e[r+s-1]);return u},Q=function(t){for(var e=new K(t),a={s:l.luaL_checkstring(t,1),off:0},r=0;a.off<a.s.length;){var n=X(e,r,a),u=n.opt,s=n.size;switch(s+=n.ntoalign,l.luaL_argcheck(t,r<=2147483647-s,1,o.to_luastring("format result too large",!0)),r+=s,u){case B.Kstring:case B.Kzstr:l.luaL_argerror(t,1,o.to_luastring("variable-length format",!0))}}return o.lua_pushinteger(t,r),1},$=function(t,e,a,r,n){for(var u=0,s=r<=4?r:4,i=s-1;i>=0;i--)u<<=8,u|=e[a?i:r-1-i];if(r<4){if(n){var c=1<<8*r-1;u=(u^c)-c}}else if(r>4)for(var _=!n||u>=0?0:255,f=s;f<r;f++)e[a?f:r-1-f]!==_&&l.luaL_error(t,o.to_luastring("%d-byte integer does not fit into Lua Integer"),r);return u},tt=function(t,e,a,r){n(e.length>=r);for(var u=new DataView(new ArrayBuffer(r)),l=0;l<r;l++)u.setUint8(l,e[l],a);return 4==r?u.getFloat32(0,a):u.getFloat64(0,a)},et=function(t){var e=new K(t),a={s:l.luaL_checkstring(t,1),off:0},r=l.luaL_checkstring(t,2),n=r.length,u=f(l.luaL_optinteger(t,3,1),n)-1,s=0;for(l.luaL_argcheck(t,u<=n&&u>=0,3,o.to_luastring("initial position out of string",!0));a.off<a.s.length;){var i=X(e,u,a),c=i.opt,_=i.size,p=i.ntoalign;switch(u+p+_>n&&l.luaL_argerror(t,2,o.to_luastring("data string too short",!0)),u+=p,l.luaL_checkstack(t,2,o.to_luastring("too many results",!0)),s++,c){case B.Kint:case B.Kuint:var v=$(t,r.subarray(u),e.islittle,_,c===B.Kint);o.lua_pushinteger(t,v);break;case B.Kfloat:var h=tt(0,r.subarray(u),e.islittle,_);o.lua_pushnumber(t,h);break;case B.Kchar:o.lua_pushstring(t,r.subarray(u,u+_));break;case B.Kstring:var g=$(t,r.subarray(u),e.islittle,_,0);l.luaL_argcheck(t,u+g+_<=n,2,o.to_luastring("data string too short",!0)),o.lua_pushstring(t,r.subarray(u+_,u+_+g)),u+=g;break;case B.Kzstr:var d=o.luastring_indexOf(r,0,u);-1===d&&(d=r.length-u),o.lua_pushstring(t,r.subarray(u,d)),u=d+1;break;case B.Kpaddalign:case B.Kpadding:case B.Knop:s--}u+=_}return o.lua_pushinteger(t,u+1),s+1},at=["^".charCodeAt(0),"$".charCodeAt(0),"*".charCodeAt(0),"+".charCodeAt(0),"?".charCodeAt(0),".".charCodeAt(0),"(".charCodeAt(0),"[".charCodeAt(0),"%".charCodeAt(0),"-".charCodeAt(0)],rt=function t(e){r(this,t),this.src=null,this.src_init=null,this.src_end=null,this.p=null,this.p_end=null,this.L=e,this.matchdepth=NaN,this.level=NaN,this.capture=[]},nt=function(t,e){return e-="1".charCodeAt(0),e<0||e>=t.level||-1===t.capture[e].len?l.luaL_error(t.L,o.to_luastring("invalid capture index %%%d"),e+1):e},ut=function(t){var e=t.level;for(e--;e>=0;e--)if(-1===t.capture[e].len)return e;return l.luaL_error(t.L,o.to_luastring("invalid pattern capture"))},lt=function(t,e){switch(t.p[e++]){case c:return e===t.p_end&&l.luaL_error(t.L,o.to_luastring("malformed pattern (ends with '%%')")),e+1;case"[".charCodeAt(0):t.p[e]==="^".charCodeAt(0)&&e++;do{e===t.p_end&&l.luaL_error(t.L,o.to_luastring("malformed pattern (missing ']')")),t.p[e++]===c&&e<t.p_end&&e++}while(t.p[e]!=="]".charCodeAt(0));return e+1;default:return e}},ot=function(t,e){var a=void 0;switch(String.fromCharCode(e).toLowerCase().charCodeAt(0)){case"a".charCodeAt(0):a=x(t);break;case"c".charCodeAt(0):a=O(t);break;case"d".charCodeAt(0):a=k(t);break;case"g".charCodeAt(0):a=m(t);break;case"l".charCodeAt(0):a=U(t);break;case"p".charCodeAt(0):a=S(t);break;case"s".charCodeAt(0):a=N(t);break;case"u".charCodeAt(0):a=E(t);break;case"w".charCodeAt(0):a=y(t);break;case"x".charCodeAt(0):a=R(t);break;case"z".charCodeAt(0):a=0===t;break;default:return e===t}return U(e)?a:!a},st=function(t,e,a,r){var n=!0;for(t.p[a+1]==="^".charCodeAt(0)&&(n=!1,a++);++a<r;)if(t.p[a]===c){if(a++,ot(e,t.p[a]))return n}else if(t.p[a+1]==="-".charCodeAt(0)&&a+2<r){if(a+=2,t.p[a-2]<=e&&e<=t.p[a])return n}else if(t.p[a]===e)return n;return!n},it=function(t,e,a,r){if(e>=t.src_end)return!1;var n=t.src[e];switch(t.p[a]){case".".charCodeAt(0):return!0;case c:return ot(n,t.p[a+1]);case"[".charCodeAt(0):return st(t,n,a,r-1);default:return t.p[a]===n}},ct=function(t,e,a){if(a>=t.p_end-1&&l.luaL_error(t.L,o.to_luastring("malformed pattern (missing arguments to '%%b'")),t.src[e]!==t.p[a])return null;for(var r=t.p[a],n=t.p[a+1],u=1;++e<t.src_end;)if(t.src[e]===n){if(0==--u)return e+1}else t.src[e]===r&&u++;return null},_t=function(t,e,a,r){for(var n=0;it(t,e+n,a,r);)n++;for(;n>=0;){var u=dt(t,e+n,r+1);if(u)return u;n--}return null},ft=function(t,e,a,r){for(;;){var n=dt(t,e,r+1);if(null!==n)return n;if(!it(t,e,a,r))return null;e++}},pt=function(t,e,a,r){var n=t.level;n>=32&&l.luaL_error(t.L,o.to_luastring("too many captures",!0)),t.capture[n]=t.capture[n]?t.capture[n]:{},t.capture[n].init=e,t.capture[n].len=r,t.level=n+1;var u=void 0;return null===(u=dt(t,e,a))&&t.level--,u},vt=function(t,e,a){var r=ut(t);t.capture[r].len=e-t.capture[r].init;var n=void 0;return null===(n=dt(t,e,a))&&(t.capture[r].len=-1),n},ht=function(t,e,a,r,n){if(0===n)return!0;var u=e+n;t:for(;;){if(-1===(e=o.luastring_indexOf(t,a[r],e))||e>=u)return!1;for(var l=1;l<n;l++)if(t[e+l]!==a[r+l]){e++;continue t}return!0}},gt=function(t,e,a){a=nt(t,a);var r=t.capture[a].len;return t.src_end-e>=r&&ht(t.src,t.capture[a].init,t.src,e,r)?e+r:null},dt=function t(e,a,r){var n=!1,u=!0;for(0==e.matchdepth--&&l.luaL_error(e.L,o.to_luastring("pattern too complex",!0));u||n;)if(u=!1,r!==e.p_end)switch(n?"x".charCodeAt(0):e.p[r]){case"(".charCodeAt(0):a=e.p[r+1]===")".charCodeAt(0)?pt(e,a,r+2,-2):pt(e,a,r+1,-1);break;case")".charCodeAt(0):a=vt(e,a,r+1);break;case"$".charCodeAt(0):if(r+1!==e.p_end){n=!0;break}a=e.src.length-a==0?a:null;break;case c:switch(e.p[r+1]){case"b".charCodeAt(0):a=ct(e,a,r+2),null!==a&&(r+=4,u=!0);break;case"f".charCodeAt(0):r+=2,e.p[r]!=="[".charCodeAt(0)&&l.luaL_error(e.L,o.to_luastring("missing '[' after '%%f' in pattern"));var s=lt(e,r),i=a===e.src_init?0:e.src[a-1];if(!st(e,i,r,s-1)&&st(e,a===e.src_end?0:e.src[a],r,s-1)){r=s,u=!0;break}a=null;break;case"0".charCodeAt(0):case"1".charCodeAt(0):case"2".charCodeAt(0):case"3".charCodeAt(0):case"4".charCodeAt(0):case"5".charCodeAt(0):case"6".charCodeAt(0):case"7".charCodeAt(0):case"8".charCodeAt(0):case"9".charCodeAt(0):a=gt(e,a,e.p[r+1]),null!==a&&(r+=2,u=!0);break;default:n=!0}break;default:n=!1;var _=lt(e,r);if(it(e,a,r,_))switch(e.p[_]){case"?".charCodeAt(0):var f=void 0;null!==(f=t(e,a+1,_+1))?a=f:(r=_+1,u=!0);break;case"+".charCodeAt(0):a++;case"*".charCodeAt(0):a=_t(e,a,r,_);break;case"-".charCodeAt(0):a=ft(e,a,r,_);break;default:a++,r=_,u=!0}else{if(e.p[_]==="*".charCodeAt(0)||e.p[_]==="?".charCodeAt(0)||e.p[_]==="-".charCodeAt(0)){r=_+1,u=!0;break}a=null}}return e.matchdepth++,a},Lt=function(t,e,a,r){if(e>=t.level)0===e?o.lua_pushlstring(t.L,t.src.subarray(a,r),r-a):l.luaL_error(t.L,o.to_luastring("invalid capture index %%%d"),e+1);else{var n=t.capture[e].len;-1===n&&l.luaL_error(t.L,o.to_luastring("unfinished capture",!0)),-2===n?o.lua_pushinteger(t.L,t.capture[e].init-t.src_init+1):o.lua_pushlstring(t.L,t.src.subarray(t.capture[e].init),n)}},At=function(t,e,a){var r=0===t.level&&t.src.subarray(e)?1:t.level;l.luaL_checkstack(t.L,r,o.to_luastring("too many catpures",!0));for(var n=0;n<r;n++)Lt(t,n,e,a);return r},Tt=function(t,e){for(var a=0;a<e;a++)if(-1!==at.indexOf(t[a]))return!1;return!0},bt=function(t,e,a,r,n,u){t.L=e,t.matchdepth=200,t.src=a,t.src_init=0,t.src_end=r,t.p=n,t.p_end=u},xt=function(t){t.level=0,n(200===t.matchdepth)},kt=function(t,e,a){var r=a>>>0,n=e.length;if(0===n)return r;t:for(;-1!==(r=t.indexOf(e[0],r));){for(var u=1;u<n;u++)if(t[r+u]!==e[u]){r++;continue t}return r}return-1},Ot=function(t,e){var a=l.luaL_checkstring(t,1),r=l.luaL_checkstring(t,2),n=a.length,u=r.length,s=f(l.luaL_optinteger(t,3,1),n);if(s<1)s=1;else if(s>n+1)return o.lua_pushnil(t),1;if(e&&(o.lua_toboolean(t,4)||Tt(r,u))){var i=kt(a.subarray(s-1),r,0);if(i>-1)return o.lua_pushinteger(t,s+i),o.lua_pushinteger(t,s+i+u-1),2}else{var c=new rt(t),_=s-1,p=r[0]==="^".charCodeAt(0);p&&(r=r.subarray(1),u--),bt(c,t,a,n,r,u);do{var v=void 0;if(xt(c),null!==(v=dt(c,_,0)))return e?(o.lua_pushinteger(t,_+1),o.lua_pushinteger(t,v),At(c,null,0)+2):At(c,_,v)}while(_++<c.src_end&&!p)}return o.lua_pushnil(t),1},mt=function(t){return Ot(t,1)},Ut=function(t){return Ot(t,0)},Et=function t(){r(this,t),this.src=NaN,this.p=NaN,this.lastmatch=NaN,this.ms=new rt},yt=function(t){var e=o.lua_touserdata(t,o.lua_upvalueindex(3));e.ms.L=t;for(var a=e.src;a<=e.ms.src_end;a++){xt(e.ms);var r=void 0;if(null!==(r=dt(e.ms,a,e.p))&&r!==e.lastmatch)return e.src=e.lastmatch=r,At(e.ms,a,r)}return 0},St=function(t){var e=l.luaL_checkstring(t,1),a=l.luaL_checkstring(t,2),r=e.length,n=a.length;o.lua_settop(t,2);var u=new Et;return o.lua_pushlightuserdata(t,u),bt(u.ms,t,e,r,a,n),u.src=0,u.p=0,u.lastmatch=null,o.lua_pushcclosure(t,yt,3),1},Nt=function(t,e,a,r){for(var n=t.L,u=o.lua_tostring(n,3),s=u.length,i=0;i<s;i++)u[i]!==c?l.luaL_addchar(e,u[i]):(i++,k(u[i])?u[i]==="0".charCodeAt(0)?l.luaL_addlstring(e,t.src.subarray(a,r),r-a):(Lt(t,u[i]-"1".charCodeAt(0),a,r),l.luaL_tolstring(n,-1),o.lua_remove(n,-2),l.luaL_addvalue(e)):(u[i]!==c&&l.luaL_error(n,o.to_luastring("invalid use of '%c' in replacement string"),c),l.luaL_addchar(e,u[i])))},Rt=function(t,e,a,r,n){var u=t.L;switch(n){case o.LUA_TFUNCTION:o.lua_pushvalue(u,3);var s=At(t,a,r);o.lua_call(u,s,1);break;case o.LUA_TTABLE:Lt(t,0,a,r),o.lua_gettable(u,3);break;default:return void Nt(t,e,a,r)}o.lua_toboolean(u,-1)?o.lua_isstring(u,-1)||l.luaL_error(u,o.to_luastring("invalid replacement value (a %s)"),l.luaL_typename(u,-1)):(o.lua_pop(u,1),o.lua_pushlstring(u,t.src.subarray(a,r),r-a)),l.luaL_addvalue(e)},wt=function(t){var e=l.luaL_checkstring(t,1),a=e.length,r=l.luaL_checkstring(t,2),n=r.length,u=null,s=o.lua_type(t,3),i=l.luaL_optinteger(t,4,a+1),c=r[0]==="^".charCodeAt(0),_=0,f=new rt(t),p=new l.luaL_Buffer;for(l.luaL_argcheck(t,s===o.LUA_TNUMBER||s===o.LUA_TSTRING||s===o.LUA_TFUNCTION||s===o.LUA_TTABLE,3,o.to_luastring("string/function/table expected",!0)),l.luaL_buffinit(t,p),c&&(r=r.subarray(1),n--),bt(f,t,e,a,r,n),e=0,r=0;_<i;){var v=void 0;if(xt(f),null!==(v=dt(f,e,r))&&v!==u)_++,Rt(f,p,e,v,s),e=u=v;else{if(!(e<f.src_end))break;l.luaL_addchar(p,f.src[e++])}if(c)break}return l.luaL_addlstring(p,f.src.subarray(e,f.src_end),f.src_end-e),l.luaL_pushresult(p),o.lua_pushinteger(t,_),2},It={byte:W,char:h,dump:d,find:mt,format:D,gmatch:St,gsub:wt,len:v,lower:Z,match:Ut,pack:z,packsize:Q,rep:q,reverse:Y,sub:p,unpack:et,upper:J},Mt=function(t){o.lua_createtable(t,0,1),o.lua_pushliteral(t,""),o.lua_pushvalue(t,-2),o.lua_setmetatable(t,-2),o.lua_pop(t,1),o.lua_pushvalue(t,-2),o.lua_setfield(t,-2,o.to_luastring("__index",!0)),o.lua_pop(t,1)},Ct=function(t){return l.luaL_newlib(t,It),Mt(t),1};t.exports.luaopen_string=Ct},function(t,e,a){"use strict";var r=a(0),n=a(2),u=a(4),l=a(6),o=function(t,e,a){return n.lua_pushstring(t,e),n.lua_rawget(t,-a)!==n.LUA_TNIL},s=function(t,e,a){if(n.lua_type(t,e)!==n.LUA_TTABLE){var r=1;!n.lua_getmetatable(t,e)||1&a&&!o(t,n.to_luastring("__index",!0),++r)||2&a&&!o(t,n.to_luastring("__newindex",!0),++r)||4&a&&!o(t,n.to_luastring("__len",!0),++r)?u.luaL_checktype(t,e,n.LUA_TTABLE):n.lua_pop(t,r)}},i=function(t,e,a){return s(t,e,4|a),u.luaL_len(t,e)},c=function(t,e,a){n.lua_geti(t,1,a),n.lua_isstring(t,-1)||u.luaL_error(t,n.to_luastring("invalid value (%s) at index %d in table for 'concat'"),u.luaL_typename(t,-1),a),u.luaL_addvalue(e)},_=function(t){var e=i(t,1,3)+1,a=void 0;switch(n.lua_gettop(t)){case 2:a=e;break;case 3:a=u.luaL_checkinteger(t,2),u.luaL_argcheck(t,1<=a&&a<=e,2,n.to_luastring("position out of bounds",!0));for(var r=e;r>a;r--)n.lua_geti(t,1,r-1),n.lua_seti(t,1,r);break;default:return u.luaL_error(t,n.to_luastring("wrong number of arguments to 'insert'",!0))}return n.lua_seti(t,1,a),0},f=function(t){var e=i(t,1,3),a=u.luaL_optinteger(t,2,e);for(a!==e&&u.luaL_argcheck(t,1<=a&&a<=e+1,1,n.to_luastring("position out of bounds",!0)),n.lua_geti(t,1,a);a<e;a++)n.lua_geti(t,1,a+1),n.lua_seti(t,1,a);return n.lua_pushnil(t),n.lua_seti(t,1,a),1},p=function(t){var e=u.luaL_checkinteger(t,2),a=u.luaL_checkinteger(t,3),r=u.luaL_checkinteger(t,4),o=n.lua_isnoneornil(t,5)?1:5;if(s(t,1,1),s(t,o,2),a>=e){u.luaL_argcheck(t,e>0||a<l.LUA_MAXINTEGER+e,3,n.to_luastring("too many elements to move",!0));var i=a-e+1;if(u.luaL_argcheck(t,r<=l.LUA_MAXINTEGER-i+1,4,n.to_luastring("destination wrap around",!0)),r>a||r<=e||1!==o&&1!==n.lua_compare(t,1,o,n.LUA_OPEQ))for(var c=0;c<i;c++)n.lua_geti(t,1,e+c),n.lua_seti(t,o,r+c);else for(var _=i-1;_>=0;_--)n.lua_geti(t,1,e+_),n.lua_seti(t,o,r+_)}return n.lua_pushvalue(t,o),1},v=function(t){var e=i(t,1,1),a=u.luaL_optlstring(t,2,n.to_luastring("")),r=a.length,l=u.luaL_optinteger(t,3,1);e=u.luaL_optinteger(t,4,e);var o=new u.luaL_Buffer;for(u.luaL_buffinit(t,o);l<e;l++)c(t,o,l),u.luaL_addlstring(o,a,r);return l===e&&c(t,o,l),u.luaL_pushresult(o),1},h=function(t){var e=n.lua_gettop(t);n.lua_createtable(t,e,1),n.lua_insert(t,1);for(var a=e;a>=1;a--)n.lua_seti(t,1,a);return n.lua_pushinteger(t,e),n.lua_setfield(t,1,n.to_luastring("n")),1},g=function(t){var e=u.luaL_optinteger(t,2,1),a=u.luaL_opt(t,u.luaL_checkinteger,3,u.luaL_len(t,1));if(e>a)return 0;var r=a-e;if(r>=Number.MAX_SAFE_INTEGER||!n.lua_checkstack(t,++r))return u.luaL_error(t,n.to_luastring("too many results to unpack",!0));for(;e<a;e++)n.lua_geti(t,1,e);return n.lua_geti(t,1,a),r},d=function(){return Math.floor(1*Math.random()<<32)},L=function(t,e,a){n.lua_seti(t,1,e),n.lua_seti(t,1,a)},A=function(t,e,a){if(n.lua_isnil(t,2))return n.lua_compare(t,e,a,n.LUA_OPLT);n.lua_pushvalue(t,2),n.lua_pushvalue(t,e-1),n.lua_pushvalue(t,a-2),n.lua_call(t,2,1);var r=n.lua_toboolean(t,-1);return n.lua_pop(t,1),r},T=function(t,e,a){for(var r=e,l=a-1;;){for(;n.lua_geti(t,1,++r),A(t,-1,-2);)r==a-1&&u.luaL_error(t,n.to_luastring("invalid order function for sorting")),n.lua_pop(t,1);for(;n.lua_geti(t,1,--l),A(t,-3,-1);)l<r&&u.luaL_error(t,n.to_luastring("invalid order function for sorting")),n.lua_pop(t,1);if(l<r)return n.lua_pop(t,1),L(t,a-1,r),r;L(t,r,l)}},b=function(t,e,a){var n=Math.floor((e-t)/4),u=a%(2*n)+(t+n);return r(t+n<=u&&u<=e-n),u},x=function t(e,a,r,u){for(;a<r;){if(n.lua_geti(e,1,a),n.lua_geti(e,1,r),A(e,-1,-2)?L(e,a,r):n.lua_pop(e,2),r-a==1)return;var l=void 0;if(l=r-a<100||0===u?Math.floor((a+r)/2):b(a,r,u),n.lua_geti(e,1,l),n.lua_geti(e,1,a),A(e,-2,-1)?L(e,l,a):(n.lua_pop(e,1),n.lua_geti(e,1,r),A(e,-1,-2)?L(e,l,r):n.lua_pop(e,2)),r-a==2)return;n.lua_geti(e,1,l),n.lua_pushvalue(e,-1),n.lua_geti(e,1,r-1),L(e,l,r-1),l=T(e,a,r);var o=void 0;l-a<r-l?(t(e,a,l-1,u),o=l-a,a=l+1):(t(e,l+1,r,u),o=r-l,r=l-1),(r-a)/128>o&&(u=d())}},k=function(t){var e=i(t,1,3);return e>1&&(u.luaL_argcheck(t,e<l.LUA_MAXINTEGER,1,n.to_luastring("array too big",!0)),n.lua_isnoneornil(t,2)||u.luaL_checktype(t,2,n.LUA_TFUNCTION),n.lua_settop(t,2),x(t,1,e,0)),0},O={concat:v,insert:_,move:p,pack:h,remove:f,sort:k,unpack:g},m=function(t){return u.luaL_newlib(t,O),1};t.exports.luaopen_table=m},function(t,e,a){"use strict";var r=a(2),n=a(4),u=function(t){return 128==(192&t)},l=function(t,e){return t>=0?t:0-t>e?0:e+t+1},o=[255,127,2047,65535],s=function(t,e){var a=t[e],r=0;if(a<128)r=a;else{for(var n=0;64&a;){var u=t[e+ ++n];if(128!=(192&u))return null;r=r<<6|63&u,a<<=1}if(r|=(127&a)<<5*n,n>3||r>1114111||r<=o[n])return null;e+=n}return{code:r,pos:e+1}},i=function(t){var e=0,a=n.luaL_checkstring(t,1),u=a.length,o=l(n.luaL_optinteger(t,2,1),u),i=l(n.luaL_optinteger(t,3,-1),u);for(n.luaL_argcheck(t,1<=o&&--o<=u,2,r.to_luastring("initial position out of string")),n.luaL_argcheck(t,--i<u,3,r.to_luastring("final position out of string"));o<=i;){var c=s(a,o);if(null===c)return r.lua_pushnil(t),r.lua_pushinteger(t,o+1),2;o=c.pos,e++}return r.lua_pushinteger(t,e),1},c=r.to_luastring("%U"),_=function(t,e){var a=n.luaL_checkinteger(t,e);n.luaL_argcheck(t,0<=a&&a<=1114111,e,r.to_luastring("value out of range",!0)),r.lua_pushfstring(t,c,a)},f=function(t){var e=r.lua_gettop(t);if(1===e)_(t,1);else{var a=new n.luaL_Buffer;n.luaL_buffinit(t,a);for(var u=1;u<=e;u++)_(t,u),n.luaL_addvalue(a);n.luaL_pushresult(a)}return 1},p=function(t){var e=n.luaL_checkstring(t,1),a=n.luaL_checkinteger(t,2),o=a>=0?1:e.length+1;if(o=l(n.luaL_optinteger(t,3,o),e.length),n.luaL_argcheck(t,1<=o&&--o<=e.length,3,r.to_luastring("position out of range",!0)),0===a)for(;o>0&&u(e[o]);)o--;else if(u(e[o])&&n.luaL_error(t,r.to_luastring("initial position is a continuation byte",!0)),a<0)for(;a<0&&o>0;){do{o--}while(o>0&&u(e[o]));a++}else for(a--;a>0&&o<e.length;){do{o++}while(u(e[o]));a--}return 0===a?r.lua_pushinteger(t,o+1):r.lua_pushnil(t),1},v=function(t){var e=n.luaL_checkstring(t,1),a=l(n.luaL_optinteger(t,2,1),e.length),u=l(n.luaL_optinteger(t,3,a),e.length);if(n.luaL_argcheck(t,a>=1,2,r.to_luastring("out of range",!0)),n.luaL_argcheck(t,u<=e.length,3,r.to_luastring("out of range",!0)),a>u)return 0;if(u-a>=Number.MAX_SAFE_INTEGER)return n.luaL_error(t,r.to_luastring("string slice too long",!0));var o=u-a+1;for(n.luaL_checkstack(t,o,r.to_luastring("string slice too long",!0)),o=0,a-=1;a<u;){var i=s(e,a);if(null===i)return n.luaL_error(t,r.to_luastring("invalid UTF-8 code",!0));r.lua_pushinteger(t,i.code),a=i.pos,o++}return o},h=function(t){var e=n.luaL_checkstring(t,1),a=e.length,l=r.lua_tointeger(t,2)-1;if(l<0)l=0;else if(l<a)for(l++;u(e[l]);)l++;if(l>=a)return 0;var o=s(e,l);return null===o||u(e[o.pos])?n.luaL_error(t,r.to_luastring("invalid UTF-8 code",!0)):(r.lua_pushinteger(t,l+1),r.lua_pushinteger(t,o.code),2)},g=function(t){return n.luaL_checkstring(t,1),r.lua_pushcfunction(t,h),r.lua_pushvalue(t,1),r.lua_pushinteger(t,0),3},d={char:f,codepoint:v,codes:g,len:i,offset:p},L=r.luastring_of(91,0,45,127,194,45,244,93,91,128,45,191,93,42),A=function(t){return n.luaL_newlib(t,d),r.lua_pushstring(t,L),r.lua_setfield(t,-2,r.to_luastring("charpattern",!0)),1};t.exports.luaopen_utf8=A},function(t,e,a){"use strict";var r=a(0),n=a(2),u=a(4),l=function(t,e,a){t===e||n.lua_checkstack(e,a)||u.luaL_error(t,n.to_luastring("stack overflow",!0))},o=function(t){return n.lua_pushvalue(t,n.LUA_REGISTRYINDEX),1},s=function(t){return u.luaL_checkany(t,1),n.lua_getmetatable(t,1)||n.lua_pushnil(t),1},i=function(t){var e=n.lua_type(t,2);return u.luaL_argcheck(t,e==n.LUA_TNIL||e==n.LUA_TTABLE,2,n.to_luastring("nil or table expected",!0)),n.lua_settop(t,2),n.lua_setmetatable(t,1),1},c=function(t){return n.lua_type(t,1)!==n.LUA_TUSERDATA?n.lua_pushnil(t):n.lua_getuservalue(t,1),1},_=function(t){return u.luaL_checktype(t,1,n.LUA_TUSERDATA),u.luaL_checkany(t,2),n.lua_settop(t,2),n.lua_setuservalue(t,1),1},f=function(t){return n.lua_isthread(t,1)?{arg:1,thread:n.lua_tothread(t,1)}:{arg:0,thread:t}},p=function(t,e,a){n.lua_pushstring(t,a),n.lua_setfield(t,-2,e)},v=function(t,e,a){n.lua_pushinteger(t,a),n.lua_setfield(t,-2,e)},h=function(t,e,a){n.lua_pushboolean(t,a),n.lua_setfield(t,-2,e)},g=function(t,e,a){t==e?n.lua_rotate(t,-2,1):n.lua_xmove(e,t,1),n.lua_setfield(t,-2,a)},d=function(t){var e=new n.lua_Debug,a=f(t),r=a.arg,o=a.thread,s=u.luaL_optstring(t,r+2,n.to_luastring("flnStu",!0));if(l(t,o,3),n.lua_isfunction(t,r+1))s=n.lua_pushfstring(t,n.to_luastring(">%s"),s),n.lua_pushvalue(t,r+1),n.lua_xmove(t,o,1);else if(!n.lua_getstack(o,u.luaL_checkinteger(t,r+1),e))return n.lua_pushnil(t),1;return n.lua_getinfo(o,s,e)||u.luaL_argerror(t,r+2,n.to_luastring("invalid option",!0)),n.lua_newtable(t),n.luastring_indexOf(s,"S".charCodeAt(0))>-1&&(p(t,n.to_luastring("source",!0),e.source),p(t,n.to_luastring("short_src",!0),e.short_src),v(t,n.to_luastring("linedefined",!0),e.linedefined),v(t,n.to_luastring("lastlinedefined",!0),e.lastlinedefined),p(t,n.to_luastring("what",!0),e.what)),n.luastring_indexOf(s,"l".charCodeAt(0))>-1&&v(t,n.to_luastring("currentline",!0),e.currentline),n.luastring_indexOf(s,"u".charCodeAt(0))>-1&&(v(t,n.to_luastring("nups",!0),e.nups),v(t,n.to_luastring("nparams",!0),e.nparams),h(t,n.to_luastring("isvararg",!0),e.isvararg)),n.luastring_indexOf(s,"n".charCodeAt(0))>-1&&(p(t,n.to_luastring("name",!0),e.name),p(t,n.to_luastring("namewhat",!0),e.namewhat)),n.luastring_indexOf(s,"t".charCodeAt(0))>-1&&h(t,n.to_luastring("istailcall",!0),e.istailcall),n.luastring_indexOf(s,"L".charCodeAt(0))>-1&&g(t,o,n.to_luastring("activelines",!0)),n.luastring_indexOf(s,"f".charCodeAt(0))>-1&&g(t,o,n.to_luastring("func",!0)),1},L=function(t){var e=f(t),a=e.thread,r=e.arg,o=new n.lua_Debug,s=u.luaL_checkinteger(t,r+2);if(n.lua_isfunction(t,r+1))return n.lua_pushvalue(t,r+1),n.lua_pushstring(t,n.lua_getlocal(t,null,s)),1;var i=u.luaL_checkinteger(t,r+1);if(!n.lua_getstack(a,i,o))return u.luaL_argerror(t,r+1,n.to_luastring("level out of range",!0));l(t,a,1);var c=n.lua_getlocal(a,o,s);return c?(n.lua_xmove(a,t,1),n.lua_pushstring(t,c),n.lua_rotate(t,-2,1),2):(n.lua_pushnil(t),1)},A=function(t){var e=f(t),a=e.thread,r=e.arg,o=new n.lua_Debug,s=u.luaL_checkinteger(t,r+1),i=u.luaL_checkinteger(t,r+2);if(!n.lua_getstack(a,s,o))return u.luaL_argerror(t,r+1,n.to_luastring("level out of range",!0));u.luaL_checkany(t,r+3),n.lua_settop(t,r+3),l(t,a,1),n.lua_xmove(t,a,1);var c=n.lua_setlocal(a,o,i);return null===c&&n.lua_pop(a,1),n.lua_pushstring(t,c),1},T=function(t,e){var a=u.luaL_checkinteger(t,2);u.luaL_checktype(t,1,n.LUA_TFUNCTION);var r=e?n.lua_getupvalue(t,1,a):n.lua_setupvalue(t,1,a);return null===r?0:(n.lua_pushstring(t,r),n.lua_insert(t,-(e+1)),e+1)},b=function(t){return T(t,1)},x=function(t){return u.luaL_checkany(t,3),T(t,0)},k=function(t,e,a){var r=u.luaL_checkinteger(t,a);return u.luaL_checktype(t,e,n.LUA_TFUNCTION),u.luaL_argcheck(t,null!==n.lua_getupvalue(t,e,r),a,n.to_luastring("invalid upvalue index",!0)),r},O=function(t){var e=k(t,1,2);return n.lua_pushlightuserdata(t,n.lua_upvalueid(t,1,e)),1},m=function(t){var e=k(t,1,2),a=k(t,3,4);return u.luaL_argcheck(t,!n.lua_iscfunction(t,1),1,n.to_luastring("Lua function expected",!0)),u.luaL_argcheck(t,!n.lua_iscfunction(t,3),3,n.to_luastring("Lua function expected",!0)),n.lua_upvaluejoin(t,1,e,3,a),0},U=n.to_luastring("__hooks__",!0),E=["call","return","line","count","tail call"].map(function(t){return n.to_luastring(t)}),y=function(t,e){n.lua_rawgetp(t,n.LUA_REGISTRYINDEX,U),n.lua_pushthread(t),n.lua_rawget(t,-2)===n.LUA_TFUNCTION&&(n.lua_pushstring(t,E[e.event]),e.currentline>=0?n.lua_pushinteger(t,e.currentline):n.lua_pushnil(t),r(n.lua_getinfo(t,n.to_luastring("lS"),e)),n.lua_call(t,2,0))},S=function(t,e){var a=0;return n.luastring_indexOf(t,"c".charCodeAt(0))>-1&&(a|=n.LUA_MASKCALL),n.luastring_indexOf(t,"r".charCodeAt(0))>-1&&(a|=n.LUA_MASKRET),n.luastring_indexOf(t,"l".charCodeAt(0))>-1&&(a|=n.LUA_MASKLINE),e>0&&(a|=n.LUA_MASKCOUNT),a},N=function(t,e){var a=0;return t&n.LUA_MASKCALL&&(e[a++]="c".charCodeAt(0)),t&n.LUA_MASKRET&&(e[a++]="r".charCodeAt(0)),t&n.LUA_MASKLINE&&(e[a++]="l".charCodeAt(0)),e.subarray(0,a)},R=function(t){var e=void 0,a=void 0,r=void 0,o=f(t),s=o.thread,i=o.arg;if(n.lua_isnoneornil(t,i+1))n.lua_settop(t,i+1),r=null,e=0,a=0;else{var c=u.luaL_checkstring(t,i+2);u.luaL_checktype(t,i+1,n.LUA_TFUNCTION),a=u.luaL_optinteger(t,i+3,0),r=y,e=S(c,a)}return n.lua_rawgetp(t,n.LUA_REGISTRYINDEX,U)===n.LUA_TNIL&&(n.lua_createtable(t,0,2),n.lua_pushvalue(t,-1),n.lua_rawsetp(t,n.LUA_REGISTRYINDEX,U),n.lua_pushstring(t,n.to_luastring("k")),n.lua_setfield(t,-2,n.to_luastring("__mode",!0)),n.lua_pushvalue(t,-1),n.lua_setmetatable(t,-2)),l(t,s,1),n.lua_pushthread(s),n.lua_xmove(s,t,1),n.lua_pushvalue(t,i+1),n.lua_rawset(t,-3),n.lua_sethook(s,r,e,a),0},w=function(t){var e=f(t),a=e.thread,r=new Uint8Array(5),u=n.lua_gethookmask(a),o=n.lua_gethook(a);return null===o?n.lua_pushnil(t):o!==y?n.lua_pushliteral(t,"external hook"):(n.lua_rawgetp(t,n.LUA_REGISTRYINDEX,U),l(t,a,1),n.lua_pushthread(a),n.lua_xmove(a,t,1),n.lua_rawget(t,-2),n.lua_remove(t,-2)),n.lua_pushstring(t,N(u,r)),n.lua_pushinteger(t,n.lua_gethookcount(a)),3},I=function(t){var e=f(t),a=e.thread,r=e.arg,l=n.lua_tostring(t,r+1);if(null!==l||n.lua_isnoneornil(t,r+1)){var o=u.luaL_optinteger(t,r+2,t===a?1:0);u.luaL_traceback(t,a,l,o)}else n.lua_pushvalue(t,r+1);return 1},M={gethook:w,getinfo:d,getlocal:L,getmetatable:s,getregistry:o,getupvalue:b,getuservalue:c,sethook:R,setlocal:A,setmetatable:i,setupvalue:x,setuservalue:_,traceback:I,upvalueid:O,upvaluejoin:m},C=void 0;"undefined"!=typeof window&&(C=function(){var t=prompt("lua_debug>","");return null!==t?t:""}),C&&(M.debug=function(t){for(;;){var e=C();if("cont"===e)return 0;if(0!==e.length){var a=n.to_luastring(e);(u.luaL_loadbuffer(t,a,a.length,n.to_luastring("=(debug command)",!0))||n.lua_pcall(t,0,0,0))&&u.lua_writestringerror(n.lua_tojsstring(t,-1),"\n"),n.lua_settop(t,0)}}});var P=function(t){return u.luaL_newlib(t,M),1};t.exports.luaopen_debug=P},function(t,e,a){"use strict";var r=a(2),n=a(4),u=a(41),l=r.to_luastring("aAbBcdHIjmMpSUwWxXyYZ%"),o=l,s=function(t,e,a){r.lua_pushinteger(t,a),r.lua_setfield(t,-2,r.to_luastring(e,!0))},i=function(t,e,a){s(t,"sec",a?e.getUTCSeconds():e.getSeconds()),s(t,"min",a?e.getUTCMinutes():e.getMinutes()),s(t,"hour",a?e.getUTCHours():e.getHours()),s(t,"day",a?e.getUTCDate():e.getDate()),s(t,"month",a?e.getUTCMonth():e.getMonth()),s(t,"year",a?e.getUTCFullYear():e.getFullYear()),s(t,"wday",a?e.getUTCDay():e.getDay());var r=new Date;s(t,"yday",Math.floor((r-new Date(r.getFullYear(),0,0))/864e5))},c=Number.MAX_SAFE_INTEGER/2,_=function(t,e,a,u){var l=r.lua_getfield(t,-1,r.to_luastring(e,!0)),o=r.lua_tointegerx(t,-1);if(!1===o){if(l!==r.LUA_TNIL)return n.luaL_error(t,r.to_luastring("field '%s' is not an integer"),e);if(a<0)return n.luaL_error(t,r.to_luastring("field '%s' missing in date table"),e);o=a}else{if(!(-c<=o&&o<=c))return n.luaL_error(t,r.to_luastring("field '%s' is out-of-bound"),e);o-=u}return r.lua_pop(t,1),o},f=function(t,e,a,r,n){for(var u=0;u<n;u++)if(t[e+u]!==a[r+u])return!1;return!0},p=function(t,e,a,u){for(var l=o,s=0,i=1;s<l.length&&i<=e.length-a;s+=i)if(l[s]==="|".charCodeAt(0))i++;else if(f(e,a,l,s,i))return u.set(e.subarray(a,a+i)),a+i;n.luaL_argerror(t,1,r.lua_pushfstring(t,r.to_luastring("invalid conversion specifier '%%%s'"),e))},v=function(t){var e=n.luaL_optlstring(t,1,r.to_luastring("%c")),a=1e3*n.luaL_opt(t,g,2,(new Date).getTime()/1e3),l=new Date(a),o=!1,s=0;if(e[s]==="!".charCodeAt(0)&&(o=!0,s++),null===l&&n.luaL_error(t,r.to_luastring("time result cannot be represented in this installation",!0)),e[s]==="*".charCodeAt(0)&&e[s+1]==="t".charCodeAt(0))r.lua_createtable(t,0,9),i(t,l,o);else{var c=new Uint8Array(4);c[0]="%".charCodeAt(0);var _=new n.luaL_Buffer;for(n.luaL_buffinit(t,_);s<e.length;)if(e[s]!=="%".charCodeAt(0))n.luaL_addchar(_,e[s++]);else{s++,s=p(t,e,s,c.subarray(1));var f=r.luastring_indexOf(c,0);-1!==f&&(c=c.subarray(0,f));var v=u(r.to_jsstring(c),l);n.luaL_addstring(_,r.to_luastring(v))}n.luaL_pushresult(_)}return 1},h=function(t){var e=new Date;return r.lua_isnoneornil(t,1)||(n.luaL_checktype(t,1,r.LUA_TTABLE),r.lua_settop(t,1),e.setSeconds(_(t,"sec",0,0)),e.setMinutes(_(t,"min",0,0)),e.setHours(_(t,"hour",12,0)),e.setDate(_(t,"day",-1,0)),e.setMonth(_(t,"month",-1,1)),e.setFullYear(_(t,"year",-1,0)),i(t,e)),r.lua_pushinteger(t,Math.floor(e/1e3)),1},g=function(t,e){return n.luaL_checkinteger(t,e)},d=function(t){var e=g(t,1),a=g(t,2);return r.lua_pushnumber(t,new Date(e)-new Date(a)),1},L={date:v,difftime:d,time:h};L.clock=function(t){return r.lua_pushnumber(t,performance.now()/1e3),1};var A=function(t){return n.luaL_newlib(t,L),1};t.exports.luaopen_os=A},function(module,exports,__webpack_require__){"use strict";var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},fengari=__webpack_require__(17),lua=__webpack_require__(2),lauxlib=__webpack_require__(4),global_env=function(){return"undefined"!=typeof window?window:"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope?self:eval("this")}(),CLIBS=lua.to_luastring("__CLIBS__",!0),LUA_PATH_VAR="LUA_PATH",LUA_CPATH_VAR="LUA_CPATH",LUA_IGMARK="-",LUA_CSUBSEP=lua.LUA_DIRSEP,LUA_LSUBSEP=lua.LUA_DIRSEP,LUA_POF=lua.to_luastring("luaopen_"),LUA_OFSEP=lua.to_luastring("_"),LIB_FAIL="open",AUXMARK=lua.to_luastring(""),lsys_load=void 0,pathlib;lsys_load=function(t,e,a){e=lua.to_uristring(e);var r=new XMLHttpRequest;if(r.open("GET",e,!1),r.send(),r.status<200||r.status>=300)return lua.lua_pushstring(t,lua.to_luastring(r.status+": "+r.statusText)),null;var n=r.response;/\/\/[#@] sourceURL=/.test(n)||(n+=" //# sourceURL="+e);var u=void 0;try{u=Function("fengari",n)}catch(e){return lua.lua_pushstring(t,lua.to_luastring(e.name+": "+e.message)),null}var l=u(fengari);return"function"==typeof l||"object"===(void 0===l?"undefined":_typeof(l))&&null!==l?l:void 0===l?global_env:(lua.lua_pushstring(t,lua.to_luastring("library returned unexpected type ("+(void 0===l?"undefined":_typeof(l))+")")),null)};var lsys_sym=function(t,e,a){var r=e[lua.to_jsstring(a)];return r&&"function"==typeof r?r:(lua.lua_pushfstring(t,lua.to_luastring("undefined symbol: %s"),a),null)},noenv=function(t){lua.lua_getfield(t,lua.LUA_REGISTRYINDEX,lua.to_luastring("LUA_NOENV"));var e=lua.lua_toboolean(t,-1);return lua.lua_pop(t,1),e},readable=void 0,fs;readable=function(t){t=lua.to_uristring(t);var e=new XMLHttpRequest;return e.open("GET",t,!1),e.send(),e.status>=200&&e.status<=299};var ERRLIB=1,ERRFUNC=2,lookforfunc=function(t,e,a){var r=checkclib(t,e);if(null===r){if(null===(r=lsys_load(t,e,a[0]==="*".charCodeAt(0))))return ERRLIB;addtoclib(t,e,r)}if(a[0]==="*".charCodeAt(0))return lua.lua_pushboolean(t,1),0;var n=lsys_sym(t,r,a);return null===n?ERRFUNC:(lua.lua_pushcfunction(t,n),0)},ll_loadlib=function(t){var e=lauxlib.luaL_checkstring(t,1),a=lauxlib.luaL_checkstring(t,2),r=lookforfunc(t,e,a);return 0===r?1:(lua.lua_pushnil(t),lua.lua_insert(t,-2),lua.lua_pushliteral(t,r===ERRLIB?LIB_FAIL:"init"),3)},env=function(){return global_env}(),setpath=function(t,e,a,r){var n=""+a+lua.LUA_VERSUFFIX;lua.lua_pushstring(t,lua.to_luastring(n));var u=env[n];void 0===u&&(u=env[a]),void 0===u||noenv(t)?lua.lua_pushstring(t,lua.to_luastring(r)):(u=lauxlib.luaL_gsub(t,lua.to_luastring(u),lua.to_luastring(lua.LUA_PATH_SEP+lua.LUA_PATH_SEP,!0),lua.to_luastring(lua.LUA_PATH_SEP+lua.to_jsstring(AUXMARK)+lua.LUA_PATH_SEP,!0)),lauxlib.luaL_gsub(t,u,AUXMARK,lua.to_luastring(r)),lua.lua_remove(t,-2)),lua.lua_setfield(t,-3,e),lua.lua_pop(t,1)},checkclib=function(t,e){lua.lua_rawgetp(t,lua.LUA_REGISTRYINDEX,CLIBS),lua.lua_getfield(t,-1,e);var a=lua.lua_touserdata(t,-1);return lua.lua_pop(t,2),a},addtoclib=function(t,e,a){lua.lua_rawgetp(t,lua.LUA_REGISTRYINDEX,CLIBS),lua.lua_pushlightuserdata(t,a),lua.lua_pushvalue(t,-1),lua.lua_setfield(t,-3,e),lua.lua_rawseti(t,-2,lauxlib.luaL_len(t,-2)+1),lua.lua_pop(t,1)},pushnexttemplate=function(t,e){for(;e[0]===lua.LUA_PATH_SEP.charCodeAt(0);)e=e.subarray(1);if(0===e.length)return null;var a=lua.luastring_indexOf(e,lua.LUA_PATH_SEP.charCodeAt(0));return a<0&&(a=e.length),lua.lua_pushlstring(t,e,a),e.subarray(a)},searchpath=function(t,e,a,r,n){var u=new lauxlib.luaL_Buffer;for(lauxlib.luaL_buffinit(t,u),0!==r[0]&&(e=lauxlib.luaL_gsub(t,e,r,n));null!==(a=pushnexttemplate(t,a));){var l=lauxlib.luaL_gsub(t,lua.lua_tostring(t,-1),lua.to_luastring(lua.LUA_PATH_MARK,!0),e);if(lua.lua_remove(t,-2),readable(l))return l;lua.lua_pushfstring(t,lua.to_luastring("\n\tno file '%s'"),l),lua.lua_remove(t,-2),lauxlib.luaL_addvalue(u)}return lauxlib.luaL_pushresult(u),null},ll_searchpath=function(t){return null!==searchpath(t,lauxlib.luaL_checkstring(t,1),lauxlib.luaL_checkstring(t,2),lauxlib.luaL_optstring(t,3,lua.to_luastring(".")),lauxlib.luaL_optstring(t,4,lua.to_luastring(lua.LUA_DIRSEP)))?1:(lua.lua_pushnil(t),lua.lua_insert(t,-2),2)},findfile=function(t,e,a,r){lua.lua_getfield(t,lua.lua_upvalueindex(1),a);var n=lua.lua_tostring(t,-1);return null===n&&lauxlib.luaL_error(t,lua.to_luastring("'package.%s' must be a string"),a),searchpath(t,e,n,lua.to_luastring("."),r)},checkload=function(t,e,a){return e?(lua.lua_pushstring(t,a),2):lauxlib.luaL_error(t,lua.to_luastring("error loading module '%s' from file '%s':\n\t%s"),lua.lua_tostring(t,1),a,lua.lua_tostring(t,-1))},searcher_Lua=function(t){var e=lauxlib.luaL_checkstring(t,1),a=findfile(t,e,lua.to_luastring("path",!0),lua.to_luastring(LUA_LSUBSEP,!0));return null===a?1:checkload(t,lauxlib.luaL_loadfile(t,a)===lua.LUA_OK,a)},loadfunc=function(t,e,a){var r=void 0;a=lauxlib.luaL_gsub(t,a,lua.to_luastring("."),LUA_OFSEP);var n=lua.luastring_indexOf(a,LUA_IGMARK.charCodeAt(0));if(n>=0){r=lua.lua_pushlstring(t,a,n),r=lua.lua_pushfstring(t,lua.to_luastring("%s%s"),LUA_POF,r);var u=lookforfunc(t,e,r);if(u!==ERRFUNC)return u;a=n+1}return r=lua.lua_pushfstring(t,lua.to_luastring("%s%s"),LUA_POF,a),lookforfunc(t,e,r)},searcher_C=function(t){var e=lauxlib.luaL_checkstring(t,1),a=findfile(t,e,lua.to_luastring("cpath",!0),lua.to_luastring(LUA_CSUBSEP,!0));return null===a?1:checkload(t,0===loadfunc(t,a,e),a)},searcher_Croot=function(t){var e=lauxlib.luaL_checkstring(t,1),a=lua.luastring_indexOf(e,".".charCodeAt(0)),r=void 0;if(a<0)return 0;lua.lua_pushlstring(t,e,a);var n=findfile(t,lua.lua_tostring(t,-1),lua.to_luastring("cpath",!0),lua.to_luastring(LUA_CSUBSEP,!0));return null===n?1:0!==(r=loadfunc(t,n,e))?r!=ERRFUNC?checkload(t,0,n):(lua.lua_pushstring(t,lua.to_luastring("\n\tno module '%s' in file '%s'"),e,n),1):(lua.lua_pushstring(t,n),2)},searcher_preload=function(t){var e=lauxlib.luaL_checkstring(t,1);return lua.lua_getfield(t,lua.LUA_REGISTRYINDEX,lauxlib.LUA_PRELOAD_TABLE),lua.lua_getfield(t,-1,e)===lua.LUA_TNIL&&lua.lua_pushfstring(t,lua.to_luastring("\n\tno field package.preload['%s']"),e),1},findloader=function(t,e,a,r){var n=new lauxlib.luaL_Buffer;lauxlib.luaL_buffinit(t,n),lua.lua_getfield(t,lua.lua_upvalueindex(1),lua.to_luastring("searchers",!0))!==lua.LUA_TTABLE&&lauxlib.luaL_error(t,lua.to_luastring("'package.searchers' must be a table"));var u={name:e,i:1,msg:n,ctx:a,k:r};return findloader_cont(t,lua.LUA_OK,u)},findloader_cont=function t(e,a,r){for(;a===lua.LUA_OK?(lua.lua_rawgeti(e,3,r.i)===lua.LUA_TNIL&&(lua.lua_pop(e,1),lauxlib.luaL_pushresult(r.msg),lauxlib.luaL_error(e,lua.to_luastring("module '%s' not found:%s"),r.name,lua.lua_tostring(e,-1))),lua.lua_pushstring(e,r.name),lua.lua_callk(e,1,2,r,t)):a=lua.LUA_OK,!lua.lua_isfunction(e,-2);r.i++)lua.lua_isstring(e,-2)?(lua.lua_pop(e,1),lauxlib.luaL_addvalue(r.msg)):lua.lua_pop(e,2);return r.k(e,lua.LUA_OK,r.ctx)},ll_require=function(t){var e=lauxlib.luaL_checkstring(t,1);return lua.lua_settop(t,1),lua.lua_getfield(t,lua.LUA_REGISTRYINDEX,lauxlib.LUA_LOADED_TABLE),lua.lua_getfield(t,2,e),lua.lua_toboolean(t,-1)?1:(lua.lua_pop(t,1),findloader(t,e,e,ll_require_cont))},ll_require_cont=function(t,e,a){var r=a;return lua.lua_pushstring(t,r),lua.lua_insert(t,-2),lua.lua_callk(t,2,1,a,ll_require_cont2),ll_require_cont2(t,lua.LUA_OK,a)},ll_require_cont2=function(t,e,a){var r=a;return lua.lua_isnil(t,-1)||lua.lua_setfield(t,2,r),lua.lua_getfield(t,2,r)==lua.LUA_TNIL&&(lua.lua_pushboolean(t,1),lua.lua_pushvalue(t,-1),lua.lua_setfield(t,2,r)),1},pk_funcs={loadlib:ll_loadlib,searchpath:ll_searchpath},ll_funcs={require:ll_require},createsearcherstable=function(t){var e=[searcher_preload,searcher_Lua,searcher_C,searcher_Croot,null];lua.lua_createtable(t);for(var a=0;e[a];a++)lua.lua_pushvalue(t,-2),lua.lua_pushcclosure(t,e[a],1),lua.lua_rawseti(t,-2,a+1);lua.lua_setfield(t,-2,lua.to_luastring("searchers",!0))},createclibstable=function(t){lua.lua_newtable(t),lua.lua_createtable(t,0,1),lua.lua_setmetatable(t,-2),lua.lua_rawsetp(t,lua.LUA_REGISTRYINDEX,CLIBS)},luaopen_package=function(t){return createclibstable(t),lauxlib.luaL_newlib(t,pk_funcs),createsearcherstable(t),setpath(t,lua.to_luastring("path",!0),LUA_PATH_VAR,lua.LUA_PATH_DEFAULT),setpath(t,lua.to_luastring("cpath",!0),LUA_CPATH_VAR,lua.LUA_CPATH_DEFAULT),lua.lua_pushliteral(t,lua.LUA_DIRSEP+"\n"+lua.LUA_PATH_SEP+"\n"+lua.LUA_PATH_MARK+"\n"+lua.LUA_EXEC_DIR+"\n"+LUA_IGMARK+"\n"),lua.lua_setfield(t,-2,lua.to_luastring("config",!0)),lauxlib.luaL_getsubtable(t,lua.LUA_REGISTRYINDEX,lauxlib.LUA_LOADED_TABLE),lua.lua_setfield(t,-2,lua.to_luastring("loaded",!0)),lauxlib.luaL_getsubtable(t,lua.LUA_REGISTRYINDEX,lauxlib.LUA_PRELOAD_TABLE),lua.lua_setfield(t,-2,lua.to_luastring("preload",!0)),lua.lua_pushglobaltable(t),lua.lua_pushvalue(t,-2),lauxlib.luaL_setfuncs(t,ll_funcs,1),lua.lua_pop(t,1),1};module.exports.luaopen_package=luaopen_package},function(t,e,a){"use strict";function r(t,e){if("string"==typeof t)t=n.lua.to_luastring(t);else if(!Array.isArray(t))throw TypeError("expected string or array of bytes");e=e?n.lua.to_luastring(e):null;var a=n.lauxlib.luaL_loadbuffer(o,t,null,e),r=void 0;if(r=a===n.lua.LUA_ERRSYNTAX?new SyntaxError(n.lua.lua_tojsstring(o,-1)):l.tojs(o,-1),n.lua.lua_pop(o,1),a!==n.lua.LUA_OK)throw r;return r}Object.defineProperty(e,"__esModule",{value:!0}),e.L=e.interop=e.lualib=e.lauxlib=e.lua=void 0,e.load=r;var n=a(17),u=a(42),l=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e.default=t,e}(u);e.lua=n.lua,e.lauxlib=n.lauxlib,e.lualib=n.lualib,e.interop=l;var o=e.L=n.lauxlib.luaL_newstate();if(n.lualib.luaL_openlibs(o),n.lauxlib.luaL_requiref(o,n.lua.to_luastring("js"),l.luaopen_js,1),n.lua.lua_pop(o,1),n.lua.lua_pushstring(o,n.lua.to_luastring(n.lua.FENGARI_COPYRIGHT)),n.lua.lua_setglobal(o,n.lua.to_luastring("_COPYRIGHT")),"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope);else{var s=function(t){switch(t){case"anonymous":return"omit";case"use-credentials":return"include";default:return"same-origin"}},i=function(t){var e=new n.lua.lua_Debug;return n.lua.lua_getstack(t,2,e)&&n.lua.lua_getinfo(t,n.lua.to_luastring("Sl"),e),l.push(t,new ErrorEvent("error",{bubbles:!0,cancelable:!0,message:n.lua.lua_tojsstring(t,1),error:l.tojs(t,1),filename:e.short_src?n.lua.to_jsstring(e.short_src):void 0,lineno:e.currentline>0?e.currentline:void 0})),1},c=function(t,e,a){var r=n.lauxlib.luaL_loadbuffer(o,e,null,a),u=void 0;if(r===n.lua.LUA_ERRSYNTAX){var s=n.lua.lua_tojsstring(o,-1),c=t.src?t.src:document.location,_=new SyntaxError(s,c,void 0);u=new ErrorEvent("error",{message:s,error:_,filename:c,lineno:void 0})}else if(r===n.lua.LUA_OK){var f=n.lua.lua_gettop(o);n.lua.lua_pushcfunction(o,i),n.lua.lua_insert(o,f),Object.defineProperty(document,"currentScript",{value:t,configurable:!0}),r=n.lua.lua_pcall(o,0,0,f),delete document.currentScript,n.lua.lua_remove(o,f),r===n.lua.LUA_ERRRUN&&(u=l.checkjs(o,-1))}r!==n.lua.LUA_OK&&(void 0===u&&(u=new ErrorEvent("error",{message:n.lua.lua_tojsstring(o,-1),error:l.tojs(o,-1)})),n.lua.lua_pop(o,1),window.dispatchEvent(u)&&console.error("uncaught exception",u.error))},_=function(t,e,a){if(t.status>=200&&t.status<300){var r=t.response;r="string"==typeof r?n.lua.to_luastring(t.response):new Uint8Array(r),c(e,r,a)}else e.dispatchEvent(new Event("error"))},f=function(t){if(t.src){var e=n.lua.to_luastring("@"+t.src);if("complete"===document.readyState||t.async)if("function"==typeof fetch)fetch(t.src,{method:"GET",credentials:s(t.crossorigin),redirect:"follow",integrity:t.integrity}).then(function(t){if(t.ok)return t.arrayBuffer();throw"unable to fetch"}).then(function(a){var r=new Uint8Array(a);c(t,r,e)}).catch(function(e){t.dispatchEvent(new Event("error"))});else{var a=new XMLHttpRequest;a.open("GET",t.src,!0),a.responseType="arraybuffer",a.onreadystatechange=function(){4===a.readyState&&_(a,t,e)},a.send()}else{var r=new XMLHttpRequest;r.open("GET",t.src,!1),r.send(),_(r,t,e)}}else{var u=n.lua.to_luastring(t.innerHTML),l=t.id?n.lua.to_luastring("="+t.id):u;c(t,u,l)}},p=/^(.*?\/.*?)([\t ]*;.*)?$/,v=function(t){if("SCRIPT"===t.tagName){var e=p.exec(t.type);if(e){var a=e[1];"application/lua"!==a&&"text/lua"!==a||f(t)}}};new MutationObserver(function(t,e){for(var a=0;a<t.length;a++)for(var r=t[a],n=0;n<r.addedNodes.length;n++)v(r.addedNodes[n])}).observe(document,{childList:!0,subtree:!0});Array.prototype.forEach.call(document.querySelectorAll('script[type^="application/lua"] script[type^="text/lua"]'),v)}},function(t,e,a){"use strict";function r(t,a){var r={seen:[],stylize:u};return arguments.length>=3&&(r.depth=arguments[2]),arguments.length>=4&&(r.colors=arguments[3]),v(a)?r.showHidden=a:a&&e._extend(r,a),T(r.showHidden)&&(r.showHidden=!1),T(r.depth)&&(r.depth=2),T(r.colors)&&(r.colors=!1),T(r.customInspect)&&(r.customInspect=!0),r.colors&&(r.stylize=n),o(r,t,r.depth)}function n(t,e){var a=r.styles[e];return a?"["+r.colors[a][0]+"m"+t+"["+r.colors[a][1]+"m":t}function u(t,e){return t}function l(t){var e={};return t.forEach(function(t,a){e[t]=!0}),e}function o(t,a,r){if(t.customInspect&&a&&m(a.inspect)&&a.inspect!==e.inspect&&(!a.constructor||a.constructor.prototype!==a)){var n=a.inspect(r,t);return L(n)||(n=o(t,n,r)),n}var u=s(t,a);if(u)return u;var v=Object.keys(a),h=l(v);if(t.showHidden&&(v=Object.getOwnPropertyNames(a)),O(a)&&(v.indexOf("message")>=0||v.indexOf("description")>=0))return i(a);if(0===v.length){if(m(a)){var g=a.name?": "+a.name:"";return t.stylize("[Function"+g+"]","special")}if(b(a))return t.stylize(RegExp.prototype.toString.call(a),"regexp");if(k(a))return t.stylize(Date.prototype.toString.call(a),"date");if(O(a))return i(a)}var d="",A=!1,T=["{","}"];if(p(a)&&(A=!0,T=["[","]"]),m(a)){d=" [Function"+(a.name?": "+a.name:"")+"]"}if(b(a)&&(d=" "+RegExp.prototype.toString.call(a)),k(a)&&(d=" "+Date.prototype.toUTCString.call(a)),O(a)&&(d=" "+i(a)),0===v.length&&(!A||0==a.length))return T[0]+d+T[1];if(r<0)return b(a)?t.stylize(RegExp.prototype.toString.call(a),"regexp"):t.stylize("[Object]","special");t.seen.push(a);var x;return x=A?c(t,a,r,h,v):v.map(function(e){return _(t,a,r,h,e,A)}),t.seen.pop(),f(x,d,T)}function s(t,e){if(T(e))return t.stylize("undefined","undefined");if(L(e)){var a="'"+JSON.stringify(e).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return t.stylize(a,"string")}return d(e)?t.stylize(""+e,"number"):v(e)?t.stylize(""+e,"boolean"):h(e)?t.stylize("null","null"):void 0}function i(t){return"["+Error.prototype.toString.call(t)+"]"}function c(t,e,a,r,n){for(var u=[],l=0,o=e.length;l<o;++l)N(e,String(l))?u.push(_(t,e,a,r,String(l),!0)):u.push("");return n.forEach(function(n){n.match(/^\d+$/)||u.push(_(t,e,a,r,n,!0))}),u}function _(t,e,a,r,n,u){var l,s,i;if(i=Object.getOwnPropertyDescriptor(e,n)||{value:e[n]},i.get?s=i.set?t.stylize("[Getter/Setter]","special"):t.stylize("[Getter]","special"):i.set&&(s=t.stylize("[Setter]","special")),N(r,n)||(l="["+n+"]"),s||(t.seen.indexOf(i.value)<0?(s=h(a)?o(t,i.value,null):o(t,i.value,a-1),s.indexOf("\n")>-1&&(s=u?s.split("\n").map(function(t){return"  "+t}).join("\n").substr(2):"\n"+s.split("\n").map(function(t){return"   "+t}).join("\n"))):s=t.stylize("[Circular]","special")),T(l)){if(u&&n.match(/^\d+$/))return s;l=JSON.stringify(""+n),l.match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(l=l.substr(1,l.length-2),l=t.stylize(l,"name")):(l=l.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),l=t.stylize(l,"string"))}return l+": "+s}function f(t,e,a){var r=0;return t.reduce(function(t,e){return r++,e.indexOf("\n")>=0&&r++,t+e.replace(/\u001b\[\d\d?m/g,"").length+1},0)>60?a[0]+(""===e?"":e+"\n ")+" "+t.join(",\n  ")+" "+a[1]:a[0]+e+" "+t.join(", ")+" "+a[1]}function p(t){return Array.isArray(t)}function v(t){return"boolean"==typeof t}function h(t){return null===t}function g(t){return null==t}function d(t){return"number"==typeof t}function L(t){return"string"==typeof t}function A(t){return"symbol"===(void 0===t?"undefined":R(t))}function T(t){return void 0===t}function b(t){return x(t)&&"[object RegExp]"===E(t)}function x(t){return"object"===(void 0===t?"undefined":R(t))&&null!==t}function k(t){return x(t)&&"[object Date]"===E(t)}function O(t){return x(t)&&("[object Error]"===E(t)||t instanceof Error)}function m(t){return"function"==typeof t}function U(t){return null===t||"boolean"==typeof t||"number"==typeof t||"string"==typeof t||"symbol"===(void 0===t?"undefined":R(t))||void 0===t}function E(t){return Object.prototype.toString.call(t)}function y(t){return t<10?"0"+t.toString(10):t.toString(10)}function S(){var t=new Date,e=[y(t.getHours()),y(t.getMinutes()),y(t.getSeconds())].join(":");return[t.getDate(),C[t.getMonth()],e].join(" ")}function N(t,e){return Object.prototype.hasOwnProperty.call(t,e)}var R="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},w=/%[sdj%]/g;e.format=function(t){if(!L(t)){for(var e=[],a=0;a<arguments.length;a++)e.push(r(arguments[a]));return e.join(" ")}for(var a=1,n=arguments,u=n.length,l=String(t).replace(w,function(t){if("%%"===t)return"%";if(a>=u)return t;switch(t){case"%s":return String(n[a++]);case"%d":return Number(n[a++]);case"%j":try{return JSON.stringify(n[a++])}catch(t){return"[Circular]"}default:return t}}),o=n[a];a<u;o=n[++a])h(o)||!x(o)?l+=" "+o:l+=" "+r(o);return l},e.deprecate=function(t,a){function r(){if(!n){if(process.throwDeprecation)throw new Error(a);process.traceDeprecation?console.trace(a):console.error(a),n=!0}return t.apply(this,arguments)}if(T(global.process))return function(){return e.deprecate(t,a).apply(this,arguments)};if(!0===process.noDeprecation)return t;var n=!1;return r};var I,M={};e.debuglog=function(t){if(T(I)&&(I=process.env.NODE_DEBUG||""),t=t.toUpperCase(),!M[t])if(new RegExp("\\b"+t+"\\b","i").test(I)){var a=process.pid;M[t]=function(){var r=e.format.apply(e,arguments);console.error("%s %d: %s",t,a,r)}}else M[t]=function(){};return M[t]},e.inspect=r,r.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},r.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"},e.isArray=p,e.isBoolean=v,e.isNull=h,e.isNullOrUndefined=g,e.isNumber=d,e.isString=L,e.isSymbol=A,e.isUndefined=T,e.isRegExp=b,e.isObject=x,e.isDate=k,e.isError=O,e.isFunction=m,e.isPrimitive=U,e.isBuffer=a(33);var C=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];e.log=function(){console.log("%s - %s",S(),e.format.apply(e,arguments))},e.inherits=a(34),e._extend=function(t,e){if(!e||!x(e))return t;for(var a=Object.keys(e),r=a.length;r--;)t[a[r]]=e[a[r]];return t}},function(t,e,a){"use strict";var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};t.exports=function(t){return t&&"object"===(void 0===t?"undefined":r(t))&&"function"==typeof t.copy&&"function"==typeof t.fill&&"function"==typeof t.readUInt8}},function(t,e,a){"use strict";"function"==typeof Object.create?t.exports=function(t,e){t.super_=e,t.prototype=Object.create(e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}})}:t.exports=function(t,e){t.super_=e;var a=function(){};a.prototype=e.prototype,t.prototype=new a,t.prototype.constructor=t}},function(t,e,a){"use strict";var r=a(0),n=a(1),u=a(19),l=a(3),o=a(14),s=a(21),i=a(7),c=a(13),_=n.CT,f=o.OpCodesI,p=l.TValue,v={OPR_ADD:0,OPR_SUB:1,OPR_MUL:2,OPR_MOD:3,OPR_POW:4,OPR_DIV:5,OPR_IDIV:6,OPR_BAND:7,OPR_BOR:8,OPR_BXOR:9,OPR_SHL:10,OPR_SHR:11,OPR_CONCAT:12,OPR_EQ:13,OPR_LT:14,OPR_LE:15,OPR_NE:16,OPR_GT:17,OPR_GE:18,OPR_AND:19,OPR_OR:20,OPR_NOBINOPR:21},h={OPR_MINUS:0,OPR_BNOT:1,OPR_NOT:2,OPR_LEN:3,OPR_NOUNOPR:4},g=function(t){return t.t!==t.f},d=function(t,e){var a=s.expkind;if(g(t))return!1;switch(t.k){case a.VKINT:return!e||new p(_.LUA_TNUMINT,t.u.ival);case a.VKFLT:return!e||new p(_.LUA_TNUMFLT,t.u.nval);default:return!1}},L=function(t,e,a){var r=void 0,n=e+a-1;if(t.pc>t.lasttarget&&(r=t.f.code[t.pc-1],r.opcode===f.OP_LOADNIL)){var u=r.A,l=u+r.B;if(u<=e&&e<=l+1||e<=u&&u<=n+1)return u<e&&(e=u),l>n&&(n=l),o.SETARG_A(r,e),void o.SETARG_B(r,n-e)}K(t,f.OP_LOADNIL,e,a-1,0)},A=function(t,e){return t.f.code[e.u.info]},T=function(t,e){var a=t.f.code[e].sBx;return-1===a?-1:e+1+a},b=function(t,e,a){var l=t.f.code[e],s=a-(e+1);r(-1!==a),Math.abs(s)>o.MAXARG_sBx&&u.luaX_syntaxerror(t.ls,n.to_luastring("control structure too long",!0)),o.SETARG_sBx(l,s)},x=function(t,e,a){if(-1===a)return e;if(-1===e)e=a;else{for(var r=e,n=T(t,r);-1!==n;)r=n,n=T(t,r);b(t,r,a)}return e},k=function(t){var e=t.jpc;t.jpc=-1;var a=G(t,f.OP_JMP,0,-1);return a=x(t,a,e)},O=function(t,e){return C(t,k(t),e)},m=function(t,e,a){K(t,f.OP_RETURN,e,a+1,0)},U=function(t,e,a,r,n){return K(t,e,a,r,n),k(t)},E=function(t){return t.lasttarget=t.pc,t.pc},y=function(t,e){return e>=1&&o.testTMode(t.f.code[e-1].opcode)?e-1:e},S=function(t,e){return t.f.code[y(t,e)]},N=function(t,e,a){var r=y(t,e),n=t.f.code[r];return n.opcode===f.OP_TESTSET&&(a!==o.NO_REG&&a!==n.B?o.SETARG_A(n,a):t.f.code[r]=o.CREATE_ABC(f.OP_TEST,n.B,0,n.C),!0)},R=function(t,e){for(;-1!==e;e=T(t,e))N(t,e,o.NO_REG)},w=function(t,e,a,r,n){for(;-1!==e;){var u=T(t,e);N(t,e,r)?b(t,e,a):b(t,e,n),e=u}},I=function(t){w(t,t.jpc,t.pc,o.NO_REG,t.pc),t.jpc=-1},M=function(t,e){E(t),t.jpc=x(t,t.jpc,e)},C=function(t,e,a){a===t.pc?M(t,e):(r(a<t.pc),w(t,e,a,o.NO_REG,a))},P=function(t,e,a){for(a++;-1!==e;e=T(t,e)){var n=t.f.code[e];r(n.opcode===f.OP_JMP&&(0===n.A||n.A>=a)),o.SETARG_A(n,a)}},D=function(t,e){var a=t.f;return I(t),a.code[t.pc]=e,a.lineinfo[t.pc]=t.ls.lastline,t.pc++},K=function(t,e,a,n,u){return r(o.getOpMode(e)===o.iABC),r(o.getBMode(e)!==o.OpArgN||0===n),r(o.getCMode(e)!==o.OpArgN||0===u),r(a<=o.MAXARG_A&&n<=o.MAXARG_B&&u<=o.MAXARG_C),D(t,o.CREATE_ABC(e,a,n,u))},B=function(t,e,a,n){return r(o.getOpMode(e)===o.iABx||o.getOpMode(e)===o.iAsBx),r(o.getCMode(e)===o.OpArgN),r(a<=o.MAXARG_A&&n<=o.MAXARG_Bx),D(t,o.CREATE_ABx(e,a,n))},G=function(t,e,a,r){return B(t,e,a,r+o.MAXARG_sBx)},V=function(t,e){return r(e<=o.MAXARG_Ax),D(t,o.CREATE_Ax(f.OP_EXTRAARG,e))},j=function(t,e,a){if(a<=o.MAXARG_Bx)return B(t,f.OP_LOADK,e,a);var r=B(t,f.OP_LOADKX,e,0);return V(t,a),r},F=function(t,e){var a=t.freereg+e;a>t.f.maxstacksize&&(a>=255&&u.luaX_syntaxerror(t.ls,n.to_luastring("function or expression needs too many registers",!0)),t.f.maxstacksize=a)},X=function(t,e){F(t,e),t.freereg+=e},H=function(t,e){!o.ISK(e)&&e>=t.nactvar&&(t.freereg--,r(e===t.freereg))},z=function(t,e){e.k===s.expkind.VNONRELOC&&H(t,e.u.info)},Y=function(t,e,a){var r=e.k===s.expkind.VNONRELOC?e.u.info:-1,n=a.k===s.expkind.VNONRELOC?a.u.info:-1;r>n?(H(t,r),H(t,n)):(H(t,n),H(t,r))},Z=function(t,e,a){var r=t.f,n=i.luaH_set(t.L,t.ls.h,e);if(n.ttisinteger()){var u=n.value;if(u<t.nk&&r.k[u].ttype()===a.ttype()&&r.k[u].value===a.value)return u}var l=t.nk;return n.setivalue(l),r.k[l]=a,t.nk++,l},J=function(t,e){var a=new p(_.LUA_TLNGSTR,e);return Z(t,a,a)},q=function(t,e){var a=new p(_.LUA_TLIGHTUSERDATA,e),r=new p(_.LUA_TNUMINT,e);return Z(t,a,r)},W=function(t,e){var a=new p(_.LUA_TNUMFLT,e);return Z(t,a,a)},Q=function(t,e){var a=new p(_.LUA_TBOOLEAN,e);return Z(t,a,a)},$=function(t){var e=new p(_.LUA_TNIL,null),a=new p(_.LUA_TTABLE,t.ls.h);return Z(t,a,e)},tt=function(t,e,a){var u=s.expkind;if(e.k===u.VCALL)o.SETARG_C(A(t,e),a+1);else if(e.k===u.VVARARG){var l=A(t,e);o.SETARG_B(l,a+1),o.SETARG_A(l,t.freereg),X(t,1)}else r(a===n.LUA_MULTRET)},et=function(t,e){tt(t,e,n.LUA_MULTRET)},at=function(t,e){var a=s.expkind;e.k===a.VCALL?(r(2===A(t,e).C),e.k=a.VNONRELOC,e.u.info=A(t,e).A):e.k===a.VVARARG&&(o.SETARG_B(A(t,e),2),e.k=a.VRELOCABLE)},rt=function(t,e){var a=s.expkind;switch(e.k){case a.VLOCAL:e.k=a.VNONRELOC;break;case a.VUPVAL:e.u.info=K(t,f.OP_GETUPVAL,0,e.u.info,0),e.k=a.VRELOCABLE;break;case a.VINDEXED:var n=void 0;H(t,e.u.ind.idx),e.u.ind.vt===a.VLOCAL?(H(t,e.u.ind.t),n=f.OP_GETTABLE):(r(e.u.ind.vt===a.VUPVAL),n=f.OP_GETTABUP),e.u.info=K(t,n,0,e.u.ind.t,e.u.ind.idx),e.k=a.VRELOCABLE;break;case a.VVARARG:case a.VCALL:at(t,e)}},nt=function(t,e,a,r){return E(t),K(t,f.OP_LOADBOOL,e,a,r)},ut=function(t,e,a){var n=s.expkind;switch(rt(t,e),e.k){case n.VNIL:L(t,a,1);break;case n.VFALSE:case n.VTRUE:K(t,f.OP_LOADBOOL,a,e.k===n.VTRUE,0);break;case n.VK:j(t,a,e.u.info);break;case n.VKFLT:j(t,a,W(t,e.u.nval));break;case n.VKINT:j(t,a,q(t,e.u.ival));break;case n.VRELOCABLE:var u=A(t,e);o.SETARG_A(u,a);break;case n.VNONRELOC:a!==e.u.info&&K(t,f.OP_MOVE,a,e.u.info,0);break;default:return void r(e.k===n.VJMP)}e.u.info=a,e.k=n.VNONRELOC},lt=function(t,e){e.k!==s.expkind.VNONRELOC&&(X(t,1),ut(t,e,t.freereg-1))},ot=function(t,e){for(;-1!==e;e=T(t,e)){if(S(t,e).opcode!==f.OP_TESTSET)return!0}return!1},st=function(t,e,a){var r=s.expkind;if(ut(t,e,a),e.k===r.VJMP&&(e.t=x(t,e.t,e.u.info)),g(e)){var n=void 0,u=-1,l=-1;if(ot(t,e.t)||ot(t,e.f)){var o=e.k===r.VJMP?-1:k(t);u=nt(t,a,0,1),l=nt(t,a,1,0),M(t,o)}n=E(t),w(t,e.f,n,a,u),w(t,e.t,n,a,l)}e.f=e.t=-1,e.u.info=a,e.k=r.VNONRELOC},it=function(t,e){rt(t,e),z(t,e),X(t,1),st(t,e,t.freereg-1)},ct=function(t,e){if(rt(t,e),e.k===s.expkind.VNONRELOC){if(!g(e))return e.u.info;if(e.u.info>=t.nactvar)return st(t,e,e.u.info),e.u.info}return it(t,e),e.u.info},_t=function(t,e){(e.k!==s.expkind.VUPVAL||g(e))&&ct(t,e)},ft=function(t,e){g(e)?ct(t,e):rt(t,e)},pt=function(t,e){var a=s.expkind,r=!1;switch(ft(t,e),e.k){case a.VTRUE:e.u.info=Q(t,!0),r=!0;break;case a.VFALSE:e.u.info=Q(t,!1),r=!0;break;case a.VNIL:e.u.info=$(t),r=!0;break;case a.VKINT:e.u.info=q(t,e.u.ival),r=!0;break;case a.VKFLT:e.u.info=W(t,e.u.nval),r=!0;break;case a.VK:r=!0}return r&&(e.k=a.VK,e.u.info<=o.MAXINDEXRK)?o.RKASK(e.u.info):ct(t,e)},vt=function(t,e,a){var r=s.expkind;switch(e.k){case r.VLOCAL:return z(t,a),void st(t,a,e.u.info);case r.VUPVAL:var n=ct(t,a);K(t,f.OP_SETUPVAL,n,e.u.info,0);break;case r.VINDEXED:var u=e.u.ind.vt===r.VLOCAL?f.OP_SETTABLE:f.OP_SETTABUP,l=pt(t,a);K(t,u,e.u.ind.t,e.u.ind.idx,l)}z(t,a)},ht=function(t,e,a){ct(t,e);var r=e.u.info;z(t,e),e.u.info=t.freereg,e.k=s.expkind.VNONRELOC,X(t,2),K(t,f.OP_SELF,e.u.info,r,pt(t,a)),z(t,a)},gt=function(t,e){var a=S(t,e.u.info);r(o.testTMode(a.opcode)&&a.opcode!==f.OP_TESTSET&&a.opcode!==f.OP_TEST),o.SETARG_A(a,!a.A)},dt=function(t,e,a){if(e.k===s.expkind.VRELOCABLE){var r=A(t,e);if(r.opcode===f.OP_NOT)return t.pc--,U(t,f.OP_TEST,r.B,0,!a)}return lt(t,e),z(t,e),U(t,f.OP_TESTSET,o.NO_REG,e.u.info,a)},Lt=function(t,e){var a=s.expkind,r=void 0;switch(rt(t,e),e.k){case a.VJMP:gt(t,e),r=e.u.info;break;case a.VK:case a.VKFLT:case a.VKINT:case a.VTRUE:r=-1;break;default:r=dt(t,e,0)}e.f=x(t,e.f,r),M(t,e.t),e.t=-1},At=function(t,e){var a=s.expkind,r=void 0;switch(rt(t,e),e.k){case a.VJMP:r=e.u.info;break;case a.VNIL:case a.VFALSE:r=-1;break;default:r=dt(t,e,1)}e.t=x(t,e.t,r),M(t,e.f),e.f=-1},Tt=function(t,e){var a=s.expkind;switch(rt(t,e),e.k){case a.VNIL:case a.VFALSE:e.k=a.VTRUE;break;case a.VK:case a.VKFLT:case a.VKINT:case a.VTRUE:e.k=a.VFALSE;break;case a.VJMP:gt(t,e);break;case a.VRELOCABLE:case a.VNONRELOC:lt(t,e),z(t,e),e.u.info=K(t,f.OP_NOT,0,e.u.info,0),e.k=a.VRELOCABLE}var r=e.f;e.f=e.t,e.t=r,R(t,e.f),R(t,e.t)},bt=function(t,e,a){var n=s.expkind;r(!g(e)&&(s.vkisinreg(e.k)||e.k===n.VUPVAL)),e.u.ind.t=e.u.info,e.u.ind.idx=pt(t,a),e.u.ind.vt=e.k===n.VUPVAL?n.VUPVAL:n.VLOCAL,e.k=n.VINDEXED},xt=function(t,e,a){switch(t){case n.LUA_OPBAND:case n.LUA_OPBOR:case n.LUA_OPBXOR:case n.LUA_OPSHL:case n.LUA_OPSHR:case n.LUA_OPBNOT:return!1!==c.tointeger(e)&&!1!==c.tointeger(a);case n.LUA_OPDIV:case n.LUA_OPIDIV:case n.LUA_OPMOD:return 0!==a.value;default:return 1}},kt=function(t,e,a){var r=s.expkind,n=void 0,u=void 0;if(!(n=d(e,!0))||!(u=d(a,!0))||!xt(t,n,u))return 0;var o=new p;if(l.luaO_arith(null,t,n,u,o),o.ttisinteger())e.k=r.VKINT,e.u.ival=o.value;else{var i=o.value;if(isNaN(i)||0===i)return!1;e.k=r.VKFLT,e.u.nval=i}return!0},Ot=function(t,e,a,r){var n=ct(t,a);z(t,a),a.u.info=K(t,e,0,n,0),a.k=s.expkind.VRELOCABLE,Nt(t,r)},mt=function(t,e,a,r,n){var u=pt(t,r),l=pt(t,a);Y(t,a,r),a.u.info=K(t,e,0,l,u),a.k=s.expkind.VRELOCABLE,Nt(t,n)},Ut=function(t,e,a,n){var u=s.expkind,l=void 0;a.k===u.VK?l=o.RKASK(a.u.info):(r(a.k===u.VNONRELOC),l=a.u.info);var i=pt(t,n);switch(Y(t,a,n),e){case v.OPR_NE:a.u.info=U(t,f.OP_EQ,0,l,i);break;case v.OPR_GT:case v.OPR_GE:var c=e-v.OPR_NE+f.OP_EQ;a.u.info=U(t,c,1,i,l);break;default:var _=e-v.OPR_EQ+f.OP_EQ;a.u.info=U(t,_,1,l,i)}a.k=u.VJMP},Et=function(t,e,a,r){var u=new s.expdesc;switch(u.k=s.expkind.VKINT,u.u.ival=u.u.nval=u.u.info=0,u.t=-1,u.f=-1,e){case h.OPR_MINUS:case h.OPR_BNOT:if(kt(e+n.LUA_OPUNM,a,u))break;case h.OPR_LEN:Ot(t,e+f.OP_UNM,a,r);break;case h.OPR_NOT:Tt(t,a)}},yt=function(t,e,a){switch(e){case v.OPR_AND:Lt(t,a);break;case v.OPR_OR:At(t,a);break;case v.OPR_CONCAT:it(t,a);break;case v.OPR_ADD:case v.OPR_SUB:case v.OPR_MUL:case v.OPR_DIV:case v.OPR_IDIV:case v.OPR_MOD:case v.OPR_POW:case v.OPR_BAND:case v.OPR_BOR:case v.OPR_BXOR:case v.OPR_SHL:case v.OPR_SHR:d(a,!1)||pt(t,a);break;default:pt(t,a)}},St=function(t,e,a,u,l){var i=s.expkind;switch(e){case v.OPR_AND:r(-1===a.t),rt(t,u),u.f=x(t,u.f,a.f),a.to(u);break;case v.OPR_OR:r(-1===a.f),rt(t,u),u.t=x(t,u.t,a.t),a.to(u);break;case v.OPR_CONCAT:ft(t,u);var c=A(t,u);u.k===i.VRELOCABLE&&c.opcode===f.OP_CONCAT?(r(a.u.info===c.B-1),z(t,a),o.SETARG_B(c,a.u.info),a.k=i.VRELOCABLE,a.u.info=u.u.info):(it(t,u),mt(t,f.OP_CONCAT,a,u,l));break;case v.OPR_ADD:case v.OPR_SUB:case v.OPR_MUL:case v.OPR_DIV:case v.OPR_IDIV:case v.OPR_MOD:case v.OPR_POW:case v.OPR_BAND:case v.OPR_BOR:case v.OPR_BXOR:case v.OPR_SHL:case v.OPR_SHR:kt(e+n.LUA_OPADD,a,u)||mt(t,e+f.OP_ADD,a,u,l);break;case v.OPR_EQ:case v.OPR_LT:case v.OPR_LE:case v.OPR_NE:case v.OPR_GT:case v.OPR_GE:Ut(t,e,a,u)}return a},Nt=function(t,e){t.f.lineinfo[t.pc-1]=e},Rt=function(t,e,a,l){var s=(a-1)/o.LFIELDS_PER_FLUSH+1,i=l===n.LUA_MULTRET?0:l;r(0!==l&&l<=o.LFIELDS_PER_FLUSH),s<=o.MAXARG_C?K(t,f.OP_SETLIST,e,i,s):s<=o.MAXARG_Ax?(K(t,f.OP_SETLIST,e,i,0),V(t,s)):u.luaX_syntaxerror(t.ls,n.to_luastring("constructor too long",!0)),t.freereg=e+1};t.exports.BinOpr=v,t.exports.NO_JUMP=-1,t.exports.UnOpr=h,t.exports.getinstruction=A,t.exports.luaK_checkstack=F,t.exports.luaK_code=D,t.exports.luaK_codeABC=K,t.exports.luaK_codeABx=B,t.exports.luaK_codeAsBx=G,t.exports.luaK_codek=j,t.exports.luaK_concat=x,t.exports.luaK_dischargevars=rt,t.exports.luaK_exp2RK=pt,t.exports.luaK_exp2anyreg=ct,t.exports.luaK_exp2anyregup=_t,t.exports.luaK_exp2nextreg=it,t.exports.luaK_exp2val=ft,t.exports.luaK_fixline=Nt,t.exports.luaK_getlabel=E,t.exports.luaK_goiffalse=At,t.exports.luaK_goiftrue=Lt,t.exports.luaK_indexed=bt,t.exports.luaK_infix=yt,t.exports.luaK_intK=q,t.exports.luaK_jump=k,t.exports.luaK_jumpto=O,t.exports.luaK_nil=L,t.exports.luaK_numberK=W,t.exports.luaK_patchclose=P,t.exports.luaK_patchlist=C,t.exports.luaK_patchtohere=M,t.exports.luaK_posfix=St,t.exports.luaK_prefix=Et,t.exports.luaK_reserveregs=X,t.exports.luaK_ret=m,t.exports.luaK_self=ht,t.exports.luaK_setlist=Rt,t.exports.luaK_setmultret=et,t.exports.luaK_setoneret=at,t.exports.luaK_setreturns=tt,t.exports.luaK_storevar=vt,t.exports.luaK_stringK=J},function(t,e,a){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var n=function(){function t(t,e){for(var a=0;a<e.length;a++){var r=e[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,a,r){return a&&t(e.prototype,a),r&&t(e,r),e}}(),u=a(0),l=a(1),o=a(5),s=a(10),i=a(3),c=a(14),_=a(8),f=a(16),p=[25,147,l.char["\r"],l.char["\n"],26,l.char["\n"]],v=function(){function t(e,a,n){r(this,t),this.intSize=4,this.size_tSize=4,this.instructionSize=4,this.integerSize=4,this.numberSize=8,u(a instanceof f.ZIO,"BytecodeParser only operates on a ZIO"),u(l.is_luastring(n)),n[0]==l.char["@"]||n[0]==l.char["="]?this.name=n.subarray(1):n[0]==l.LUA_SIGNATURE.charCodeAt(0)?this.name=l.to_luastring("binary string",!0):this.name=n,this.L=e,this.Z=a,this.arraybuffer=new ArrayBuffer(Math.max(this.intSize,this.size_tSize,this.instructionSize,this.integerSize,this.numberSize)),this.dv=new DataView(this.arraybuffer),this.u8=new Uint8Array(this.arraybuffer)}return n(t,[{key:"read",value:function(t){var e=new Uint8Array(t);return 0!==f.luaZ_read(this.Z,e,0,t)&&this.error("truncated"),e}},{key:"readByte",value:function(){return 0!==f.luaZ_read(this.Z,this.u8,0,1)&&this.error("truncated"),this.u8[0]}},{key:"readInteger",value:function(){return 0!==f.luaZ_read(this.Z,this.u8,0,this.integerSize)&&this.error("truncated"),this.dv.getInt32(0,!0)}},{key:"readSize_t",value:function(){return this.readInteger()}},{key:"readInt",value:function(){return 0!==f.luaZ_read(this.Z,this.u8,0,this.intSize)&&this.error("truncated"),this.dv.getInt32(0,!0)}},{key:"readNumber",value:function(){return 0!==f.luaZ_read(this.Z,this.u8,0,this.numberSize)&&this.error("truncated"),this.dv.getFloat64(0,!0)}},{key:"readString",value:function(){var t=Math.max(this.readByte()-1,0);return t+1===255&&(t=this.readSize_t()-1),0===t?null:_.luaS_bless(this.L,this.read(t))}},{key:"readInstruction",value:function(){return 0!==f.luaZ_read(this.Z,this.u8,0,this.instructionSize)&&this.error("truncated"),this.dv.getUint32(0,!0)}},{key:"readCode",value:function(e){for(var a=this.readInt(),r=c,n=t,u=0;u<a;u++){var l=this.readInstruction();e.code[u]={code:l,opcode:l>>r.POS_OP&n.MASK1(r.SIZE_OP,0),A:l>>r.POS_A&n.MASK1(r.SIZE_A,0),B:l>>r.POS_B&n.MASK1(r.SIZE_B,0),C:l>>r.POS_C&n.MASK1(r.SIZE_C,0),Bx:l>>r.POS_Bx&n.MASK1(r.SIZE_Bx,0),Ax:l>>r.POS_Ax&n.MASK1(r.SIZE_Ax,0),sBx:(l>>r.POS_Bx&n.MASK1(r.SIZE_Bx,0))-r.MAXARG_sBx}}}},{key:"readUpvalues",value:function(t){for(var e=this.readInt(),a=0;a<e;a++)t.upvalues[a]={name:null,instack:this.readByte(),idx:this.readByte()}}},{key:"readConstants",value:function(t){for(var e=this.readInt(),a=0;a<e;a++){var r=this.readByte();switch(r){case l.CT.LUA_TNIL:t.k.push(new i.TValue(l.CT.LUA_TNIL,null));break;case l.CT.LUA_TBOOLEAN:t.k.push(new i.TValue(l.CT.LUA_TBOOLEAN,0!==this.readByte()));break;case l.CT.LUA_TNUMFLT:t.k.push(new i.TValue(l.CT.LUA_TNUMFLT,this.readNumber()));break;case l.CT.LUA_TNUMINT:t.k.push(new i.TValue(l.CT.LUA_TNUMINT,this.readInteger()));break;case l.CT.LUA_TSHRSTR:case l.CT.LUA_TLNGSTR:t.k.push(new i.TValue(l.CT.LUA_TLNGSTR,this.readString()));break;default:this.error("unrecognized constant '"+r+"'")}}}},{key:"readProtos",value:function(t){for(var e=this.readInt(),a=0;a<e;a++)t.p[a]=new s.Proto(this.L),this.readFunction(t.p[a],t.source)}},{key:"readDebug",value:function(t){for(var e=this.readInt(),a=0;a<e;a++)t.lineinfo[a]=this.readInt();e=this.readInt();for(var r=0;r<e;r++)t.locvars[r]={varname:this.readString(),startpc:this.readInt(),endpc:this.readInt()};e=this.readInt();for(var n=0;n<e;n++)t.upvalues[n].name=this.readString()}},{key:"readFunction",value:function(t,e){t.source=this.readString(),null===t.source&&(t.source=e),t.linedefined=this.readInt(),t.lastlinedefined=this.readInt(),t.numparams=this.readByte(),t.is_vararg=0!==this.readByte(),t.maxstacksize=this.readByte(),this.readCode(t),this.readConstants(t),this.readUpvalues(t),this.readProtos(t),this.readDebug(t)}},{key:"checkliteral",value:function(t,e){var a=this.read(t.length);l.luastring_eq(a,t)||this.error(e)}},{key:"checkHeader",value:function(){this.checkliteral(l.to_luastring(l.LUA_SIGNATURE.substring(1)),"not a"),83!==this.readByte()&&this.error("version mismatch in"),0!==this.readByte()&&this.error("format mismatch in"),this.checkliteral(p,"corrupted"),this.intSize=this.readByte(),this.size_tSize=this.readByte(),this.instructionSize=this.readByte(),this.integerSize=this.readByte(),this.numberSize=this.readByte(),this.checksize(this.intSize,4,"int"),this.checksize(this.size_tSize,4,"size_t"),this.checksize(this.instructionSize,4,"instruction"),this.checksize(this.integerSize,4,"integer"),this.checksize(this.numberSize,8,"number"),22136!==this.readInteger()&&this.error("endianness mismatch in"),370.5!==this.readNumber()&&this.error("float format mismatch in")}},{key:"error",value:function(t){i.luaO_pushfstring(this.L,l.to_luastring("%s: %s precompiled chunk"),this.name,l.to_luastring(t)),o.luaD_throw(this.L,l.thread_status.LUA_ERRSYNTAX)}},{key:"checksize",value:function(t,e,a){t!==e&&this.error(a+" size mismatch in")}}],[{key:"MASK1",value:function(t,e){return~(-1<<t)<<e}},{key:"MASK0",value:function(e,a){return~t.MASK1(e,a)}}]),t}(),h=function(t,e,a){var r=new v(t,e,a);r.checkHeader();var n=s.luaF_newLclosure(t,r.readByte());return o.luaD_inctop(t),t.stack[t.top-1].setclLvalue(n),n.p=new s.Proto(t),r.readFunction(n.p,null),u(n.nupvalues===n.p.upvalues.length),n};t.exports.luaU_undump=h},function(t,e,a){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var n=a(1),u=n.constant_types,l=n.luastring_of(25,147,13,10,26,10),o=16*Number(n.LUA_VERSION_MAJOR)+Number(n.LUA_VERSION_MINOR),s=function t(){r(this,t),this.L=null,this.write=null,this.data=null,this.strip=NaN,this.status=NaN},i=function(t,e,a){0===a.status&&e>0&&(a.status=a.writer(a.L,t,e,a.data))},c=function(t,e){t=n.to_luastring(t),i(t,t.length,e)},_=function(t,e){i(n.luastring_of(t),1,e)},f=function(t,e){var a=new ArrayBuffer(4);new DataView(a).setInt32(0,t,!0);var r=new Uint8Array(a);i(r,4,e)},p=function(t,e){var a=new ArrayBuffer(4);new DataView(a).setInt32(0,t,!0);var r=new Uint8Array(a);i(r,4,e)},v=function(t,e){var a=new ArrayBuffer(8);new DataView(a).setFloat64(0,t,!0);var r=new Uint8Array(a);i(r,8,e)},h=function(t,e){if(null===t)_(0,e);else{var a=t.tsslen()+1,r=t.getstr();a<255?_(a,e):(_(255,e),p(a,e)),i(r,a-1,e)}},g=function(t,e){var a=t.code.map(function(t){return t.code});f(a.length,e);for(var r=0;r<a.length;r++)f(a[r],e)},d=function(t,e){var a=t.k.length;f(a,e);for(var r=0;r<a;r++){var n=t.k[r];switch(_(n.ttype(),e),n.ttype()){case u.LUA_TNIL:break;case u.LUA_TBOOLEAN:_(n.value?1:0,e);break;case u.LUA_TNUMFLT:v(n.value,e);break;case u.LUA_TNUMINT:p(n.value,e);break;case u.LUA_TSHRSTR:case u.LUA_TLNGSTR:h(n.tsvalue(),e)}}},L=function(t,e){var a=t.p.length;f(a,e);for(var r=0;r<a;r++)b(t.p[r],t.source,e)},A=function(t,e){var a=t.upvalues.length;f(a,e);for(var r=0;r<a;r++)_(t.upvalues[r].instack?1:0,e),_(t.upvalues[r].idx,e)},T=function(t,e){var a=e.strip?0:t.lineinfo.length;f(a,e);for(var r=0;r<a;r++)f(t.lineinfo[r],e);a=e.strip?0:t.locvars.length,f(a,e);for(var n=0;n<a;n++)h(t.locvars[n].varname,e),f(t.locvars[n].startpc,e),f(t.locvars[n].endpc,e);a=e.strip?0:t.upvalues.length,f(a,e);for(var u=0;u<a;u++)h(t.upvalues[u].name,e)},b=function(t,e,a){a.strip||t.source===e?h(null,a):h(t.source,a),f(t.linedefined,a),f(t.lastlinedefined,a),_(t.numparams,a),_(t.is_vararg?1:0,a),_(t.maxstacksize,a),g(t,a),d(t,a),A(t,a),L(t,a),T(t,a)},x=function(t){c(n.LUA_SIGNATURE,t),_(o,t),_(0,t),i(l,l.length,t),_(4,t),_(4,t),_(4,t),_(4,t),_(8,t),p(22136,t),v(370.5,t)},k=function(t,e,a,r,n){var u=new s;return u.L=t,u.writer=a,u.data=r,u.strip=n,u.status=0,x(u),_(e.upvalues.length,u),b(e,null,u),u.status};t.exports.luaU_dump=k},function(t,e,a){"use strict";function r(t,e,a){return e in t?Object.defineProperty(t,e,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[e]=a,t}var n=a(2),u=a(4),l=a(39),o=a(23),s=a(24),i=a(25),c=a(26),_=a(27),f=a(28),p=a(29),v=a(30),h=a(22),g=function(t){var e,a=(e={},r(e,h.LUA_LOADLIBNAME,v.luaopen_package),r(e,h.LUA_COLIBNAME,o.luaopen_coroutine),r(e,h.LUA_DBLIBNAME,f.luaopen_debug),r(e,h.LUA_MATHLIBNAME,s.luaopen_math),r(e,h.LUA_OSLIBNAME,p.luaopen_os),r(e,h.LUA_STRLIBNAME,i.luaopen_string),r(e,h.LUA_TABLIBNAME,c.luaopen_table),r(e,h.LUA_UTF8LIBNAME,_.luaopen_utf8),r(e,"_G",l.luaopen_base),e);for(var g in a)u.luaL_requiref(t,n.to_luastring(g),a[g],1),n.lua_pop(t,1)};t.exports.luaL_openlibs=g},function(t,e,a){"use strict";var r=a(2),n=a(4),u=void 0,l=void 0;if("function"==typeof TextDecoder){var o="",s=new TextDecoder("utf-8");u=function(t){o+=s.decode(t,{stream:!0})};var i=new Uint8Array(0);l=function(){o+=s.decode(i),console.log(o),o=""}}else{var c=[];u=function(t){try{t=r.to_jsstring(t)}catch(a){var e=new Uint8Array(t.length);e.set(t),t=e}c.push(t)},l=function(){console.log.apply(console.log,c),c=[]}}var _=function(t){var e=r.lua_gettop(t);r.lua_getglobal(t,r.to_luastring("tostring",!0));for(var a=1;a<=e;a++){r.lua_pushvalue(t,-1),r.lua_pushvalue(t,a),r.lua_call(t,1,1);var o=r.lua_tolstring(t,-1);if(null===o)return n.luaL_error(t,r.to_luastring("'tostring' must return a string to 'print'",!0));a>1&&u(r.to_luastring("\t")),u(o),r.lua_pop(t,1)}return l(),0},f=function(t){return n.luaL_checkany(t,1),n.luaL_tolstring(t,1),1},p=function(t){return n.luaL_checkany(t,1),r.lua_getmetatable(t,1)?(n.luaL_getmetafield(t,1,r.to_luastring("__metatable",!0)),1):(r.lua_pushnil(t),1)},v=function(t){var e=r.lua_type(t,2);return n.luaL_checktype(t,1,r.LUA_TTABLE),n.luaL_argcheck(t,e===r.LUA_TNIL||e===r.LUA_TTABLE,2,r.to_luastring("nil or table expected",!0)),n.luaL_getmetafield(t,1,r.to_luastring("__metatable",!0))!==r.LUA_TNIL?n.luaL_error(t,r.to_luastring("cannot change a protected metatable",!0)):(r.lua_settop(t,2),r.lua_setmetatable(t,1),1)},h=function(t){return n.luaL_checkany(t,1),n.luaL_checkany(t,2),r.lua_pushboolean(t,r.lua_rawequal(t,1,2)),1},g=function(t){var e=r.lua_type(t,1);return n.luaL_argcheck(t,e===r.LUA_TTABLE||e===r.LUA_TSTRING,1,r.to_luastring("table or string expected",!0)),r.lua_pushinteger(t,r.lua_rawlen(t,1)),1},d=function(t){return n.luaL_checktype(t,1,r.LUA_TTABLE),n.luaL_checkany(t,2),r.lua_settop(t,2),r.lua_rawget(t,1),1},L=function(t){return n.luaL_checktype(t,1,r.LUA_TTABLE),n.luaL_checkany(t,2),n.luaL_checkany(t,3),r.lua_settop(t,3),r.lua_rawset(t,1),1},A=["stop","restart","collect","count","step","setpause","setstepmul","isrunning"].map(function(t){return r.to_luastring(t)}),T=function(t){n.luaL_checkoption(t,1,r.to_luastring("collect"),A),n.luaL_optinteger(t,2,0),n.luaL_error(t,r.to_luastring("lua_gc not implemented"))},b=function(t){var e=r.lua_type(t,1);return n.luaL_argcheck(t,e!==r.LUA_TNONE,1,r.to_luastring("value expected",!0)),r.lua_pushstring(t,r.lua_typename(t,e)),1},x=function(t,e,a,u){return n.luaL_checkany(t,1),n.luaL_getmetafield(t,1,e)===r.LUA_TNIL?(r.lua_pushcfunction(t,u),r.lua_pushvalue(t,1),a?r.lua_pushinteger(t,0):r.lua_pushnil(t)):(r.lua_pushvalue(t,1),r.lua_call(t,1,3)),3},k=function(t){return n.luaL_checktype(t,1,r.LUA_TTABLE),r.lua_settop(t,2),r.lua_next(t,1)?2:(r.lua_pushnil(t),1)},O=function(t){return x(t,r.to_luastring("__pairs",!0),0,k)},m=function(t){var e=n.luaL_checkinteger(t,2)+1;return r.lua_pushinteger(t,e),r.lua_geti(t,1,e)===r.LUA_TNIL?1:2},U=function(t){return n.luaL_checkany(t,1),r.lua_pushcfunction(t,m),r.lua_pushvalue(t,1),r.lua_pushinteger(t,0),3},E=function(t,e){try{t=r.to_jsstring(t)}catch(t){return null}var a=/^[\t\v\f \n\r]*([+-]?)0*([0-9A-Za-z]+)[\t\v\f \n\r]*$/.exec(t);if(!a)return null;for(var n="-"===a[1],u=a[2],l=0,o=0;o<u.length;o++){var s=/\d/.test(u[o])?u.charCodeAt(o)-"0".charCodeAt(0):u[o].toUpperCase().charCodeAt(0)-"A".charCodeAt(0)+10;if(s>=e)return null;l=(l*e|0)+s}return 0|(n?-l:l)},y=function(t){if(r.lua_type(t,2)<=0){if(n.luaL_checkany(t,1),r.lua_type(t,1)===r.LUA_TNUMBER)return r.lua_settop(t,1),1;var e=r.lua_tostring(t,1);if(null!==e&&r.lua_stringtonumber(t,e)===e.length+1)return 1}else{var a=n.luaL_checkinteger(t,2);n.luaL_checktype(t,1,r.LUA_TSTRING);var u=r.lua_tostring(t,1);n.luaL_argcheck(t,2<=a&&a<=36,2,r.to_luastring("base out of range",!0));var l=E(u,a);if(null!==l)return r.lua_pushinteger(t,l),1}return r.lua_pushnil(t),1},S=function(t){var e=n.luaL_optinteger(t,2,1);return r.lua_settop(t,1),r.lua_type(t,1)===r.LUA_TSTRING&&e>0&&(n.luaL_where(t,e),r.lua_pushvalue(t,1),r.lua_concat(t,2)),r.lua_error(t)},N=function(t){return r.lua_toboolean(t,1)?r.lua_gettop(t):(n.luaL_checkany(t,1),r.lua_remove(t,1),r.lua_pushliteral(t,"assertion failed!"),r.lua_settop(t,1),S(t))},R=function(t){var e=r.lua_gettop(t);if(r.lua_type(t,1)===r.LUA_TSTRING&&r.lua_tostring(t,1)[0]==="#".charCodeAt(0))return r.lua_pushinteger(t,e-1),1;var a=n.luaL_checkinteger(t,1);return a<0?a=e+a:a>e&&(a=e),n.luaL_argcheck(t,1<=a,1,r.to_luastring("index out of range",!0)),e-a},w=function(t,e,a){return e!==r.LUA_OK&&e!==r.LUA_YIELD?(r.lua_pushboolean(t,0),r.lua_pushvalue(t,-2),2):r.lua_gettop(t)-a},I=function(t){n.luaL_checkany(t,1),r.lua_pushboolean(t,1),r.lua_insert(t,1);var e=r.lua_pcallk(t,r.lua_gettop(t)-2,r.LUA_MULTRET,0,0,w);return w(t,e,0)},M=function(t){var e=r.lua_gettop(t);n.luaL_checktype(t,2,r.LUA_TFUNCTION),r.lua_pushboolean(t,1),r.lua_pushvalue(t,1),r.lua_rotate(t,3,2);var a=r.lua_pcallk(t,e-2,r.LUA_MULTRET,2,2,w);return w(t,a,2)},C=function(t,e,a){return e===r.LUA_OK?(0!==a&&(r.lua_pushvalue(t,a),r.lua_setupvalue(t,-2,1)||r.lua_pop(t,1)),1):(r.lua_pushnil(t),r.lua_insert(t,-2),2)},P=function(t,e){return n.luaL_checkstack(t,2,r.to_luastring("too many nested functions",!0)),r.lua_pushvalue(t,1),r.lua_call(t,0,1),r.lua_isnil(t,-1)?(r.lua_pop(t,1),null):(r.lua_isstring(t,-1)||n.luaL_error(t,r.to_luastring("reader function must return a string",!0)),r.lua_replace(t,5),r.lua_tostring(t,5))},D=function(t){var e=r.lua_tostring(t,1),a=n.luaL_optstring(t,3,r.to_luastring("bt",!0)),u=r.lua_isnone(t,4)?0:4,l=void 0;if(null!==e){var o=n.luaL_optstring(t,2,e);l=n.luaL_loadbufferx(t,e,e.length,o,a)}else{var s=n.luaL_optstring(t,2,r.to_luastring("=(load)",!0));n.luaL_checktype(t,1,r.LUA_TFUNCTION),r.lua_settop(t,5),l=r.lua_load(t,P,null,s,a)}return C(t,l,u)},K=function(t){var e=n.luaL_optstring(t,1,null),a=n.luaL_optstring(t,2,null),u=r.lua_isnone(t,3)?0:3,l=n.luaL_loadfilex(t,e,a);return C(t,l,u)},B=function(t,e,a){return r.lua_gettop(t)-1},G=function(t){var e=n.luaL_optstring(t,1,null);return r.lua_settop(t,1),n.luaL_loadfile(t,e)!==r.LUA_OK?r.lua_error(t):(r.lua_callk(t,0,r.LUA_MULTRET,0,B),B(t))},V={assert:N,collectgarbage:T,dofile:G,error:S,getmetatable:p,ipairs:U,load:D,loadfile:K,next:k,pairs:O,pcall:I,print:_,rawequal:h,rawget:d,rawlen:g,rawset:L,select:R,setmetatable:v,tonumber:y,tostring:f,type:b,xpcall:M},j=function(t){return r.lua_pushglobaltable(t),n.luaL_setfuncs(t,V,0),r.lua_pushvalue(t,-1),r.lua_setfield(t,-2,r.to_luastring("_G",!0)),r.lua_pushliteral(t,r.LUA_VERSION),r.lua_setfield(t,-2,r.to_luastring("_VERSION",!0)),1};t.exports.luaopen_base=j},function(t,e,a){"use strict";var r;!function(){function n(t){return l(o(t),arguments)}function u(t,e){return n.apply(null,[t].concat(e||[]))}function l(t,e){var a,r,u,l,o,i,c,_,f,p=1,v=t.length,h="";for(r=0;r<v;r++)if("string"==typeof t[r])h+=t[r];else if(Array.isArray(t[r])){if(l=t[r],l[2])for(a=e[p],u=0;u<l[2].length;u++){if(!a.hasOwnProperty(l[2][u]))throw new Error(n('[sprintf] property "%s" does not exist',l[2][u]));a=a[l[2][u]]}else a=l[1]?e[l[1]]:e[p++];if(s.not_type.test(l[8])&&s.not_primitive.test(l[8])&&a instanceof Function&&(a=a()),s.numeric_arg.test(l[8])&&"number"!=typeof a&&isNaN(a))throw new TypeError(n("[sprintf] expecting number but found %T",a));switch(s.number.test(l[8])&&(_=a>=0),l[8]){case"b":a=parseInt(a,10).toString(2);break;case"c":a=String.fromCharCode(parseInt(a,10));break;case"d":case"i":a=parseInt(a,10);break;case"j":a=JSON.stringify(a,null,l[6]?parseInt(l[6]):0);break;case"e":a=l[7]?parseFloat(a).toExponential(l[7]):parseFloat(a).toExponential();break;case"f":a=l[7]?parseFloat(a).toFixed(l[7]):parseFloat(a);break;case"g":a=l[7]?String(Number(a.toPrecision(l[7]))):parseFloat(a);break;case"o":a=(parseInt(a,10)>>>0).toString(8);break;case"s":a=String(a),a=l[7]?a.substring(0,l[7]):a;break;case"t":a=String(!!a),a=l[7]?a.substring(0,l[7]):a;break;case"T":a=Object.prototype.toString.call(a).slice(8,-1).toLowerCase(),a=l[7]?a.substring(0,l[7]):a;break;case"u":a=parseInt(a,10)>>>0;break;case"v":a=a.valueOf(),a=l[7]?a.substring(0,l[7]):a;break;case"x":a=(parseInt(a,10)>>>0).toString(16);break;case"X":a=(parseInt(a,10)>>>0).toString(16).toUpperCase()}s.json.test(l[8])?h+=a:(!s.number.test(l[8])||_&&!l[3]?f="":(f=_?"+":"-",a=a.toString().replace(s.sign,"")),i=l[4]?"0"===l[4]?"0":l[4].charAt(1):" ",c=l[6]-(f+a).length,o=l[6]&&c>0?i.repeat(c):"",h+=l[5]?f+a+o:"0"===i?f+o+a:o+f+a)}return h}function o(t){if(i[t])return i[t];for(var e,a=t,r=[],n=0;a;){if(null!==(e=s.text.exec(a)))r.push(e[0]);else if(null!==(e=s.modulo.exec(a)))r.push("%");else{if(null===(e=s.placeholder.exec(a)))throw new SyntaxError("[sprintf] unexpected placeholder");if(e[2]){n|=1;var u=[],l=e[2],o=[];if(null===(o=s.key.exec(l)))throw new SyntaxError("[sprintf] failed to parse named argument key");for(u.push(o[1]);""!==(l=l.substring(o[0].length));)if(null!==(o=s.key_access.exec(l)))u.push(o[1]);else{if(null===(o=s.index_access.exec(l)))throw new SyntaxError("[sprintf] failed to parse named argument key");u.push(o[1])}e[2]=u}else n|=2;if(3===n)throw new Error("[sprintf] mixing positional and named placeholders is not (yet) supported");r.push(e)}a=a.substring(e[0].length)}return i[t]=r}var s={not_string:/[^s]/,not_bool:/[^t]/,not_type:/[^T]/,not_primitive:/[^v]/,number:/[diefg]/,numeric_arg:/[bcdiefguxX]/,json:/[j]/,not_json:/[^j]/,text:/^[^\x25]+/,modulo:/^\x25{2}/,placeholder:/^\x25(?:([1-9]\d*)\$|\(([^\)]+)\))?(\+)?(0|'[^$])?(-)?(\d+)?(?:\.(\d+))?([b-gijostTuvxX])/,key:/^([a-z_][a-z_\d]*)/i,key_access:/^\.([a-z_][a-z_\d]*)/i,index_access:/^\[(\d+)\]/,sign:/^[\+\-]/},i=Object.create(null);e.sprintf=n,e.vsprintf=u,"undefined"!=typeof window&&(window.sprintf=n,window.vsprintf=u,void 0!==(r=function(){return{sprintf:n,vsprintf:u}}.call(e,a,e,t))&&(t.exports=r))}()},function(t,e,a){"use strict";var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};!function(){function e(t,c,p){function v(t,e){var a;if(e){if(a=e.getTime(),A){var r=s(e);if(e=new Date(a+r+L),s(e)!==r){var n=s(e);e=new Date(a+n+L)}}}else{var u=Date.now();u>T?(T=u,g=new Date(T),a=T,A&&(g=new Date(T+s(g)+L))):a=T,e=g}return h(t,e,d,a)}function h(t,e,r,s){for(var c="",_=null,f=!1,p=t.length,v=!1,g=0;g<p;g++){var d=t.charCodeAt(g);if(!0!==f)37!==d?c+=t[g]:f=!0;else{if(45===d){_="";continue}if(95===d){_=" ";continue}if(48===d){_="0";continue}if(58===d){v&&i("[WARNING] detected use of unsupported %:: or %::: modifiers to strftime"),v=!0;continue}switch(d){case 37:c+="%";break;case 65:c+=r.days[e.getDay()];break;case 66:c+=r.months[e.getMonth()];break;case 67:c+=a(Math.floor(e.getFullYear()/100),_);break;case 68:c+=h(r.formats.D,e,r,s);break;case 70:c+=h(r.formats.F,e,r,s);break;case 72:c+=a(e.getHours(),_);break;case 73:c+=a(u(e.getHours()),_);break;case 76:c+=n(Math.floor(s%1e3));break;case 77:c+=a(e.getMinutes(),_);break;case 80:c+=e.getHours()<12?r.am:r.pm;break;case 82:c+=h(r.formats.R,e,r,s);break;case 83:c+=a(e.getSeconds(),_);break;case 84:c+=h(r.formats.T,e,r,s);break;case 85:c+=a(l(e,"sunday"),_);break;case 87:c+=a(l(e,"monday"),_);break;case 88:c+=h(r.formats.X,e,r,s);break;case 89:c+=e.getFullYear();break;case 90:if(A&&0===L)c+="GMT";else{var T=e.toString().match(/\(([\w\s]+)\)/);c+=T&&T[1]||""}break;case 97:c+=r.shortDays[e.getDay()];break;case 98:c+=r.shortMonths[e.getMonth()];break;case 99:c+=h(r.formats.c,e,r,s);break;case 100:c+=a(e.getDate(),_);break;case 101:c+=a(e.getDate(),null==_?" ":_);break;case 104:c+=r.shortMonths[e.getMonth()];break;case 106:var b=new Date(e.getFullYear(),0,1),x=Math.ceil((e.getTime()-b.getTime())/864e5);c+=n(x);break;case 107:c+=a(e.getHours(),null==_?" ":_);break;case 108:c+=a(u(e.getHours()),null==_?" ":_);break;case 109:c+=a(e.getMonth()+1,_);break;case 110:c+="\n";break;case 111:var x=e.getDate();r.ordinalSuffixes?c+=String(x)+(r.ordinalSuffixes[x-1]||o(x)):c+=String(x)+o(x);break;case 112:c+=e.getHours()<12?r.AM:r.PM;break;case 114:c+=h(r.formats.r,e,r,s);break;case 115:c+=Math.floor(s/1e3);break;case 116:c+="\t";break;case 117:var x=e.getDay();c+=0===x?7:x;break;case 118:c+=h(r.formats.v,e,r,s);break;case 119:c+=e.getDay();break;case 120:c+=h(r.formats.x,e,r,s);break;case 121:c+=(""+e.getFullYear()).slice(2);break;case 122:if(A&&0===L)c+=v?"+00:00":"+0000";else{var k;k=0!==L?L/6e4:-e.getTimezoneOffset();var O=k<0?"-":"+",m=v?":":"",U=Math.floor(Math.abs(k/60)),E=Math.abs(k%60);c+=O+a(U)+m+a(E)}break;default:f&&(c+="%"),c+=t[g]}_=null,f=!1}}return c}var g,d=t||f,L=c||0,A=p||!1,T=0,b=v;return b.localize=function(t){return new e(t||d,L,A)},b.localizeByIdentifier=function(t){var e=_[t];return e?b.localize(e):(i('[WARNING] No locale found with identifier "'+t+'".'),b)},b.timezone=function(t){var a=L,n=A,u=void 0===t?"undefined":r(t);if("number"===u||"string"===u)if(n=!0,"string"===u){var l="-"===t[0]?-1:1,o=parseInt(t.slice(1,3),10),s=parseInt(t.slice(3,5),10);a=l*(60*o+s)*60*1e3}else"number"===u&&(a=60*t*1e3);return new e(d,a,n)},b.utc=function(){return new e(d,L,!0)},b}function a(t,e){return""===e||t>9?t:(null==e&&(e="0"),e+t)}function n(t){return t>99?t:t>9?"0"+t:"00"+t}function u(t){return 0===t?12:t>12?t-12:t}function l(t,e){e=e||"sunday";var a=t.getDay();"monday"===e&&(0===a?a=6:a--);var r=Date.UTC(t.getFullYear(),0,1),n=Date.UTC(t.getFullYear(),t.getMonth(),t.getDate()),u=Math.floor((n-r)/864e5),l=(u+7-a)/7;return Math.floor(l)}function o(t){var e=t%10,a=t%100;if(a>=11&&a<=13||0===e||e>=4)return"th";switch(e){case 1:return"st";case 2:return"nd";case 3:return"rd"}}function s(t){return 6e4*(t.getTimezoneOffset()||0)}function i(t){"undefined"!=typeof console&&"function"==typeof console.warn&&console.warn(t)}var c,_={de_DE:{days:["Sonntag","Montag","Dienstag","Mittwoch","Donnerstag","Freitag","Samstag"],shortDays:["So","Mo","Di","Mi","Do","Fr","Sa"],months:["Januar","Februar","März","April","Mai","Juni","Juli","August","September","Oktober","November","Dezember"],shortMonths:["Jan","Feb","Mär","Apr","Mai","Jun","Jul","Aug","Sep","Okt","Nov","Dez"],AM:"AM",PM:"PM",am:"am",pm:"pm",formats:{c:"%a %d %b %Y %X %Z",D:"%d.%m.%Y",F:"%Y-%m-%d",R:"%H:%M",r:"%I:%M:%S %p",T:"%H:%M:%S",v:"%e-%b-%Y",X:"%T",x:"%D"}},en_CA:{days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],ordinalSuffixes:["st","nd","rd","th","th","th","th","th","th","th","th","th","th","th","th","th","th","th","th","th","st","nd","rd","th","th","th","th","th","th","th","st"],AM:"AM",PM:"PM",am:"am",pm:"pm",formats:{c:"%a %d %b %Y %X %Z",D:"%d/%m/%y",F:"%Y-%m-%d",R:"%H:%M",r:"%I:%M:%S %p",T:"%H:%M:%S",v:"%e-%b-%Y",X:"%r",x:"%D"}},en_US:{days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],ordinalSuffixes:["st","nd","rd","th","th","th","th","th","th","th","th","th","th","th","th","th","th","th","th","th","st","nd","rd","th","th","th","th","th","th","th","st"],AM:"AM",PM:"PM",am:"am",pm:"pm",formats:{c:"%a %d %b %Y %X %Z",D:"%m/%d/%y",F:"%Y-%m-%d",R:"%H:%M",r:"%I:%M:%S %p",T:"%H:%M:%S",v:"%e-%b-%Y",X:"%r",x:"%D"}},es_MX:{days:["domingo","lunes","martes","miércoles","jueves","viernes","sábado"],shortDays:["dom","lun","mar","mié","jue","vie","sáb"],months:["enero","febrero","marzo","abril","mayo","junio","julio","agosto","septiembre","octubre","noviembre"," diciembre"],shortMonths:["ene","feb","mar","abr","may","jun","jul","ago","sep","oct","nov","dic"],AM:"AM",PM:"PM",am:"am",pm:"pm",formats:{c:"%a %d %b %Y %X %Z",D:"%d/%m/%Y",F:"%Y-%m-%d",R:"%H:%M",r:"%I:%M:%S %p",T:"%H:%M:%S",v:"%e-%b-%Y",X:"%T",x:"%D"}},fr_FR:{days:["dimanche","lundi","mardi","mercredi","jeudi","vendredi","samedi"],shortDays:["dim.","lun.","mar.","mer.","jeu.","ven.","sam."],months:["janvier","février","mars","avril","mai","juin","juillet","août","septembre","octobre","novembre","décembre"],shortMonths:["janv.","févr.","mars","avril","mai","juin","juil.","août","sept.","oct.","nov.","déc."],AM:"AM",PM:"PM",am:"am",pm:"pm",formats:{c:"%a %d %b %Y %X %Z",D:"%d/%m/%Y",F:"%Y-%m-%d",R:"%H:%M",r:"%I:%M:%S %p",T:"%H:%M:%S",v:"%e-%b-%Y",X:"%T",x:"%D"}},it_IT:{days:["domenica","lunedì","martedì","mercoledì","giovedì","venerdì","sabato"],shortDays:["dom","lun","mar","mer","gio","ven","sab"],months:["gennaio","febbraio","marzo","aprile","maggio","giugno","luglio","agosto","settembre","ottobre","novembre","dicembre"],shortMonths:["pr","mag","giu","lug","ago","set","ott","nov","dic"],AM:"AM",PM:"PM",am:"am",pm:"pm",formats:{c:"%a %d %b %Y %X %Z",D:"%d/%m/%Y",F:"%Y-%m-%d",R:"%H:%M",r:"%I:%M:%S %p",T:"%H:%M:%S",v:"%e-%b-%Y",X:"%T",x:"%D"}},nl_NL:{days:["zondag","maandag","dinsdag","woensdag","donderdag","vrijdag","zaterdag"],shortDays:["zo","ma","di","wo","do","vr","za"],months:["januari","februari","maart","april","mei","juni","juli","augustus","september","oktober","november","december"],shortMonths:["jan","feb","mrt","apr","mei","jun","jul","aug","sep","okt","nov","dec"],AM:"AM",PM:"PM",am:"am",pm:"pm",formats:{c:"%a %d %b %Y %X %Z",D:"%d-%m-%y",F:"%Y-%m-%d",R:"%H:%M",r:"%I:%M:%S %p",T:"%H:%M:%S",v:"%e-%b-%Y",X:"%T",x:"%D"}},pt_BR:{days:["domingo","segunda","terça","quarta","quinta","sexta","sábado"],shortDays:["Dom","Seg","Ter","Qua","Qui","Sex","Sáb"],months:["janeiro","fevereiro","março","abril","maio","junho","julho","agosto","setembro","outubro","novembro","dezembro"],shortMonths:["Jan","Fev","Mar","Abr","Mai","Jun","Jul","Ago","Set","Out","Nov","Dez"],AM:"AM",PM:"PM",am:"am",pm:"pm",formats:{c:"%a %d %b %Y %X %Z",D:"%d-%m-%Y",F:"%Y-%m-%d",R:"%H:%M",r:"%I:%M:%S %p",T:"%H:%M:%S",v:"%e-%b-%Y",X:"%T",x:"%D"}},ru_RU:{days:["Воскресенье","Понедельник","Вторник","Среда","Четверг","Пятница","Суббота"],shortDays:["Вс","Пн","Вт","Ср","Чт","Пт","Сб"],months:["Январь","Февраль","Март","Апрель","Май","Июнь","Июль","Август","Сентябрь","Октябрь","Ноябрь","Декабрь"],shortMonths:["янв","фев","мар","апр","май","июн","июл","авг","сен","окт","ноя","дек"],AM:"AM",PM:"PM",am:"am",pm:"pm",formats:{c:"%a %d %b %Y %X",D:"%d.%m.%y",F:"%Y-%m-%d",R:"%H:%M",r:"%I:%M:%S %p",T:"%H:%M:%S",v:"%e-%b-%Y",X:"%T",x:"%D"}},tr_TR:{days:["Pazar","Pazartesi","Salı","Çarşamba","Perşembe","Cuma","Cumartesi"],shortDays:["Paz","Pzt","Sal","Çrş","Prş","Cum","Cts"],months:["Ocak","Şubat","Mart","Nisan","Mayıs","Haziran","Temmuz","Ağustos","Eylül","Ekim","Kasım","Aralık"],shortMonths:["Oca","Şub","Mar","Nis","May","Haz","Tem","Ağu","Eyl","Eki","Kas","Ara"],AM:"ÖÖ",PM:"ÖS",am:"ÖÖ",pm:"ÖS",formats:{c:"%a %d %b %Y %X %Z",D:"%d-%m-%Y",F:"%Y-%m-%d",R:"%H:%M",r:"%I:%M:%S %p",T:"%H:%M:%S",v:"%e-%b-%Y",X:"%T",x:"%D"}},zh_CN:{days:["星期日","星期一","星期二","星期三","星期四","星期五","星期六"],shortDays:["日","一","二","三","四","五","六"],months:["一月份","二月份","三月份","四月份","五月份","六月份","七月份","八月份","九月份","十月份","十一月份","十二月份"],shortMonths:["一月","二月","三月","四月","五月","六月","七月","八月","九月","十月","十一月","十二月"],AM:"上午",PM:"下午",am:"上午",pm:"下午",formats:{c:"%a %d %b %Y %X %Z",D:"%d/%m/%y",F:"%Y-%m-%d",R:"%H:%M",r:"%I:%M:%S %p",T:"%H:%M:%S",v:"%e-%b-%Y",X:"%r",x:"%D"}}},f=_.en_US,p=new e(f,0,!1),v=void 0!==t;v?c=t.exports=p:(c=function(){return this||(0,eval)("this")}(),c.strftime=p),"function"!=typeof Date.now&&(Date.now=function(){return+new Date})}()},function(module,exports,__webpack_require__){"use strict";var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},fengari=__webpack_require__(17),lua=fengari.lua,lauxlib=fengari.lauxlib,lualib=fengari.lualib,custom_inspect_symbol=void 0,global_env=function(){return"undefined"!=typeof window?window:"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope?self:eval("this")}(),apply=void 0,construct=void 0;if("undefined"!=typeof Reflect)apply=Reflect.apply,construct=Reflect.construct;else{var fApply=Function.apply,bind=Function.bind;apply=function(t,e,a){return fApply.call(t,e,a)},construct=function(t,e){switch(e.length){case 0:return new t;case 1:return new t(e[0]);case 2:return new t(e[0],e[1]);case 3:return new t(e[0],e[1],e[2]);case 4:return new t(e[0],e[1],e[2],e[3])}var a=[null];return a.push.apply(a,e),new(bind.apply(t,a))}}var toString=function(t){return""+t},isobject=function(t){return"object"===(void 0===t?"undefined":_typeof(t))?null!==t:"function"==typeof t},js_tname=lua.to_luastring("js object"),testjs=function(t,e){var a=lauxlib.luaL_testudata(t,e,js_tname);return a?a.data:void 0},checkjs=function(t,e){return lauxlib.luaL_checkudata(t,e,js_tname).data},pushjs=function(t,e){lua.lua_newuserdata(t).data=e,lauxlib.luaL_setmetatable(t,js_tname)},getmainthread=function(t){lua.lua_rawgeti(t,lua.LUA_REGISTRYINDEX,lua.LUA_RIDX_MAINTHREAD);var e=lua.lua_tothread(t,-1);return lua.lua_pop(t,1),e},states=new WeakMap,atnativeerror=function(t){var e=lua.lua_touserdata(t,1);return push(t,e),1},push=function(t,e){switch(void 0===e?"undefined":_typeof(e)){case"undefined":lua.lua_pushnil(t);break;case"number":lua.lua_pushnumber(t,e);break;case"string":lua.lua_pushstring(t,lua.to_luastring(e));break;case"boolean":lua.lua_pushboolean(t,e);break;case"symbol":lua.lua_pushlightuserdata(t,e);break;case"function":if(lua.lua_isproxy(e,t)){e(t);break}case"object":if(null===e){lua.lua_rawgetp(t,lua.LUA_REGISTRYINDEX,null);break}default:var a=states.get(getmainthread(t)),r=a.get(e);r?r(t):(pushjs(t,e),r=lua.lua_toproxy(t,-1),a.set(e,r))}},tojs=function(t,e){switch(lua.lua_type(t,e)){case lua.LUA_TNONE:case lua.LUA_TNIL:return;case lua.LUA_TBOOLEAN:return lua.lua_toboolean(t,e);case lua.LUA_TLIGHTUSERDATA:return lua.lua_touserdata(t,e);case lua.LUA_TNUMBER:return lua.lua_tonumber(t,e);case lua.LUA_TSTRING:return lua.lua_tojsstring(t,e);case lua.LUA_TUSERDATA:var a=testjs(t,e);if(void 0!==a)return a;case lua.LUA_TTABLE:case lua.LUA_TFUNCTION:case lua.LUA_TTHREAD:default:return wrap(t,lua.lua_toproxy(t,e))}},jscall=function(t,e){var a=lua.lua_pcall(t,e,1,0),r=tojs(t,-1);switch(lua.lua_pop(t,1),a){case lua.LUA_OK:return r;default:throw r}},invoke=function(t,e,a,r,n){lauxlib.luaL_checkstack(t,2+r.length),void 0!==n&&null!==n||(n=lua.LUA_MULTRET);var u=lua.lua_gettop(t);e(t),push(t,a);for(var l=0;l<r.length;l++)push(t,r[l]);switch(lua.lua_pcall(t,1+r.length,n,0)){case lua.LUA_OK:for(var o=lua.lua_gettop(t)-u,s=new Array(o),i=0;i<o;i++)s[i]=tojs(t,u+i+1);return lua.lua_settop(t,u),s;default:var c=tojs(t,-1);throw lua.lua_settop(t,u),c}},_get=function(t,e,a){return lauxlib.luaL_checkstack(t,3),lua.lua_pushcfunction(t,function(t){return lua.lua_gettable(t,1),1}),e(t),push(t,a),jscall(t,2)},_has=function(t,e,a){lauxlib.luaL_checkstack(t,3),lua.lua_pushcfunction(t,function(t){return lua.lua_gettable(t,1),1}),e(t),push(t,a);var r=lua.lua_pcall(t,2,1,0),n=lua.lua_isnil(t,-1);switch(lua.lua_pop(t,1),r){case lua.LUA_OK:return n;default:throw n}},_set=function(t,e,a,r){switch(lauxlib.luaL_checkstack(t,4),lua.lua_pushcfunction(t,function(t){return lua.lua_settable(t,1),0}),e(t),push(t,a),push(t,r),lua.lua_pcall(t,3,0,0)){case lua.LUA_OK:return;default:var n=tojs(t,-1);throw lua.lua_pop(t,1),n}},_deleteProperty=function(t,e,a){switch(lauxlib.luaL_checkstack(t,4),lua.lua_pushcfunction(t,function(t){return lua.lua_settable(t,1),0}),e(t),push(t,a),lua.lua_pushnil(t),lua.lua_pcall(t,3,0,0)){case lua.LUA_OK:return;default:var r=tojs(t,-1);throw lua.lua_pop(t,1),r}},tostring=function(t,e){return lauxlib.luaL_checkstack(t,2),lua.lua_pushcfunction(t,function(t){return lauxlib.luaL_tolstring(t,1),1}),e(t),jscall(t,1)},iter_next=function(){var t=this.L;lauxlib.luaL_checkstack(t,3);var e=lua.lua_gettop(t);switch(this.iter(t),this.state(t),this.last(t),lua.lua_pcall(t,2,lua.LUA_MULTRET,0)){case lua.LUA_OK:this.last=lua.lua_toproxy(t,e+1);var a=void 0;if(lua.lua_isnil(t,-1))a={done:!0,value:void 0};else{for(var r=lua.lua_gettop(t)-e,n=new Array(r),u=0;u<r;u++)n[u]=tojs(t,e+u+1);a={done:!1,value:n}}return lua.lua_settop(t,e),a;default:var l=tojs(t,-1);throw lua.lua_pop(t,1),l}},jsiterator=function(t,e){switch(lauxlib.luaL_checkstack(this.L,2),lauxlib.luaL_requiref(t,lua.to_luastring("_G"),lualib.luaopen_base,0),lua.lua_getfield(t,-1,lua.to_luastring("pairs")),lua.lua_remove(t,-2),e(t),lua.lua_pcall(t,1,3,0)){case lua.LUA_OK:var a=lua.lua_toproxy(t,-3),r=lua.lua_toproxy(t,-2),n=lua.lua_toproxy(t,-1);return lua.lua_pop(t,3),{L:t,iter:a,state:r,last:n,next:iter_next};default:var u=tojs(t,-1);throw lua.lua_pop(t,1),u}},wrap=function(t,e){var a=getmainthread(t),r=function(){return invoke(a,e,this,arguments,1)[0]};return r.apply=function(t,r){return invoke(a,e,t,r,1)[0]},r.invoke=function(t,r){return invoke(a,e,t,r,lua.LUA_MULTRET)},r.get=function(t){return _get(a,e,t)},r.has=function(t){return _has(a,e,t)},r.set=function(t,r){return _set(a,e,t,r)},r.delete=function(t){return _deleteProperty(a,e,t)},r.toString=function(){return tostring(a,e)},"function"==typeof Symbol&&(r[Symbol.toStringTag]="Fengari object",r[Symbol.iterator]=function(){return jsiterator(a,e)},Symbol.toPrimitive&&(r[Symbol.toPrimitive]=function(t){if("string"===t)return tostring(a,e)})),custom_inspect_symbol&&(r[custom_inspect_symbol]=r.toString),states.get(a).set(r,e),r},jslib={new:function(t){for(var e=tojs(t,1),a=lua.lua_gettop(t)-1,r=new Array(a),n=0;n<a;n++)r[n]=tojs(t,n+2);return push(t,construct(e,r)),1},tonumber:function(t){var e=tojs(t,1);return lua.lua_pushnumber(t,+e),1},instanceof:function(t){var e=tojs(t,1),a=tojs(t,2);return lua.lua_pushboolean(t,e instanceof a),1}};if("function"==typeof Symbol&&Symbol.iterator){var get_iterator=function(t,e){var a=checkjs(t,e),r=a[Symbol.iterator];r||lauxlib.luaL_argerror(t,e,lua.to_luastring("object not iterable"));var n=apply(r,a,[]);return isobject(n)||lauxlib.luaL_argerror(t,e,lua.to_luastring("Result of the Symbol.iterator method is not an object")),n},next=function(t){var e=tojs(t,1),a=e.next();return a.done?0:(push(t,a.value),1)};jslib.of=function(t){var e=get_iterator(t,1);return lua.lua_pushcfunction(t,next),push(t,e),2}}if("function"==typeof Proxy&&"function"==typeof Symbol){var L_symbol=Symbol("lua_State"),p_symbol=Symbol("fengari-proxy"),proxy_handlers={apply:function(t,e,a){return invoke(t[L_symbol],t[p_symbol],e,a,1)[0]},construct:function(t,e){var a=t[L_symbol],r=t[p_symbol],n=e.length;lauxlib.luaL_checkstack(a,2+n),r(a);var u=lua.lua_gettop(a);if(lauxlib.luaL_getmetafield(a,u,lua.to_luastring("construct"))===lua.LUA_TNIL)throw lua.lua_pop(a,1),new TypeError("not a constructor");lua.lua_rotate(a,u,1);for(var l=0;l<n;l++)push(a,e[l]);return jscall(a,1+n)},defineProperty:function(t,e,a){var r=t[L_symbol],n=t[p_symbol];return lauxlib.luaL_checkstack(r,4),n(r),lauxlib.luaL_getmetafield(r,-1,lua.to_luastring("defineProperty"))===lua.LUA_TNIL?(lua.lua_pop(r,1),!1):(lua.lua_rotate(r,-2,1),push(r,e),push(r,a),jscall(r,3))},deleteProperty:function(t,e){return _deleteProperty(t[L_symbol],t[p_symbol],e)},get:function(t,e){return _get(t[L_symbol],t[p_symbol],e)},getOwnPropertyDescriptor:function(t,e){var a=t[L_symbol],r=t[p_symbol];return lauxlib.luaL_checkstack(a,3),r(a),lauxlib.luaL_getmetafield(a,-1,lua.to_luastring("getOwnPropertyDescriptor"))===lua.LUA_TNIL?void lua.lua_pop(a,1):(lua.lua_rotate(a,-2,1),push(a,e),jscall(a,2))},getPrototypeOf:function(t){var e=t[L_symbol],a=t[p_symbol];return lauxlib.luaL_checkstack(e,2),a(e),lauxlib.luaL_getmetafield(e,-1,lua.to_luastring("getPrototypeOf"))===lua.LUA_TNIL?(lua.lua_pop(e,1),null):(lua.lua_rotate(e,-2,1),jscall(e,1))},has:function(t,e){return _has(t[L_symbol],t[p_symbol],e)},ownKeys:function(t){var e=t[L_symbol],a=t[p_symbol];return lauxlib.luaL_checkstack(e,2),a(e),lauxlib.luaL_getmetafield(e,-1,lua.to_luastring("ownKeys"))===lua.LUA_TNIL?void lua.lua_pop(e,1):(lua.lua_rotate(e,-2,1),jscall(e,1))},set:function(t,e,a){return _set(t[L_symbol],t[p_symbol],e,a)},setPrototypeOf:function(t,e){var a=t[L_symbol],r=t[p_symbol];return lauxlib.luaL_checkstack(a,3),r(a),lauxlib.luaL_getmetafield(a,-1,lua.to_luastring("setPrototypeOf"))===lua.LUA_TNIL?(lua.lua_pop(a,1),!1):(lua.lua_rotate(a,-2,1),push(a,e),jscall(a,2))}},make_arrow_function=Function("return ()=>void 0;"),raw_function=function(){var t=make_arrow_function();return delete t.length,delete t.name,t},createproxy=function(t,e,a){var r=getmainthread(t),n=void 0;switch(a){case"function":n=raw_function();break;case"object":n={};break;default:throw TypeError("invalid type to createproxy")}return n[p_symbol]=e,n[L_symbol]=r,new Proxy(n,proxy_handlers)},valid_types=["function","object"],valid_types_as_luastring=valid_types.map(function(t){return lua.to_luastring(t)});jslib.createproxy=function(t){lauxlib.luaL_checkany(t,1);var e=valid_types[lauxlib.luaL_checkoption(t,2,valid_types_as_luastring[0],valid_types_as_luastring)],a=createproxy(t,lua.lua_toproxy(t,1),e);return push(t,a),1}}var jsmt={__index:function(t){var e=checkjs(t,1),a=tojs(t,2);return push(t,e[a]),1},__newindex:function(t){var e=checkjs(t,1),a=tojs(t,2),r=tojs(t,3);return void 0===r?delete e[a]:e[a]=r,0},__tostring:function(t){var e=checkjs(t,1),a=toString(e);return lua.lua_pushstring(t,lua.to_luastring(a)),1},__call:function(t){var e=checkjs(t,1),a=lua.lua_gettop(t)-1,r=void 0,n=new Array(Math.max(0,a-1));if(a>0&&(r=tojs(t,2),a-- >0))for(var u=0;u<a;u++)n[u]=tojs(t,u+3);return push(t,apply(e,r,n)),1},__pairs:function(t){var e=checkjs(t,1),a=void 0;"function"==typeof Symbol&&void 0!==(a=e[Symbol.for("__pairs")])||lauxlib.luaL_argerror(t,1,lua.to_luastring("js object has no __pairs Symbol"));var r=apply(a,e,[]);void 0===r&&lauxlib.luaL_error(t,lua.to_luastring("bad '__pairs' result (object with keys 'iter', 'state', 'first' expected)"));var n=r.iter;return void 0===n&&lauxlib.luaL_error(t,lua.to_luastring("bad '__pairs' result (object.iter is missing)")),lua.lua_pushcfunction(t,function(){var e=tojs(t,1),a=tojs(t,2),r=n.call(e,a);if(void 0===r)return 0;Array.isArray(r)||lauxlib.luaL_error(t,lua.to_luastring("bad iterator result (Array or undefined expected)")),lauxlib.luaL_checkstack(t,r.length);for(var u=0;u<r.length;u++)push(t,r[u]);return r.length}),push(t,r.state),push(t,r.first),3},__len:function(t){var e=checkjs(t,1),a=void 0;"function"==typeof Symbol&&void 0!==(a=e[Symbol.for("__len")])||lauxlib.luaL_argerror(t,1,lua.to_luastring("js object has no __len Symbol"));var r=apply(a,e,[]);return push(t,r),1}};if("function"==typeof Symbol){Object.prototype[Symbol.for("__pairs")]=function(){return{iter:function(t){if(!(this.index>=this.keys.length)){var e=this.keys[this.index++];return[e,this.object[e]]}},state:{object:this,keys:Object.keys(this),index:0}}};var __len=function(){return this.length};Array.prototype[Symbol.for("__len")]=__len,[Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array].forEach(function(t){Object.getPrototypeOf(new t)[Symbol.for("__len")]=__len})}var luaopen_js=function(t){return states.set(getmainthread(t),new WeakMap),lua.lua_atnativeerror(t,atnativeerror),lauxlib.luaL_newlib(t,jslib),lauxlib.luaL_newmetatable(t,js_tname),lauxlib.luaL_setfuncs(t,jsmt,0),lua.lua_pop(t,1),pushjs(t,null),lua.lua_pushvalue(t,-1),lua.lua_rawsetp(t,lua.LUA_REGISTRYINDEX,null),lua.lua_setfield(t,-2,lua.to_luastring("null")),push(t,global_env),lua.lua_setfield(t,-2,lua.to_luastring("global")),1};module.exports.checkjs=checkjs,module.exports.testjs=testjs,module.exports.pushjs=pushjs,module.exports.push=push,module.exports.tojs=tojs,module.exports.luaopen_js=luaopen_js}])});